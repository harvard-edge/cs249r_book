/*-- scss:defaults --*/

// Dark mode color overrides for Harvard Crimson Theme
// This file is applied when users toggle dark mode on the website

// Keep the Harvard Crimson as the primary accent color
$crimson: #A51C30;

// Dark mode specific colors
$body-bg-dark: #1a1a1a;
$body-color-dark: #e6e6e6;
$link-color-dark: lighten($crimson, 15%);  // Brighter crimson for dark backgrounds
$link-hover-color-dark: lighten($crimson, 25%);

// Sidebar and navigation
$sidebar-bg-dark: #212529;
$navbar-bg-dark: #212529;
$border-color-dark: #454d55;

/*-- scss:rules --*/

// Main body styling
body {
  background-color: $body-bg-dark;
  color: $body-color-dark;
}

// Links in dark mode - brighter crimson
a {
  color: $link-color-dark;
  
  &:hover {
    color: $link-hover-color-dark;
  }
  
  &:visited {
    color: lighten($crimson, 10%);
  }
}

// Content area
.content,
main,
article,
#quarto-content {
  background-color: $body-bg-dark;
  color: $body-color-dark;
}

// Sidebar
.sidebar,
.sidebar-navigation {
  background-color: $sidebar-bg-dark;
  border-color: $border-color-dark;
  
  .sidebar-item a {
    color: #adb5bd;
    
    &:hover {
      color: $link-color-dark;
      background-color: rgba($crimson, 0.15);
    }
    
    &.active,
    &[aria-current="page"] {
      color: $link-color-dark;
      background-color: rgba($crimson, 0.2);
    }
  }
}

// TOC (table of contents) - Right sidebar "On this page"
.table-of-contents,
#TOC,
.quarto-toc,
nav[role="doc-toc"],
.sidebar.toc-left,
div[role="doc-toc"] {
  background-color: transparent;
  border-left-color: $crimson;
  
  // TOC title
  .toc-title,
  .sidebar-title,
  h2 {
    color: #e6e6e6 !important;
    border: none !important;
  }
  
  // All links in TOC
  a,
  .nav-link {
    color: #c0c0c0 !important;
    
    &:hover {
      color: $link-color-dark !important;
    }
  }
  
  .active,
  .nav-link.active {
    color: $link-color-dark !important;
    font-weight: 500 !important;
  }
  
  // Nested lists
  ul, ol {
    li {
      color: #c0c0c0;
      
      a {
        color: #c0c0c0 !important;
      }
    }
  }
}

// Headers - adjust border colors for dark mode
.content h2,
main h2,
article h2,
#quarto-content h2 {
  border-left-color: $crimson;
  border-bottom-color: rgba($crimson, 0.4);
  color: #e6e6e6;
}

.content h3,
main h3,
article h3,
#quarto-content h3 {
  border-left-color: $crimson;
  border-bottom-color: rgba($crimson, 0.35);
  color: #d0d0d0;
}

.content h4,
main h4,
article h4,
#quarto-content h4 {
  border-left-color: $crimson;
  border-bottom-color: rgba($crimson, 0.3);
  color: #c0c0c0;
}

.content h5,
main h5,
article h5,
#quarto-content h5 {
  border-left-color: $crimson;
  border-bottom-color: rgba($crimson, 0.25);
  color: #b0b0b0;
}

.content h6,
main h6,
article h6,
#quarto-content h6 {
  border-left-color: $crimson;
  border-bottom-color: rgba($crimson, 0.2);
  color: #a0a0a0;
}

// Tables - improved contrast for dark mode
table {
  background-color: #1a1a1a;
  
  th {
    background-color: #2c2c2c !important;
    border-bottom: 2px solid $crimson !important;
    color: #f0f0f0 !important;
    font-weight: 600;
  }
  
  td {
    background-color: #242424 !important;
    border-bottom-color: #454d55 !important;
    color: #e0e0e0 !important;
  }
  
  tbody tr:nth-child(even) {
    background-color: #1e1e1e;
    
    td {
      background-color: #1e1e1e !important;
    }
  }
  
  tbody tr:hover {
    background-color: #2a2a2a !important;
    
    td {
      background-color: #2a2a2a !important;
    }
  }
  
  td:first-child,
  th:first-child {
    background-color: #323232 !important;
    border-right-color: #454d55;
    font-weight: 500;
  }
}

// Table container
.table-container,
.cell-output-display {
  table {
    th {
      background-color: #2c2c2c !important;
      color: #f0f0f0 !important;
    }
    
    td {
      background-color: #242424 !important;
      color: #e0e0e0 !important;
    }
  }
}

// Code blocks
pre {
  background-color: #2c2c2c;
  color: #e6e6e6;
  border: 1px solid #454d55;
}

// Inline code
code {
  background-color: #2c2c2c;
  color: #e94560;  // Slightly pink/red for visibility
  padding: 0.2em 0.4em;
  border-radius: 3px;
}

// Code blocks inside pre (override inline styling)
pre code {
  color: #e6e6e6;
  background-color: transparent;
  padding: 0;
}

// Figures and captions
.figure-caption,
.caption,
figure figcaption,
.quarto-figure figcaption {
  color: #c0c0c0 !important;
  background-color: transparent !important;
}

// Navbar
.navbar {
  background-color: $navbar-bg-dark !important;
  border-bottom: 1px solid $border-color-dark;
}

.navbar-nav .nav-link {
  color: #adb5bd !important;
  
  &:hover {
    color: $link-color-dark !important;
  }
  
  &.active {
    color: $link-color-dark !important;
  }
}

// Footer
.page-footer {
  background-color: $navbar-bg-dark;
  border-top-color: $border-color-dark;
  color: #adb5bd;
}

// Blockquotes
blockquote {
  border-left-color: #6c757d;
  background-color: #232323;
  color: #d0d0d0;
}

// Announcement bar
.alert-primary,
.announcement {
  background: linear-gradient(135deg, 
    rgba($crimson, 0.2) 0%, 
    rgba($crimson, 0.15) 100%) !important;
  border-color: rgba($crimson, 0.5) !important;
  color: lighten($crimson, 30%) !important;
}

// Code listings
.listing figure {
  border-color: #454d55;
  background: linear-gradient(135deg, #2c2c2c 0%, #232323 100%);
}

.listing figcaption,
.listing .listing-caption {
  background: linear-gradient(135deg, #2c2c2c 0%, #252525 100%) !important;
  border-bottom-color: #454d55 !important;
  color: #e6e6e6 !important;
}

.listing .sourceCode {
  background-color: #1e1e1e !important;
}

// Video containers
.video-container {
  border-color: rgba(255, 255, 255, 0.1);
}

// Embedded iframes (Google Looker Studio, etc.)
// We can't control their internal styling, but we can frame them nicely
iframe {
  background-color: #ffffff;  // Ensure white background
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

// Wrapper for embedded content
div:has(> iframe) {
  background-color: #2c2c2c;
  padding: 1rem;
  border-radius: 12px;
  border: 1px solid #454d55;
}

// Support sections
.support-mission,
.podcast-section {
  background-color: #232323;
  border-color: #454d55;
  
  p {
    color: #d0d0d0;
  }
}

// Button styling
.btn-primary {
  background-color: $crimson;
  border-color: $crimson;
  color: #ffffff;
  
  &:hover {
    background-color: lighten($crimson, 10%);
    border-color: lighten($crimson, 10%);
  }
}

.github-star-btn {
  background-color: $crimson !important;
  color: #ffffff !important;
  
  &:hover {
    background-color: lighten($crimson, 10%) !important;
  }
}

// Back to top button
.back-to-top,
#quarto-back-to-top {
  background-color: $crimson !important;
  color: #ffffff !important;
  border: 1px solid lighten($crimson, 10%);
  
  &:hover {
    background-color: lighten($crimson, 15%) !important;
  }
}

