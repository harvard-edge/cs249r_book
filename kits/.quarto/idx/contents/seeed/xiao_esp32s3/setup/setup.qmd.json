{"title":"Setup","markdown":{"headingText":"Setup","headingAttr":{"id":"","classes":["unnumbered"],"keyvalue":[]},"containsRefs":false,"markdown":"\n![*DALL·E prompt - 1950s cartoon-style drawing of a XIAO ESP32S3 board with a distinctive camera module, as shown in the image provided. The board is placed on a classic lab table with various sensors, including a microphone. Behind the board, a vintage computer screen displays the Arduino IDE in muted colors, with code focusing on LED pin setups and machine learning inference for voice commands. The Serial Monitor on the IDE showcases outputs detecting voice commands like 'yes' and 'no'. The scene merges the retro charm of mid-century labs with modern electronics.*](./images/jpeg/xiao_setup.jpg)\n\n## Overview {#sec-setup-overview-d638}\n\nThe [XIAOML Kit](https://www.seeedstudio.com/The-XIAOML-Kit.html) is designed to provides hands-on experience with TinyML applications. The kit includes the powerful [XIAO ESP32S3 Sense](https://www.seeedstudio.com/XIAO-ESP32S3-Sense-p-5639.html) development board and an expansion board that adds essential sensors for machine learning projects.\n\n**Complete XIAOML Kit Components:**\n\n- **XIAO ESP32S3 Sense**: Main development board with integrated camera sensor, digital microphone, and SD card support\n- **Expansion Board**: Features a 6-axis IMU (LSM6DS3TR-C) and 0.42\" OLED display for motion sensing and data visualization\n- **SD Card Toolkit**: Includes SD card and USB adapter for data storage and model deployment\n- **USB-C Cable**: For connecting the board to your computer\n- **Antenna and Heat Sinks**\n\n> ⚠️ **Attention**\n>\n> **Do not install the heat sinks** (or carefully, remove them) on/from the XIAO ESP32S3 if you want to use the XIAO ML Kit Expansion Board. See Appendix for more information.\n\n\\noindent\n![](./images/png/kit-2.png){width=90% fig-align=\"center\"}\n\n### XIAO ESP32S3 Sense - Core Board Features {#sec-setup-xiao-esp32s3-sense-core-board-features-6e91}\n\nThe [XIAO ESP32S3 Sense](https://www.seeedstudio.com/XIAO-ESP32S3-Sense-p-5639.html) serves as the heart of the XIAOML Kit, integrating embedded ML computing power with photography and audio capabilities, making it an ideal platform for TinyML applications in intelligent voice and vision AI.\n\n\\noindent\n![](./images/png/xiao.png){width=65% fig-align=\"center\"}\n\n**Key Features**\n\n- **Powerful MCU**: ESP32S3 32-bit, dual-core, Xtensa processor operating up to 240 MHz, with Arduino / MicroPython support\n- **Advanced Functionality**: Detachable OV2640 camera sensor for 1600 × 1200 resolution, compatible with OV5640 camera sensor, plus integrated digital microphone\n- **Elaborate Power Design**: Lithium battery charge management with four power consumption models, deep sleep mode with power consumption as low as 14 μA\n- **Great Memory**: 8 MB PSRAM and 8 MB FLASH, supporting SD card slot for external 32 GB FAT memory\n- **Outstanding RF Performance**: 2.4 GHz Wi-Fi and BLE dual wireless communication, supports 100m+ remote communication with U.FL antenna\n- **Compact Design**: 21 × 17.5 mm, adopting the classic XIAO form factor, suitable for space-limited projects\n\n\\noindent\n![](./images/png/xiao_pins.png){width=65% fig-align=\"center\"}\n\nBelow is the general board pinout:\n\n\\noindent\n![](./images/png/xiao_esp32c3_sense_pin-out.png){width=85% fig-align=\"center\"}\n\n> For more details, please refer to the [Seeed Studio Wiki page](https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/)\n\n### Expansion Board Features {#sec-setup-expansion-board-features-e715}\n\nThe expansion board extends the XIAOML Kit's capabilities for motion-based machine learning applications:\n\n\\noindent\n![](./images/png/exp_board_views.png){width=85% fig-align=\"center\"}\n\n**Components:**\n\n- 6-axis IMU (LSM6DS3TR-C):\n    - 3-axis accelerometer and 3-axis gyroscope for motion detection and classification\n        - Accelerometer range: ±2/±4/±8/±16 g\n        - Gyroscope range: ±125/±250/±500/±1000/±2000 dps\n        - I2C interface (address: 0x6A)\n\n- 0.42\" OLED Display\n    - Monochrome display (72×40 resolution) for real-time data visualization\n        - Controller: SSD1306\n        - I2C interface (address: 0x3C)\n\n- Restart Button (EN)\n\n- Battery Connector (BAT+, BAT- )\n\n### Complete Kit Assembly {#sec-setup-complete-kit-assembly-17d3}\n\nThe expansion board connects seamlessly to the XIAO ESP32S3 Sense, creating a comprehensive platform for multimodal machine learning experiments covering vision, audio, and motion sensing.\n\n\\noindent\n![](./images/png/kit_assembled.png){width=85% fig-align=\"center\"}\n\nPlease pay attention to the mounting orientation of the module:\n\n\\noindent\n![](./images/png/mounted.png){width=60% fig-align=\"center\"}\n\nNote that\n\n- The `EN` connection, shown at the bottom of the ESP32S3 Sense, is available on the expansion board via the `RST` button.\n- The `BAT+` and `BAT-` connections are also available through the `BAT3.7V` white connector.\n\n**XIAOML Kit Applications:**\n\n- **Vision**: Image classification and object detection using the integrated camera\n- **Audio**: Keyword spotting and voice recognition with the built-in microphone\n- **Motion**: Activity recognition and anomaly detection using the IMU sensors\n- **Multi-modal**: Combined sensor fusion for complex ML applications\n\n## Installing the XIAO ESP32S3 Sense on Arduino IDE {#sec-setup-installing-xiao-esp32s3-sense-arduino-ide-197b}\n\n1. Connect the XIAOML Kit to your computer via the USB-C port.\n\\noindent\n![](./images/png/usb-conn.png){width=80% fig-align=\"center\"}\n\n2. Download and Install the stable version of Arduino IDE according to your operating system.\n\n    [**[Download Arduino IDE]**](https://www.arduino.cc/en/software)\n\n3. Open the **Arduino IDE** and select the Boards Manager (represented by the `UNO Icon`).\n\n4. Enter \"*ESP32\"*, and select \"**esp32 by Espressif Systems**.\" You can `install` or `update` the board support packages.\n\n> Do not select \"**Arduino ESP32 Boards** by Arduino\", which are the support package for the Arduino Nano ESP32 and not our board.\n\n\\noindent\n![](./images/png/ide_1.png){width=85% fig-align=\"center\"}\n\n> ⚠️ **Attention**\n>\n> Versions 3.x may experience issues when using the XIAO ESP32S3 Sense with Edge Impulse deploy codes. If this is the case, use the last 2.0.x stable version (for example, 2.0.17) instead.\n\n5. Click `Select Board`, enter with *xiao* or *esp32s3*, and select the `XIAO_ESP32S3` in the boards manager and the corresponding PORT where the ESP32S3 is connected.\n\n\\noindent\n![](./images/png/sel_board_port.png){width=85% fig-align=\"center\"}\n\nThat is it! The device should be OK. Let's do some tests.\n\n## Testing the board with BLINK {#sec-setup-testing-board-blink-005d}\n\nThe XIAO ESP32S3 Sense features a built-in LED connected to GPIO21. So, you can run the blink sketch (which can be found under `Files/Examples/Basics/Blink`. The sketch uses the `LED_BUILTIN` Arduino constant, which internally corresponds to the LED connected to pin 21. Alternatively, you can change the Blink sketch accordingly.\n\n```cpp\n#define LED_BUILT_IN 21 // This line is optional\n\nvoid setup() {\n  pinMode(LED_BUILT_IN, OUTPUT); // Set the pin as output\n}\n\n// Remember that the pins work with inverted logic\n// LOW to turn on and HIGH to turn off\nvoid loop() {\n  digitalWrite(LED_BUILT_IN, LOW); //Turn on\n  delay (1000); //Wait 1 sec\n  digitalWrite(LED_BUILT_IN, HIGH); //Turn off\n  delay (1000); //Wait 1 sec\n}\n```\n\n> Note that the pins operate with inverted logic: LOW turns on and HIGH turns off.\n\n\\noindent\n![](./images/png/blink.png){width=60% fig-align=\"center\"}\n\n## Microphone Test {#sec-setup-microphone-test-7d6c}\n\nLet's start with sound detection. Enter with the code below or go to the [GitHub project](https://github.com/Mjrovai/XIAO-ESP32S3-Sense) and download the sketch: [XIAOML_Kit_Mic_Test](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/Mic_Test/XiaoEsp32s3_Mic_Test) and run it on the Arduino IDE:\n\n```cpp\n/*\n  XIAO ESP32S3 Simple Mic Test\n  (for ESP32 Library version 3.0.x and later)\n*/\n\n#include <ESP_I2S.h>\nI2SClass I2S;\n\nvoid setup() {\n  Serial.begin(115200);\n  while (!Serial) {\n    }\n\n  // setup 42 PDM clock and 41 PDM data pins\n  I2S.setPinsPdmRx(42, 41);\n\n  // start I2S at 16 kHz with 16-bits per sample\n  if (!I2S.begin(I2S_MODE_PDM_RX,\n                 16000,\n                 I2S_DATA_BIT_WIDTH_16BIT,\n                 I2S_SLOT_MODE_MONO)) {\n    Serial.println(\"Failed to initialize I2S!\");\n    while (1); // do nothing\n  }\n}\n\nvoid loop() {\n  // read a sample\n  int sample = I2S.read();\n\n  if (sample && sample != -1 && sample != 1) {\n    Serial.println(sample);\n  }\n}\n```\n\nOpen the **Serial Plotter,** and you will see the loudness change curve of the sound.\n\n\\noindent\n![](./images/png/sound_test.png){width=85% fig-align=\"center\"}\n\nWhen producing sound, you can verify it on the Serial Plotter.\n\n**Save recorded sound (.wav audio files) to a microSD card.**\n\nNow, using the onboard SD Card reader, we can save .wav audio files. To do that, we need first to enable the XIAO PSRAM.\n\n> ESP32-S3 has only a few hundred kilobytes of internal RAM on the MCU chip. This can be insufficient for some purposes, so up to 16 MB of external PSRAM (pseudo-static RAM) can be connected with the SPI flash chip (The XIAO has 8 MB of PSRAM). The external memory is incorporated in the memory map and, with certain restrictions, is usable in the same way as internal data RAM.\n\n- To turn it on, go to `Tools->PSRAM:\"OPI PSRAM\"->OPI PSRAM`\n\n\\noindent\n![](./images/png/psram.png){width=85% fig-align=\"center\"}\n\n> XIAO ESP32S3 Sense supports microSD cards up to **32GB**. If you are ready to purchase a microSD card for XIAO, please refer to the specifications below. Format the microSD card to **FAT32 format** before using it.\n\nNow, insert the FAT32 formatted SD card into the XIAO as shown in the photo below\n\n\\noindent\n![](./images/png/sdcard.png){width=60% fig-align=\"center\"}\n\n```cpp\n/*\n * WAV Recorder for Seeed XIAO ESP32S3 Sense\n * (for ESP32 Library version 3.0.x and later)\n*/\n\n#include \"ESP_I2S.h\"\n#include \"FS.h\"\n#include \"SD.h\"\n\nvoid setup() {\n  // Create an instance of the I2SClass\n  I2SClass i2s;\n\n  // Create variables to store the audio data\n  uint8_t *wav_buffer;\n  size_t wav_size;\n\n  // Initialize the serial port\n  Serial.begin(115200);\n  while (!Serial) {\n    delay(10);\n  }\n\n  Serial.println(\"Initializing I2S bus...\");\n\n  // Set up the pins used for audio input\n  i2s.setPinsPdmRx(42, 41);\n\n  // start I2S at 16 kHz with 16-bits per sample\n  if (!i2s.begin(I2S_MODE_PDM_RX,\n                 16000,\n                 I2S_DATA_BIT_WIDTH_16BIT,\n                 I2S_SLOT_MODE_MONO)) {\n    Serial.println(\"Failed to initialize I2S!\");\n    while (1); // do nothing\n  }\n\n  Serial.println(\"I2S bus initialized.\");\n  Serial.println(\"Initializing SD card...\");\n\n  // Set up the pins used for SD card access\n  if(!SD.begin(21)){\n    Serial.println(\"Failed to mount SD Card!\");\n    while (1) ;\n  }\n  Serial.println(\"SD card initialized.\");\n  Serial.println(\"Recording 20 seconds of audio data...\");\n\n  // Record 20 seconds of audio data\n  wav_buffer = i2s.recordWAV(20, &wav_size);\n\n  // Create a file on the SD card\n  File file = SD.open(\"/arduinor_rec.wav\", FILE_WRITE);\n  if (!file) {\n    Serial.println(\"Failed to open file for writing!\");\n    return;\n  }\n\n  Serial.println(\"Writing audio data to file...\");\n\n  // Write the audio data to the file\n  if (file.write(wav_buffer, wav_size) != wav_size) {\n    Serial.println(\"Failed to write audio data to file!\");\n    return;\n  }\n\n  // Close the file\n  file.close();\n\n  Serial.println(\"Application complete.\");\n}\n\nvoid loop() {\n  delay(1000);\n  Serial.printf(\".\");\n}\n```\n\n- Save the code, for example, as `Wav_Record.ino`, and run it in the Arduino IDE.\n- This program is executed only once after the user turns on the serial monitor (or when the `RESET` button is pressed). It records for 20 seconds and saves the recording file to a microSD card as \"arduino_rec.wav.\"\n- When the \".\" is output every second in the serial monitor, the program execution is complete, and you can play the recorded sound file using a card reader.\n\n\\noindent\n![](./images/png/rec.png){width=85% fig-align=\"center\"}\n\nThe sound quality is excellent!\n\n> The explanation of how the code works is beyond the scope of this lab, but you can find an excellent description on the [wiki](https://wiki.seeedstudio.com/xiao_esp32s3_sense_mic/) page.\n\nTo know more about the File System on the XIAO ESP32S3 Sense, please refer to this [link](https://wiki.seeedstudio.com/xiao_esp32s3_sense_filesystem/).\n\n## Testing the Camera {#sec-setup-testing-camera-bbd0}\n\nFor testing (and using the camera, we can use several methods:\n\n- The  SenseCraft  AI Studio\n- The CameraWebServer app on Arduino IDE (See the next section)\n- Capturing images and [saving them on an SD card](https://github.com/limengdu/SeeedStudio-XIAO-ESP32S3-Sense-camera/tree/main) (similar to what we did with audio)\n\n### Testing the camera with the SenseCraft AI Studio {#sec-setup-testing-camera-sensecraft-ai-studio-3aca}\n\nThe easiest way to see the camera working is to use the [SenseCraft AI](https://sensecraft.seeed.cc/ai/home) Studio, a robust platform that offers a wide range of AI models compatible with various devices, including the **XIAO ESP32S3 Sense** and the Grove Vision AI V2.\n\n> We can also use the [**SenseCraft Web Toolkit**](https://seeed-studio.github.io/SenseCraft-Web-Toolkit/#/setup/process), a simplified version of the SenseCraft AI Studio.\n>\n\nLet's follow the steps below to start the **SenseCraft AI**:\n\n- Open the [SenseCraft AI Vision Workspace](https://sensecraft.seeed.cc/ai/device/local/32) in a web browser, such as **Chrome**, and sign in (or create an account).\n\n\\noindent\n![](./images/png/sensecraft1.png){width=85% fig-align=\"center\"}\n\n- Having the XIAOML Kit physically connected to the notebook, select it as below:\n\n\\noindent\n![](./images/png/sensecraft2.png){width=85% fig-align=\"center\"}\n\n> Note: The **WebUSB tool** may not function correctly in certain browsers, such as Safari. Use Chrome instead. Also, confirm that the Arduino IDE or any other serial device is not connected to the XIAO.\n\nTo see the camera working, we should upload a model. We can try several Computer Vision models previously uploaded by Seeed Studio. Use the button `[Select Model]` and choose among the available models.\n\n\\noindent\n![](./images/png/sensecraft5.png){width=85% fig-align=\"center\"}\n\nPassing the cursor over the AI models, we can have some information about them, such as name, description, **category** or **task** (Image Classification, Object Detection, or Pose/Keypoint Detection), the **algorithm** (like YOLO V5 or V8, FOMO, MobileNet V2, etc.)  and in some cases, **metrics** (Accuracy or mAP).\n\n\\noindent\n![](./images/png/sensecraft4.png){width=85% fig-align=\"center\"}\n\nWe can choose one of the ready-to-use AI models, such as \"Person Classification\", by clicking on it and pressing the [Confirm] button, or upload our own model.\n\n\\noindent\n![](./images/png/sensecraft3.png){width=85% fig-align=\"center\"}\n\nIn the **Preview** Area, we can see the streaming generated by the camera.\n\n\\noindent\n![](./images/png/sensecraft6.png){width=85% fig-align=\"center\"}\n\n> We will return to the SenseCraft  AI Studio in more detail during the Vision AI labs.\n\n## Testing WiFi {#sec-setup-testing-wifi-311a}\n\n### Installation of the antenna {#sec-setup-installation-antenna-ba79}\n\nThe XIAOML Kit arrived fully assembled. First, remove the Sense Expansion Board (which contains the Camera, Mic, and SD Card Reader) from the XIAO.\n\nOn the bottom left of the front of XIAO ESP32S3, there is a separate \"WiFi/BT Antenna Connector\". To improve your WiFi/Bluetooth signal, remove the antenna from the package and attach it to the connector.\n\nThere is a small trick to installing the antenna. If you press down hard on it directly, you will find it very difficult to press and your fingers will hurt! The correct way to install the antenna is to insert one side of the antenna connector into the connector block first, then gently press down on the other side to ensure the antenna is securely installed.\n\nRemoving the antenna is also the case. Do not use brute force to pull the antenna directly; instead, apply force to one side to lift, making the antenna easy to remove.\n\n\\noindent\n![](./images/jpeg/antenna.jpg){width=60% fig-align=\"center\"}\n\nReinstalling the expansion board is very simple; you just need to align the connector on the expansion board with the B2B connector on the XIAO ESP32S3, press it hard, and hear a \"click.\" The installation is complete.\n\nOne of the XIAO ESP32S3's differentiators is its WiFi capability. So, let's test its radio by scanning the Wi-Fi networks around it. You can do this by running one of the code examples on the board.\n\nOpen the Arduino IDE and select our board and port. Go to Examples and look for **WiFI ==\\> WiFIScan** under the \"Examples for the XIAO ESP32S3\". Upload the sketch to the board.\n\nYou should see the Wi-Fi networks (SSIDs and RSSIs) within your device's range on the serial monitor. Here is what I got in the lab:\n\n\\noindent\n![](./images/png/wifi.png){width=85% fig-align=\"center\"}\n\n### Simple WiFi Server (Turning LED ON/OFF) {#sec-setup-simple-wifi-server-turning-led-onoff-1d76}\n\nLet's test the device's capability to behave as a Wi-Fi server. We will host a simple page on the device that sends commands to turn the XIAO built-in LED ON and OFF.\n\nGo to Examples and look for **WiFI ==\\> SimpleWiFIServer** under the \"Examples for the XIAO ESP32S3\".\n\nBefore running the sketch, you should enter your network credentials:\n\n```cpp\nconst char* ssid     = \"Your credentials here\";\nconst char* password = \"Your credentials here\";\n```\n\nAnd modify **pin 5** to **pin 21**, where the built-in LED is installed. Also, let's modify the webpage (lines 85 and 86) to reflect the correct LED Pin and that it is active with LOW:\n\n```cpp\nclient.print(\"Click <a href=\\\"/H\\\">here</a> to turn the LED on pin 21 OFF.<br>\");\nclient.print(\"Click <a href=\\\"/L\\\">here</a> to turn the LED on pin 21 ON.<br>\");\n```\n\nYou can monitor your server's performance using the Serial Monitor.\n\n\\noindent\n![](./images/png/wifi-2.png){width=85% fig-align=\"center\"}\n\nTake the IP address shown in the Serial Monitor and enter it in your browser. You will see a page with links that can turn the built-in LED of your XIAO ON and OFF.\n\n\\noindent\n![](./images/png/app.png){width=75% fig-align=\"center\"}\n\n### Using the CameraWebServer {#sec-setup-using-camerawebserver-6959}\n\nIn the Arduino IDE, go to  `File > Examples > ESP32 > Camera`, and select `CameraWebServer`\n\nOn the `board_config.h` tab, comment on all cameras' models, except the XIAO model pins:\n\n`#define CAMERA_MODEL_XIAO_ESP32S3 // Has PSRAM`\n\n> Do not forget to check the `Tools` to see if PSRAM is enabled.\n\n\\noindent\n![](./images/png/webcap-1.png){width=85% fig-align=\"center\"}\n\nAs done before, in the `CameraWebServer.ino` tab, enter your wifi credentials and upload the code to the device.\n\nIf the code is executed correctly, you should see the address on the Serial Monitor:\n\n```\nWiFi connecting....\nWiFi connected\nCamera Ready! Use 'http://192.168.5.60' to connect\n```\n\nCopy the address into your browser and wait for the page to load. Select the camera resolution (for example, QVGA) and select `[START STREAM]`. Wait for a few seconds, depending on your connection. Using the `[Save]` button, you can save an image to your computer's download area.\n\n\\noindent\n![](./images/png/img_cap.png){width=85% fig-align=\"center\"}\n\nThat's it! You can save the images directly on your computer for use on projects.\n\n## Testing the IMU Sensor (LSM6DS3TR-C) {#sec-setup-testing-imu-sensor-lsm6ds3trc-fd9d}\n\nAn **Inertial Measurement Unit (IMU)** is a sensor that measures motion and orientation. The LSM6DS3TR-C on your XIAOML kit is a **6-axis IMU**, meaning it combines:\n\n- **3-axis Accelerometer**: Measures linear acceleration (including gravity) along X, Y, and Z axes\n- **3-axis Gyroscope**: Measures angular velocity (rotation rate) around X, Y, and Z axes\n\n### Technical Specifications: {#sec-setup-technical-specifications-3010}\n\n- **Communication**: I2C interface at address `0x6A`\n- **Accelerometer Range**: ±2/±4/±8/±16 g (we use ±2g by default)\n- **Gyroscope Range**: ±125/±250/±500/±1000/±2000 dps (we use ±250 dps by default)\n- **Resolution**: 16-bit ADC\n- **Power Consumption**: Ultra-low power design\n\n### Coordinate System: {#sec-setup-coordinate-system-8466}\n\nThe sensor follows a right-hand coordinate system. When looking at the IMU sensor with the point mark visible (Expansion Board bottom view):\n\n\\noindent\n![](./images/png/imu-mark.png){width=60% fig-align=\"center\"}\n\n- **X-axis**: Points to the right\n- **Y-axis**: Points forward (away from you)\n- **Z-axis**: Points upward (out of the board)\n\n\\noindent\n![](./images/png/imu-directions.png){width=85% fig-align=\"center\"}\n\n### Required Libraries {#sec-setup-required-libraries-f048}\n\nBefore uploading the code, install the required library:\n\n1. Open the **Arduino IDE** and select **Manage Libraries** (represented by the `Books Icon`).\n\n2. For the IMU library, enter \"*LSM6DS3\"*, and select \"**Seeed Arduino LSM6DS3 by Seeed**\". You can `INSTALL` or `UPDATE` the board support packages.\n\n\\noindent\n![](./images/png/imu.png){width=85% fig-align=\"center\"}\n\n⚠️ **Important**: Do NOT install \"Arduino_LSM6DS3 by Arduino\" - that's for different boards!\n\n### Test Code {#sec-setup-test-code-d4ea}\n\nEnter with the code below at the Arduino IDE and uploaded it to Kit:\n\n```cpp\n#include <LSM6DS3.h>\n#include <Wire.h>\n\n// Create IMU object using I2C interface\n// LSM6DS3TR-C sensor is located at I2C address 0x6A\nLSM6DS3 myIMU(I2C_MODE, 0x6A);\n\n// Variables to store sensor readings\nfloat accelX, accelY, accelZ;  // Accelerometer values (g-force)\nfloat gyroX, gyroY, gyroZ;     // Gyroscope values (degrees per second)\n\nvoid setup() {\n  // Initialize serial communication at 115200 baud rate\n  Serial.begin(115200);\n\n  // Wait for serial port to connect (useful for debugging)\n  while (!Serial) {\n    delay(10);\n  }\n\n  Serial.println(\"XIAOML Kit IMU Test\");\n  Serial.println(\"LSM6DS3TR-C 6-Axis IMU Sensor\");\n  Serial.println(\"=============================\");\n\n  // Initialize the IMU sensor\n  if (myIMU.begin() != 0) {\n    Serial.println(\"ERROR: IMU initialization failed!\");\n    Serial.println(\"Check connections and I2C address\");\n    while(1) {\n      delay(1000); // Halt execution if IMU fails to initialize\n    }\n  } else {\n    Serial.println(\"✓ IMU initialized successfully\");\n    Serial.println();\n\n    // Print sensor information\n    Serial.println(\"Sensor Information:\");\n    Serial.println(\"- Accelerometer range: ±2g\");\n    Serial.println(\"- Gyroscope range: ±250 dps\");\n    Serial.println(\"- Communication: I2C at address 0x6A\");\n    Serial.println();\n\n    // Print data format explanation\n    Serial.println(\"Data Format:\");\n    Serial.println(\"AccelX,AccelY,AccelZ,GyroX,GyroY,GyroZ\");\n    Serial.println(\"Units: g-force (m/s²), degrees/second\");\n    Serial.println();\n\n    delay(2000); // Brief pause before starting measurements\n  }\n}\n\nvoid loop() {\n  // Read accelerometer data (in g-force units)\n  accelX = myIMU.readFloatAccelX();\n  accelY = myIMU.readFloatAccelY();\n  accelZ = myIMU.readFloatAccelZ();\n\n  // Read gyroscope data (in degrees per second)\n  gyroX = myIMU.readFloatGyroX();\n  gyroY = myIMU.readFloatGyroY();\n  gyroZ = myIMU.readFloatGyroZ();\n\n  // Print readable format to Serial Monitor\n  Serial.print(\"Accelerometer (g): \");\n  Serial.print(\"X=\"); Serial.print(accelX, 3);\n  Serial.print(\" Y=\"); Serial.print(accelY, 3);\n  Serial.print(\" Z=\"); Serial.print(accelZ, 3);\n\n  Serial.print(\" | Gyroscope (°/s): \");\n  Serial.print(\"X=\"); Serial.print(gyroX, 2);\n  Serial.print(\" Y=\"); Serial.print(gyroY, 2);\n  Serial.print(\" Z=\"); Serial.print(gyroZ, 2);\n  Serial.println();\n\n  // Print CSV format for Serial Plotter\n  Serial.println(String(accelX) + \",\" + String(accelY) + \",\" +\n                 String(accelZ) + \",\" + String(gyroX) + \",\" +\n                 String(gyroY) + \",\" + String(gyroZ));\n\n  // Update rate: 10 Hz (100ms delay)\n  delay(100);\n}\n```\n\nThe Serial monitor will show the values, and the plotter will show their variation over time. For example, by moving the Kit over the **y-axis**, we will see that value 2 (red line) changes accordingly. Note that **z-axis** is represented by value 3 (green line), which is near 1.0g. The blue line (value 1) is related to the **x-axis**.\n\n\\noindent\n![](./images/png/plotter.png){width=85% fig-align=\"center\"}\n\nYou can select the values 4 to 6 to see the Gyroscope behavior.\n\n## Testing the OLED Display (SSD1306) {#sec-setup-testing-oled-display-ssd1306-0337}\n\nOLED (Organic Light-Emitting Diode) displays are self-illuminating screens where each pixel produces its own light. The XIAO ML kit features a compact 0.42-inch monochrome OLED display, ideal for displaying sensor data, status information, and simple graphics.\n\n### Technical Specifications: {#sec-setup-technical-specifications-a88f}\n\n- **Size**: 0.42 inches diagonal\n- **Resolution**: 72 × 40 pixels\n- **Controller**: SSD1306\n- **Interface**: I2C at address `0x3C`\n- **Colors**: Monochrome (black pixels on white background, or vice versa)\n- **Viewing**: High contrast, visible in bright light\n- **Power**: Low power consumption, no backlight needed\n\n### Display Characteristics: {#sec-setup-display-characteristics-b6ac}\n\n- **Pixel-perfect**: Each of the 2,880 pixels (72×40) can be individually controlled\n- **Fast refresh**: Suitable for animations and real-time data\n- **No ghosting**: Instant pixel response\n- **Wide viewing angle**: Clear from multiple viewing positions\n\n### Required Libraries {#sec-setup-required-libraries-1692}\n\nBefore uploading the code, install the required library:\n\n1. Open the **Arduino IDE** and select the \"Manage Libraries\" (represented by the `Books Icon`).\n\n2. Enter *u8g2* and select **U8g2 by oliver**. You can `install` or `update` the board support packages.\n\n    ℹ️ **Note**: U8g2 is a powerful graphics library supporting many display types\n\n\\noindent\n![](./images/png/oled.png){width=85% fig-align=\"center\"}\n\nThe **U8g2** library is a monochrome graphics library with these features:\n\n- Support for many display controllers (including SSD1306)\n- Text rendering with various fonts\n- Drawing primitives (lines, rectangles, circles)\n- Memory-efficient page-based rendering\n- Hardware and software I2C support\n\n### Test Code {#sec-setup-test-code-998c}\n\nEnter with the code below at the Arduino IDE and uploaded it to Kit:\n\n```cpp\n#include <U8g2lib.h>\n#include <Wire.h>\n\n// Initialize the OLED display\n// SSD1306 controller, 72x40 resolution, I2C interface\nU8G2_SSD1306_72X40_ER_1_HW_I2C u8g2(U8G2_R2, U8X8_PIN_NONE);\n\nvoid setup() {\n  Serial.begin(115200);\n\n  Serial.println(\"XIAOML Kit - Hello World\");\n  Serial.println(\"==========================\");\n\n  // Initialize the display\n  u8g2.begin();\n\n  Serial.println(\"✓ Display initialized\");\n  Serial.println(\"Showing Hello World message...\");\n\n  // Clear the display\n  u8g2.clearDisplay();\n}\n\nvoid loop() {\n  // Start drawing sequence\n  u8g2.firstPage();\n  do {\n    // Set font\n    u8g2.setFont(u8g2_font_ncenB08_tr);\n\n    // Display \"Hello World\" centered\n    u8g2.setCursor(8, 15);\n    u8g2.print(\"Hello\");\n\n    u8g2.setCursor(12, 30);\n    u8g2.print(\"World!\");\n\n    // Add a simple decoration - draw a frame around the text\n    u8g2.drawFrame(2, 2, 68, 36);\n\n  } while (u8g2.nextPage());\n\n  // No delay needed - the display will show continuously\n}\n\n```\n\nIf everything works fine, you should see at the display, \"Hello World\" inside a rectangle.\n\n\\noindent\n![](./images/jpeg/hello_world.jpg){width=60% fig-align=\"center\"}\n\n### OLED - Text Sizes and Positioning {#sec-setup-oled-text-sizes-positioning-ab8a}\n\n- Note that the text is positioned with `setCursor(x, y)`, in this case centered:\n\n    ```cpp\n    u8g2.setCursor(8, 15);\n    ```\n\n- The font used in the code was medium.\n\n    ```cpp\n    u8g2.setFont(u8g2_font_ncenB08_tr);\n    ```\n\n    But other font sizes are available:\n\n    - `u8g2_font_4x6_tr`: Tiny font (4×6 pixels)\n    - `u8g2_font_6x10_tr`: Small font (6×10 pixels)\n    - `u8g2_font_ncenB08_tr`: Medium bold font\n    - `u8g2_font_ncenB14_tr`: Large bold font\n\n### Shapes {#sec-setup-shapes-2ab7}\n\nThe code added a simple decoration, drawing a frame around the text\n\n```cpp\nu8g2.drawFrame(2, 2, 68, 36);\n```\n\nBut other shapes are available:\n\n- **Rectangle outline**: `drawFrame(x, y, width, height)`\n- **Filled rectangle**: `drawBox(x, y, width, height)`\n- **Circle**: `drawCircle(x, y, radius)`\n- **Line**: `drawLine(x1, y1, x2, y2)`\n- **Individual pixels**: `drawPixel(x, y)`\n\n### Coordinates {#sec-setup-coordinates-c207}\n\nThe display uses a coordinate system where:\n\n- **Origin (0,0)**: Top-left corner\n- **X-axis**: Increases from left to right (0 to 71)\n- **Y-axis**: Increases from top to bottom (0 to 39)\n- **Text positioning**: `setCursor(x, y)` where y is the baseline of text\n\n### Display Rotation {#sec-setup-display-rotation-bdca}\n\n- You can change the rotation parameter by using:\n    - `U8G2_R0`: Normal orientation\n    - `U8G2_R1`: 90° clockwise\n    - `U8G2_R2`: 180° (upside down)\n    - `U8G2_R3`: 270° clockwise\n\n### Custom Characters: {#sec-setup-custom-characters-1b08}\n\n```cpp\n// Draw custom bitmap\nstatic const unsigned char myBitmap[] = {0x00, 0x3c, 0x42, 0x42, 0x3c, 0x00};\nu8g2.drawBitmap(x, y, 1, 6, myBitmap);\n```\n\n### Text Measurements: {#sec-setup-text-measurements-3ada}\n\n```cpp\nint width = u8g2.getStrWidth(\"Hello\");  // Get text width\nint height = u8g2.getAscent();         // Get font height\n```\n\nThe OLED display is now ready to show your sensor data, system status, or any custom graphics you design for your ML projects!\n\n## Summary {#sec-setup-summary-7446}\n\nThe XIAOML Kit with ESP32S3 Sense represents a powerful, yet accessible entry point into the world of TinyML and embedded machine learning. Through this setup process, we have systematically tested every component of the XIAOML Kit, confirming that all sensors and peripherals are functioning correctly. The ESP32S3's dual-core processor and 8MB of PSRAM provide sufficient computational power for real-time ML inference, while the OV2640 camera, digital microphone, LSM6DS3TR-C IMU, and 0.42\" OLED display create a complete multimodal sensing platform. WiFi connectivity opens possibilities for edge-to-cloud ML workflows, and our Arduino IDE development environment is now properly configured with all necessary libraries.\n\nBeyond mere functionality tests, we've gained practical insights into coordinate systems, data formats, and operational characteristics of each sensor—knowledge that will prove invaluable when designing ML data collection and preprocessing pipelines for the upcoming projects.\n\nThis setup process demonstrates key principles that extend far beyond this specific kit. Working with the ESP32S3's memory limitations and processing capabilities provides an authentic experience with the resource constraints inherent in edge AI—the same considerations that apply when deploying models on smartphones, IoT devices, or autonomous systems. Having multiple modalities (vision, audio, motion) on a single platform enables exploration of multimodal ML approaches, which are increasingly important in real-world AI applications.\n\nMost importantly, from raw sensor data to model inference to user feedback via the OLED display, the kit provides a complete ML deployment cycle in miniature, mirroring the challenges faced in production AI systems.\n\nWith this foundation in place, you're now equipped to tackle the core TinyML applications in the following chapters:\n\n- **Vision Projects**: Leveraging the camera for image classification and object detection\n- **Audio Projects**: Processing audio streams for keyword spotting and voice recognition\n- **Motion Projects**: Using IMU data for activity recognition and anomaly detection\n\nEach application will build upon the hardware understanding and software infrastructure we've established, demonstrating how artificial intelligence can be deployed not just in data centers, but in resource-constrained devices that directly interact with the physical world.\n\nThe principles encountered with this kit—real-time processing, sensor fusion, and edge inference—are the same ones driving the future of AI deployment in autonomous vehicles, smart cities, medical devices, and industrial automation. By completing this setup successfully, you're now prepared to explore this exciting frontier of embedded machine learning.\n\n## Resources {#sec-setup-resources-3946}\n\n- [XIAOML Kit Code](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code)\n- [XIAO ESP32S3 Sense manual & example code](https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/)\n- [Usage of Seeed Studio XIAO ESP32S3 microphone](https://wiki.seeedstudio.com/xiao_esp32s3_sense_mic/)\n- [File System and XIAO ESP32S3 Sense](https://wiki.seeedstudio.com/xiao_esp32s3_sense_filesystem/)\n- [Camera Usage in Seeed Studio XIAO ESP32S3 Sense](https://wiki.seeedstudio.com/xiao_esp32s3_camera_usage/)\n\n# Appendix {#sec-appendix}\n\n## Heat Sink Considerations {#sec-setup-heat-sink-considerations-38ea}\n\nIf you need to use the XIAO ESP32S3 Sense for camera applications WITHOUT the Expansion Board, you may install the heat sink.\n\nNote that having the heat sink installed, it is not possible to connect the XIAO ESP32S3 Sense with the Expansion Board.\n\n\\noindent\n![](./images/jpeg/heat-sink.jpg){width=60% fig-align=\"center\"}\n\n## Installing the Heat Sink {#sec-setup-installing-heat-sink-3bde}\n\nTo ensure optimal cooling for your XIAO ESP32S3 Sense, you should install the provided heat sink during camera applications. Its design is specifically tailored to address cooling needs, particularly during intensive operations such as camera usage.\n\n> Two heat sinks are included in the kit, but you can use only one to guarantee access to the Battery pins.\n\n**Installation:**\n\n- Ensure your device is powered off and unplugged from any power source before you start.\n- Prioritize covering the Thermal PAD with the heat sink, as it is directly above the ESP32S3 chip, the primary source of heat. Proper alignment ensures optimal heat dissipation, and **it is essential to keep the BAT pins as unobstructed as possible**.\n\nNow, let’s begin the installation process:\n\n**Step 1. Prepare the Heat Sink:** Start by removing the protective cover from the heat sink to expose the thermal adhesive. This will prepare the heat sink for a secure attachment to the ESP32S3 chip.\n\n**Step 2. Assemble the Heat Sink:**\n\n\\noindent\n![](./images/png/heat-sink-assembly.png){width=85% fig-align=\"center\"}\n\n> After installation, ensure everything is properly secured with no risk of short circuits. Verify that the heat sink is properly aligned and securely attached.\n\nIf one heat synk is not enough, a second one can be installed, sharing both the thermal pad, but in this situation, be aware that all pins became unavailable.\n\n> ⚠️ **Attention**\n>\n> Remove carefully the heat sinks before using the IMU expansion board again\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"number-sections":false,"highlight-style":"github","include-after-body":[{"text":"<script src=\"assets/scripts/subscribe-modal.js\" defer></script>\n"}],"output-file":"setup.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","theme":{"light":["default","../../../../assets/styles/style.scss"],"dark":["default","../../../../assets/styles/style.scss","../../../../assets/styles/dark-mode.scss"]},"respect-user-color-scheme":true,"code-copy":true,"anchor-sections":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}