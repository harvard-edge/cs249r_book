'use strict';function a3_0xe875(){const _0xae7e=['Unable\x20to\x20update\x20object\x20without\x20a\x20key','updateHashIndex','createObjectStore','942360cgdCal','join','POST','4yumbPr','2507hvdTEI','slice','status','target','charToSplit','8526vovCJo','HTTP\x20error!\x20status:\x20','onsuccess','_hashIndex','error','vectorDB_new','push','removeFromBucket','tables','overlap','1628207FFejlr','application/json','open','from','length','Object\x20not\x20found\x20with\x20the\x20provided\x20key','transaction','644555RqwIvB','update','webpackChunkinjectchat','map','sqrt','add','then','insert','readwrite','objectStore','8vPPtGL','vectors','reduce','2004756SHTIqo','452tWLVrl','Unable\x20to\x20delete\x20object\x20without\x20a\x20key','contains','sort','onerror','random','embedding','stringify','delete','get','result','\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array','splice','objectStoreNames','interval','similarity','all','query','2559807CEQCuv','split','hashVector','Bearer\x20','put','catch','has','numTables'];a3_0xe875=function(){return _0xae7e;};return a3_0xe875();}const a3_0x5ed55f=a3_0x4b5f;(function(_0x246214,_0x35e888){const _0x262237=a3_0x4b5f,_0x2b540d=_0x246214();while(!![]){try{const _0xe7911=parseInt(_0x262237(0xc5))/0x1*(-parseInt(_0x262237(0xc4))/0x2)+parseInt(_0x262237(0xca))/0x3*(parseInt(_0x262237(0xa4))/0x4)+parseInt(_0x262237(0x96))/0x5+parseInt(_0x262237(0xa3))/0x6+-parseInt(_0x262237(0x8f))/0x7+parseInt(_0x262237(0xa0))/0x8*(-parseInt(_0x262237(0xb6))/0x9)+-parseInt(_0x262237(0xc1))/0xa;if(_0xe7911===_0x35e888)break;else _0x2b540d['push'](_0x2b540d['shift']());}catch(_0x1d8ffb){_0x2b540d['push'](_0x2b540d['shift']());}}}(a3_0xe875,0x28fe5));function a3_0x4b5f(_0x296c10,_0xf586b0){const _0xe87597=a3_0xe875();return a3_0x4b5f=function(_0x4b5f9b,_0x3cbc58){_0x4b5f9b=_0x4b5f9b-0x89;let _0x2d290b=_0xe87597[_0x4b5f9b];return _0x2d290b;},a3_0x4b5f(_0x296c10,_0xf586b0);}(self[a3_0x5ed55f(0x98)]=self[a3_0x5ed55f(0x98)]||[])[a3_0x5ed55f(0x8b)]([[0x180],{0x180:(_0x433253,_0x2014bc,_0x56e108)=>{const _0x454438=a3_0x5ed55f;_0x56e108['r'](_0x2014bc),_0x56e108['d'](_0x2014bc,{'delete_row':()=>_0x24609c,'initiate':()=>_0x2e334f,'quickStart':()=>_0x3c5064,'quickStart_single':()=>_0x12f8fb,'search':()=>_0x38f12c,'update':()=>_0x58986f});let _0x5ef6fc={'dbName':_0x454438(0x8a),'objectStore':_0x454438(0xa1),'hyperplanes':0xa,'dimensions':0x180,'numPlanes':0x5};class _0x2376e2{constructor(_0x46f4dd,_0x571dd7,_0x41d92b=0x5){const _0x4e7729=_0x454438;this[_0x4e7729(0xbd)]=_0x41d92b,this[_0x4e7729(0x8d)]=Array[_0x4e7729(0x92)]({'length':_0x41d92b},()=>Array[_0x4e7729(0x92)]({'length':_0x571dd7},()=>function(_0xe7a9db){const _0x202d1f=_0x4e7729;return Array[_0x202d1f(0x92)]({'length':_0xe7a9db},()=>Math[_0x202d1f(0xa9)]()-0.5);}(_0x46f4dd)));}[_0x454438(0xb8)](_0x103e66){const _0x49a3f5=_0x454438;return this[_0x49a3f5(0x8d)][_0x49a3f5(0x99)](_0x366eae=>_0x366eae[_0x49a3f5(0x99)](_0x5f5d87=>_0x103e66[_0x49a3f5(0xa2)]((_0x19d24b,_0x56d9dc,_0x4ce308)=>_0x19d24b+_0x56d9dc*_0x5f5d87[_0x4ce308],0x0)>=0x0?'1':'0')[_0x49a3f5(0xc2)](''));}}function _0x46056c(_0x21c63b,_0x55853b){const _0xdd033=_0x454438;return 0x1===_0x21c63b['length']&&(_0x21c63b=_0x21c63b[0x0]),_0x21c63b[_0xdd033(0xa2)]((_0x3e0891,_0x205700,_0x2263d6)=>_0x3e0891+_0x205700*_0x55853b[_0x2263d6],0x0)/(Math[_0xdd033(0x9a)](_0x21c63b[_0xdd033(0xa2)]((_0x534f4c,_0x11a01c)=>_0x534f4c+_0x11a01c*_0x11a01c,0x0))*Math[_0xdd033(0x9a)](_0x55853b[_0xdd033(0xa2)]((_0x2e5a91,_0x1f926c)=>_0x2e5a91+_0x1f926c*_0x1f926c,0x0)));}class _0x3eaf1b{#t;#e;#r;#o;constructor(_0x331c9f={}){const {dbName:_0x34db9c,objectStore:_0x101e66,vectorPath:_0x540e7a,dimensions:_0x1d1d4e,numPlanes:_0x2bbbd9}={..._0x5ef6fc,..._0x331c9f};this.#t=_0x101e66,this.#e=_0x540e7a,this.#o=new _0x2376e2(_0x1d1d4e,_0x2bbbd9),this.#r=function(_0x2b0611){const {dbName:_0x1da2c7,objectStore:_0x484e25,vectorPath:_0xc577e6}={..._0x5ef6fc,..._0x2b0611};return new Promise((_0x1cf8c7,_0x4a6830)=>{const _0x32c85b=a3_0x4b5f,_0x422ed0=indexedDB[_0x32c85b(0x91)](_0x1da2c7,0x2);_0x422ed0['onupgradeneeded']=_0x2f6fdb=>{const _0x4efb38=_0x32c85b,_0x255f50=_0x2f6fdb[_0x4efb38(0xc8)]['result'];_0x255f50[_0x4efb38(0xb1)][_0x4efb38(0xa6)](_0x484e25)||_0x255f50[_0x4efb38(0xc0)](_0x484e25,{'autoIncrement':!0x0});const _0x5c8b87=_0x484e25+_0x4efb38(0xcd);_0x255f50[_0x4efb38(0xb1)][_0x4efb38(0xa6)](_0x5c8b87)||_0x255f50['createObjectStore'](_0x5c8b87,{'autoIncrement':!0x0});},_0x422ed0[_0x32c85b(0xcc)]=_0x536fe6=>{const _0x1dd115=_0x32c85b;_0x1cf8c7(_0x536fe6[_0x1dd115(0xc8)][_0x1dd115(0xae)]);},_0x422ed0['onerror']=_0x398bf5=>{const _0x4b48ab=_0x32c85b;_0x4a6830(_0x398bf5[_0x4b48ab(0xc8)][_0x4b48ab(0x89)]);};});}({'dbName':_0x34db9c,'objectStore':_0x101e66,'vectorPath':_0x540e7a});}async[_0x454438(0x9d)](_0x3aab4b){const _0x281944=_0x454438,_0x39c1ee=_0x3aab4b[this.#e];if(!(Array['isArray'](_0x39c1ee)||_0x39c1ee instanceof Int8Array))throw new Error(this.#e+_0x281944(0xaf));const _0x197cec=(await this.#r)['transaction']([this.#t,this.#t+_0x281944(0xcd)],_0x281944(0x9e)),_0x371755=_0x197cec['objectStore'](this.#t),_0xd23f56=_0x197cec[_0x281944(0x9f)](this.#t+_0x281944(0xcd));try{const _0x481807=_0x371755[_0x281944(0x9b)](_0x3aab4b),_0x8792b1=await new Promise((_0x12e733,_0x4d933e)=>{const _0x54f30e=_0x281944;_0x481807[_0x54f30e(0xcc)]=()=>_0x12e733(_0x481807[_0x54f30e(0xae)]),_0x481807[_0x54f30e(0xa8)]=()=>_0x4d933e(_0x481807[_0x54f30e(0x89)]);}),_0x51a339=this.#o[_0x281944(0xb8)](_0x39c1ee);for(let _0x2c05c1 of _0x51a339){const _0x45e622=await new Promise((_0x573555,_0x37b37f)=>{const _0x417a3c=_0x281944,_0x177b75=_0xd23f56[_0x417a3c(0xad)](_0x2c05c1);_0x177b75['onsuccess']=()=>_0x573555(_0x177b75[_0x417a3c(0xae)]||[]),_0x177b75[_0x417a3c(0xa8)]=()=>_0x37b37f(_0x177b75[_0x417a3c(0x89)]);});_0x45e622[_0x281944(0x8b)](_0x8792b1),await new Promise((_0x3a7150,_0x11a0d5)=>{const _0x514c84=_0x281944,_0x5e47a4=_0xd23f56['put'](_0x45e622,_0x2c05c1);_0x5e47a4[_0x514c84(0xcc)]=()=>_0x3a7150(),_0x5e47a4[_0x514c84(0xa8)]=()=>_0x11a0d5(_0x5e47a4['error']);});}return _0x8792b1;}catch(_0xbbe776){throw _0xbbe776;}}async[_0x454438(0xac)](_0x4aef21){const _0x4c4da9=_0x454438;if(null==_0x4aef21)throw new Error(_0x4c4da9(0xa5));const _0x2ec478=(await this.#r)[_0x4c4da9(0x95)]([this.#t,this.#t+_0x4c4da9(0xcd)],_0x4c4da9(0x9e)),_0x5d552c=_0x2ec478['objectStore'](this.#t),_0x3c951e=_0x2ec478[_0x4c4da9(0x9f)](this.#t+_0x4c4da9(0xcd)),_0xb1379f=await new Promise((_0x11fe44,_0xaf430e)=>{const _0x299adf=_0x4c4da9,_0x296d33=_0x5d552c[_0x299adf(0xad)](_0x4aef21);_0x296d33[_0x299adf(0xcc)]=()=>_0x11fe44(_0x296d33[_0x299adf(0xae)]),_0x296d33[_0x299adf(0xa8)]=()=>_0xaf430e(_0x296d33[_0x299adf(0x89)]);});if(!_0xb1379f)throw new Error('Object\x20not\x20found\x20with\x20the\x20provided\x20key');const _0x3fee89=_0xb1379f[this.#e],_0x32d9c1=this.#o[_0x4c4da9(0xb8)](_0x3fee89);return await Promise[_0x4c4da9(0xb4)](_0x32d9c1['map'](_0xbbc71a=>this[_0x4c4da9(0x8c)](_0x3c951e,_0x4aef21,_0xbbc71a))),new Promise((_0x32bd0d,_0xc6b8cd)=>{const _0x3e79b5=_0x4c4da9,_0x4c0f67=_0x5d552c[_0x3e79b5(0xac)](_0x4aef21);_0x4c0f67[_0x3e79b5(0xcc)]=()=>_0x32bd0d(),_0x4c0f67[_0x3e79b5(0xa8)]=()=>_0xc6b8cd(_0x4c0f67[_0x3e79b5(0x89)]);});}async[_0x454438(0x8c)](_0x53a92c,_0x5a6423,_0x25829e){const _0x58955b=_0x454438,_0x26b5d2=await new Promise((_0x30ca9c,_0x55aa1e)=>{const _0x51e279=a3_0x4b5f,_0x4162d0=_0x53a92c[_0x51e279(0xad)](_0x25829e);_0x4162d0[_0x51e279(0xcc)]=()=>_0x30ca9c(_0x4162d0[_0x51e279(0xae)]||[]),_0x4162d0[_0x51e279(0xa8)]=()=>_0x55aa1e(_0x4162d0[_0x51e279(0x89)]);}),_0x17e331=_0x26b5d2['indexOf'](_0x5a6423);-0x1!==_0x17e331&&(_0x26b5d2[_0x58955b(0xb0)](_0x17e331,0x1),await new Promise((_0x1da3c4,_0x17a785)=>{const _0x545086=_0x58955b,_0x5f3d4c=_0x53a92c[_0x545086(0xba)](_0x26b5d2,_0x25829e);_0x5f3d4c['onsuccess']=()=>_0x1da3c4(),_0x5f3d4c['onerror']=()=>_0x17a785(_0x5f3d4c['error']);}));}async[_0x454438(0x97)](_0x293cf9,_0x3b085f){const _0x3abab1=_0x454438;if(null==_0x293cf9)throw new Error(_0x3abab1(0xbe));if(!(this.#e in _0x3b085f))throw new Error(this.#e+'\x20expected\x20to\x20be\x20present\x20in\x20the\x20object\x20being\x20updated');if(!(Array['isArray'](_0x3b085f[this.#e])||_0x3b085f[this.#e]instanceof Int8Array))throw new Error(this.#e+'\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array');const _0x1948a7=(await this.#r)[_0x3abab1(0x95)]([this.#t,this.#t+_0x3abab1(0xcd)],'readwrite'),_0x2af31c=_0x1948a7[_0x3abab1(0x9f)](this.#t),_0x5e035b=_0x1948a7[_0x3abab1(0x9f)](this.#t+_0x3abab1(0xcd)),_0x5842cb=_0x2af31c[_0x3abab1(0xad)](_0x293cf9);return new Promise((_0x40fcdb,_0x32c309)=>{const _0x1e6895=_0x3abab1;_0x5842cb[_0x1e6895(0xcc)]=async()=>{const _0x135399=_0x1e6895,_0x33f6ce=_0x5842cb[_0x135399(0xae)];if(!_0x33f6ce)return void _0x32c309(new Error(_0x135399(0x94)));const _0x4ac357=this.#o[_0x135399(0xb8)](_0x33f6ce[this.#e]),_0x36e619=this.#o[_0x135399(0xb8)](_0x3b085f[this.#e]),_0x1391d7=_0x2af31c['put'](_0x3b085f,_0x293cf9);_0x1391d7[_0x135399(0xcc)]=async()=>{const _0x33a13f=_0x135399;try{for(let _0x3c7508=0x0;_0x3c7508<this.#o[_0x33a13f(0xbd)];_0x3c7508++)_0x4ac357[_0x3c7508]!==_0x36e619[_0x3c7508]&&await this[_0x33a13f(0xbf)](_0x5e035b,_0x293cf9,_0x4ac357[_0x3c7508],_0x36e619[_0x3c7508]);_0x40fcdb(_0x1391d7['result']);}catch(_0x329892){_0x32c309(_0x329892);}},_0x1391d7[_0x135399(0xa8)]=()=>_0x32c309(_0x1391d7['error']);},_0x5842cb[_0x1e6895(0xa8)]=()=>_0x32c309(_0x5842cb[_0x1e6895(0x89)]);});}async[_0x454438(0xbf)](_0x2dbfec,_0x54e867,_0x18813e,_0x1f55c7){const _0x24ad7d=_0x454438,_0x2bddbe=_0x2dbfec[_0x24ad7d(0xad)](_0x18813e),_0x2d175f=await new Promise((_0x462981,_0x180cf9)=>{const _0x267fac=_0x24ad7d;_0x2bddbe['onsuccess']=()=>_0x462981(_0x2bddbe[_0x267fac(0xae)]||[]),_0x2bddbe['onerror']=()=>_0x180cf9(_0x2bddbe[_0x267fac(0x89)]);}),_0xfabed7=_0x2d175f['indexOf'](_0x54e867);-0x1!==_0xfabed7&&(_0x2d175f[_0x24ad7d(0xb0)](_0xfabed7,0x1),await _0x2dbfec[_0x24ad7d(0xba)](_0x2d175f,_0x18813e));const _0x435b47=_0x2dbfec[_0x24ad7d(0xad)](_0x1f55c7),_0x19284e=await new Promise((_0x5a1b84,_0x4ccd94)=>{const _0x37d5d0=_0x24ad7d;_0x435b47['onsuccess']=()=>_0x5a1b84(_0x435b47[_0x37d5d0(0xae)]||[]),_0x435b47[_0x37d5d0(0xa8)]=()=>_0x4ccd94(_0x435b47[_0x37d5d0(0x89)]);});_0x19284e[_0x24ad7d(0x8b)](_0x54e867),await _0x2dbfec[_0x24ad7d(0xba)](_0x19284e,_0x1f55c7);}async['query'](_0x114aae,_0x2aaa8a={'limit':0xa}){const _0x4b1e17=_0x454438,{limit:_0x31673a}=_0x2aaa8a;let _0x51b829=new Set(),_0x104256=[];try{const _0x4e8009=(await this.#r)[_0x4b1e17(0x95)]([this.#t,this.#t+_0x4b1e17(0xcd)],'readonly'),_0x426361=_0x4e8009['objectStore'](this.#t),_0x4731df=_0x4e8009['objectStore'](this.#t+_0x4b1e17(0xcd)),_0x76ee7d=this.#o[_0x4b1e17(0xb8)](_0x114aae);for(let _0x2dc968 of _0x76ee7d){const _0x2d2f39=await new Promise((_0x4494ac,_0x59d295)=>{const _0x1b421e=_0x4b1e17,_0x5011f8=_0x4731df[_0x1b421e(0xad)](_0x2dc968);_0x5011f8[_0x1b421e(0xcc)]=()=>_0x4494ac(_0x5011f8[_0x1b421e(0xae)]||[]),_0x5011f8[_0x1b421e(0xa8)]=()=>_0x59d295(_0x5011f8['error']);});for(let _0x51648a of _0x2d2f39)if(!_0x51b829[_0x4b1e17(0xbc)](_0x51648a)){_0x51b829[_0x4b1e17(0x9b)](_0x51648a);const _0x1a366f=await new Promise((_0x2c6e12,_0x3966ff)=>{const _0x3340c5=_0x4b1e17,_0x487841=_0x426361[_0x3340c5(0xad)](_0x51648a);_0x487841[_0x3340c5(0xcc)]=()=>_0x2c6e12(_0x487841[_0x3340c5(0xae)]),_0x487841[_0x3340c5(0xa8)]=()=>_0x3966ff(_0x487841[_0x3340c5(0x89)]);}),_0x313d98=_0x46056c(_0x114aae,_0x1a366f[this.#e]);_0x104256[_0x4b1e17(0x8b)]({'object':_0x1a366f,'key':_0x51648a,'similarity':_0x313d98});}}return _0x104256[_0x4b1e17(0xa7)]((_0x33034f,_0x2f72d0)=>_0x2f72d0[_0x4b1e17(0xb3)]-_0x33034f[_0x4b1e17(0xb3)]),_0x104256[_0x4b1e17(0xc6)](0x0,_0x31673a);}catch(_0x32dcbf){throw _0x32dcbf;}}get[_0x454438(0x9f)](){return this.#t;}}const _0x2b6bf8='https://tinymlbackend3.azurewebsites.net/api/embeddings-binary';function _0x92bcf4(_0x2799ac,_0x66f409){const _0x467fd7=_0x454438;return fetch(_0x2b6bf8,{'method':_0x467fd7(0xc3),'headers':{'Authorization':_0x467fd7(0xb9)+_0x66f409,'Content-Type':_0x467fd7(0x90)},'body':JSON[_0x467fd7(0xab)]({'text':_0x2799ac})})[_0x467fd7(0x9c)](_0x21cf14=>{const _0x51370c=_0x467fd7;if(!_0x21cf14['ok'])throw new Error(_0x51370c(0xcb)+_0x21cf14[_0x51370c(0xc7)]);return _0x21cf14['json']();})[_0x467fd7(0xbb)](_0x5d2da4=>{});}const _0x14afa1=new class{constructor(_0x4539c0,_0x8136d9,_0xe138a4='\x0a\x0a'){const _0x493aab=_0x454438;this[_0x493aab(0xb2)]=_0x4539c0,this[_0x493aab(0x8e)]=_0x8136d9,this['charToSplit']=_0xe138a4;}[_0x454438(0xb7)](_0x1dce78){const _0x2eb4e1=_0x454438,_0x203273=[],_0x55e659=_0x1dce78['split'](this[_0x2eb4e1(0xc9)]);let _0x168f9a=[],_0x2f4547=0x0;return _0x55e659['forEach'](_0x44a1e0=>{(_0x44a1e0['match'](/\w+|[^\w\s]+/g)||[])['forEach'](_0x393e9b=>{const _0x3af4b5=a3_0x4b5f;_0x2f4547+_0x393e9b[_0x3af4b5(0x93)]+0x1>this[_0x3af4b5(0xb2)]&&(_0x203273[_0x3af4b5(0x8b)](_0x168f9a[_0x3af4b5(0xc2)]('\x20')),_0x168f9a=_0x168f9a[_0x3af4b5(0xc6)](-this[_0x3af4b5(0x8e)]),_0x2f4547=_0x168f9a[_0x3af4b5(0xc2)]('\x20')[_0x3af4b5(0x93)]+0x1),_0x168f9a['push'](_0x393e9b),_0x2f4547+=_0x393e9b['length']+0x1;});}),_0x168f9a[_0x2eb4e1(0x93)]>0x0&&_0x203273['push'](_0x168f9a['join']('\x20')),_0x203273;}}(0xc8,0x14,'\x0a\x0a');let _0x46ea84;const _0x42ad0f=[];async function _0x2e334f(_0x404e15){const _0x2ed059=_0x454438;var _0x1538ad;return _0x1538ad={'dbName':_0x404e15},_0x5ef6fc={..._0x5ef6fc,..._0x1538ad},_0x46ea84=new _0x3eaf1b({'vectorPath':_0x2ed059(0xaa)}),_0x5ef6fc;}async function _0x3c5064(_0x21c4d9,_0x5df2e2,_0xc12285=!0x0){const _0x39cee3=_0x454438,{text:_0x3db59d,..._0x23b788}=_0x21c4d9,_0x192e65=_0x14afa1[_0x39cee3(0xb7)](_0x3db59d);let _0x59e942;_0x59e942=await _0x92bcf4(_0x192e65,_0x5df2e2);for(let _0x500de4=0x0;_0x500de4<_0x192e65[_0x39cee3(0x93)];_0x500de4++){const {text:_0x6627ac,..._0x311005}=_0x21c4d9;_0x311005['text']=_0x192e65[_0x500de4];const _0x2c3504=await _0x46ea84[_0x39cee3(0x9d)]({'embedding':_0x59e942[_0x500de4],..._0x311005});_0x42ad0f[_0x39cee3(0x8b)]({'key':_0x2c3504,..._0x311005});}return _0x42ad0f;}async function _0x38f12c(_0x344561,_0x32651c={'limit':0x5},_0x8ad81,_0x3ba9eb=!0x0){const _0x4fcff0=_0x454438;let _0x1171c7;return _0x1171c7=await _0x92bcf4(_0x344561,_0x8ad81),await _0x46ea84[_0x4fcff0(0xb5)](_0x1171c7,_0x32651c);}async function _0x12f8fb(_0x2be153,_0x2646b4,_0x15a3bc=!0x0){const _0xffca52=_0x454438,{text:_0x297d28,..._0x34d36c}=_0x2be153,_0xed7a16=_0x92bcf4([_0x297d28],_0x2646b4),_0x21667b=await _0x46ea84[_0xffca52(0x9d)]({'embedding':_0xed7a16,'text':_0x297d28,..._0x34d36c});return _0x42ad0f['push']({'key':_0x21667b,..._0x34d36c}),_0x42ad0f;}async function _0x24609c(_0x55003f){return await _0x46ea84['delete'](_0x55003f);}async function _0x58986f(_0x14831e,_0x2de74d,_0x47f8de){const _0x31de9b=_0x454438,_0x16210d=_0x2de74d['text'];if(!_0x2de74d[_0x31de9b(0xaa)]){const _0x1120a0=await _0x92bcf4([_0x16210d],_0x47f8de);_0x2de74d[_0x31de9b(0xaa)]=_0x1120a0;}return await _0x46ea84[_0x31de9b(0x97)](_0x14831e,{'embedding':text_embeddings,'metaData':_0x2de74d});}}}]);