'use strict';const a3_0xae66a4=a3_0x47f5;(function(_0x4afce9,_0x1d8a22){const _0x29a4fc=a3_0x47f5,_0x1d5fc6=_0x4afce9();while(!![]){try{const _0x44cdf1=-parseInt(_0x29a4fc(0x115))/0x1+parseInt(_0x29a4fc(0x119))/0x2*(parseInt(_0x29a4fc(0x10f))/0x3)+-parseInt(_0x29a4fc(0xf8))/0x4+parseInt(_0x29a4fc(0x10e))/0x5*(parseInt(_0x29a4fc(0xfc))/0x6)+parseInt(_0x29a4fc(0xee))/0x7+-parseInt(_0x29a4fc(0x100))/0x8*(-parseInt(_0x29a4fc(0xec))/0x9)+parseInt(_0x29a4fc(0x102))/0xa;if(_0x44cdf1===_0x1d8a22)break;else _0x1d5fc6['push'](_0x1d5fc6['shift']());}catch(_0x537512){_0x1d5fc6['push'](_0x1d5fc6['shift']());}}}(a3_0x1964,0xf024c));function a3_0x47f5(_0x1f895a,_0x42e85f){const _0x196411=a3_0x1964();return a3_0x47f5=function(_0x47f51c,_0x2bb8f3){_0x47f51c=_0x47f51c-0xe6;let _0x3e589f=_0x196411[_0x47f51c];return _0x3e589f;},a3_0x47f5(_0x1f895a,_0x42e85f);}function a3_0x1964(){const _0x34897d=['add','onsuccess','Unable\x20to\x20delete\x20object\x20without\x20a\x20key','Unable\x20to\x20update\x20object\x20without\x20a\x20key','sqrt','createObjectStore','target','insert','get','updateHashIndex','vectors','36081BDPnAv','all','6020938ocZrHH','open','length','slice','status','charToSplit','reduce','embedding','onupgradeneeded','indexOf','6210108JAAQal','join','split','random','169206MMiWLJ','isArray','objectStoreNames','https://tinymlbackend3.azurewebsites.net/api/embeddings-binary','1864GQOEgd','has','3382610iTBoxP','hashVector','delete','json','error','put','splice','text','forEach','\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array','numTables','_hashIndex','95VoeGzG','177izeppm','update','objectStore','POST','from','similarity','1927349wJmfhx','removeFromBucket','Object\x20not\x20found\x20with\x20the\x20provided\x20key','contains','60854YoVTkS','onerror','result','application/json','stringify','\x20expected\x20to\x20be\x20present\x20in\x20the\x20object\x20being\x20updated','transaction','push','HTTP\x20error!\x20status:\x20','query','tables','overlap','map','readwrite'];a3_0x1964=function(){return _0x34897d;};return a3_0x1964();}(self['webpackChunkinjectchat']=self['webpackChunkinjectchat']||[])[a3_0xae66a4(0x120)]([[0x180],{0x20c0:(_0x4b0f0d,_0x23eec9,_0x46db2b)=>{const _0xef1739=a3_0xae66a4;_0x46db2b['r'](_0x23eec9),_0x46db2b['d'](_0x23eec9,{'delete_row':()=>_0x595b65,'initiate':()=>_0x3246c5,'quickStart':()=>_0x55a41c,'quickStart_single':()=>_0x2fefc4,'search':()=>_0x43ed41,'update':()=>_0x1b2935});let _0x19a2fe={'dbName':'vectorDB_new','objectStore':_0xef1739(0xeb),'hyperplanes':0xa,'dimensions':0x180,'numPlanes':0x5};class _0x1341fd{constructor(_0x439754,_0x249991,_0x422e23=0x5){const _0x16d62c=_0xef1739;this['numTables']=_0x422e23,this[_0x16d62c(0x123)]=Array[_0x16d62c(0x113)]({'length':_0x422e23},()=>Array[_0x16d62c(0x113)]({'length':_0x249991},()=>function(_0x33eea7){const _0x5c20f9=_0x16d62c;return Array['from']({'length':_0x33eea7},()=>Math[_0x5c20f9(0xfb)]()-0.5);}(_0x439754)));}[_0xef1739(0x103)](_0xd1adf4){const _0x5eaa47=_0xef1739;return this[_0x5eaa47(0x123)]['map'](_0x1b292a=>_0x1b292a[_0x5eaa47(0x125)](_0x36c031=>_0xd1adf4[_0x5eaa47(0xf4)]((_0xaf065d,_0x3ef420,_0x503dbb)=>_0xaf065d+_0x3ef420*_0x36c031[_0x503dbb],0x0)>=0x0?'1':'0')[_0x5eaa47(0xf9)](''));}}function _0x391ec0(_0x5ebe67,_0x167e51){const _0x24e883=_0xef1739;return 0x1===_0x5ebe67['length']&&(_0x5ebe67=_0x5ebe67[0x0]),_0x5ebe67['reduce']((_0x4a2054,_0x40ae5f,_0x782555)=>_0x4a2054+_0x40ae5f*_0x167e51[_0x782555],0x0)/(Math[_0x24e883(0x12b)](_0x5ebe67[_0x24e883(0xf4)]((_0x366c89,_0x46a9d6)=>_0x366c89+_0x46a9d6*_0x46a9d6,0x0))*Math['sqrt'](_0x167e51['reduce']((_0x5cc586,_0xdf0ac6)=>_0x5cc586+_0xdf0ac6*_0xdf0ac6,0x0)));}class _0x4c571f{#t;#e;#r;#o;constructor(_0x331570={}){const {dbName:_0x113b90,objectStore:_0x8b5754,vectorPath:_0xecf23f,dimensions:_0x339e9f,numPlanes:_0x3f50fd}={..._0x19a2fe,..._0x331570};this.#t=_0x8b5754,this.#e=_0xecf23f,this.#o=new _0x1341fd(_0x339e9f,_0x3f50fd),this.#r=function(_0x571830){const {dbName:_0x20f67b,objectStore:_0x231bb5,vectorPath:_0x320342}={..._0x19a2fe,..._0x571830};return new Promise((_0x41e7fa,_0x398122)=>{const _0x50bd76=a3_0x47f5,_0x427aea=indexedDB[_0x50bd76(0xef)](_0x20f67b,0x2);_0x427aea[_0x50bd76(0xf6)]=_0x5928cb=>{const _0x875fdd=_0x50bd76,_0x5053a4=_0x5928cb['target'][_0x875fdd(0x11b)];_0x5053a4[_0x875fdd(0xfe)][_0x875fdd(0x118)](_0x231bb5)||_0x5053a4[_0x875fdd(0xe6)](_0x231bb5,{'autoIncrement':!0x0});const _0x3950cc=_0x231bb5+_0x875fdd(0x10d);_0x5053a4[_0x875fdd(0xfe)][_0x875fdd(0x118)](_0x3950cc)||_0x5053a4['createObjectStore'](_0x3950cc,{'autoIncrement':!0x0});},_0x427aea['onsuccess']=_0x5c4ccf=>{const _0x1a039c=_0x50bd76;_0x41e7fa(_0x5c4ccf[_0x1a039c(0xe7)][_0x1a039c(0x11b)]);},_0x427aea['onerror']=_0xdbbee2=>{const _0x88d588=_0x50bd76;_0x398122(_0xdbbee2[_0x88d588(0xe7)][_0x88d588(0x106)]);};});}({'dbName':_0x113b90,'objectStore':_0x8b5754,'vectorPath':_0xecf23f});}async[_0xef1739(0xe8)](_0x27fe64){const _0x37a4c3=_0xef1739,_0x21a4df=_0x27fe64[this.#e];if(!(Array[_0x37a4c3(0xfd)](_0x21a4df)||_0x21a4df instanceof Int8Array))throw new Error(this.#e+_0x37a4c3(0x10b));const _0x2b7849=(await this.#r)[_0x37a4c3(0x11f)]([this.#t,this.#t+_0x37a4c3(0x10d)],_0x37a4c3(0x126)),_0x2620f9=_0x2b7849['objectStore'](this.#t),_0x58d287=_0x2b7849[_0x37a4c3(0x111)](this.#t+_0x37a4c3(0x10d));try{const _0xb104ed=_0x2620f9[_0x37a4c3(0x127)](_0x27fe64),_0x527c5f=await new Promise((_0x38f0df,_0x4bc22b)=>{const _0x1e2ad8=_0x37a4c3;_0xb104ed[_0x1e2ad8(0x128)]=()=>_0x38f0df(_0xb104ed[_0x1e2ad8(0x11b)]),_0xb104ed['onerror']=()=>_0x4bc22b(_0xb104ed[_0x1e2ad8(0x106)]);}),_0x189560=this.#o[_0x37a4c3(0x103)](_0x21a4df);for(let _0x4109ad of _0x189560){const _0x41154f=await new Promise((_0x6d45f9,_0x5b63ce)=>{const _0x125e5a=_0x37a4c3,_0x4c47bb=_0x58d287[_0x125e5a(0xe9)](_0x4109ad);_0x4c47bb[_0x125e5a(0x128)]=()=>_0x6d45f9(_0x4c47bb[_0x125e5a(0x11b)]||[]),_0x4c47bb[_0x125e5a(0x11a)]=()=>_0x5b63ce(_0x4c47bb['error']);});_0x41154f[_0x37a4c3(0x120)](_0x527c5f),await new Promise((_0x46f8d3,_0x39e30a)=>{const _0x46631f=_0x37a4c3,_0x49038d=_0x58d287['put'](_0x41154f,_0x4109ad);_0x49038d['onsuccess']=()=>_0x46f8d3(),_0x49038d[_0x46631f(0x11a)]=()=>_0x39e30a(_0x49038d[_0x46631f(0x106)]);});}return _0x527c5f;}catch(_0x422ec2){throw _0x422ec2;}}async[_0xef1739(0x104)](_0x5a0efe){const _0x1a510e=_0xef1739;if(null==_0x5a0efe)throw new Error(_0x1a510e(0x129));const _0x1a2aab=(await this.#r)['transaction']([this.#t,this.#t+_0x1a510e(0x10d)],'readwrite'),_0x24a871=_0x1a2aab[_0x1a510e(0x111)](this.#t),_0x42cfc5=_0x1a2aab['objectStore'](this.#t+_0x1a510e(0x10d)),_0x4ff7ea=await new Promise((_0x2833eb,_0x5238f3)=>{const _0x52dafe=_0x1a510e,_0xacebc5=_0x24a871[_0x52dafe(0xe9)](_0x5a0efe);_0xacebc5[_0x52dafe(0x128)]=()=>_0x2833eb(_0xacebc5[_0x52dafe(0x11b)]),_0xacebc5[_0x52dafe(0x11a)]=()=>_0x5238f3(_0xacebc5['error']);});if(!_0x4ff7ea)throw new Error(_0x1a510e(0x117));const _0x4f06dd=_0x4ff7ea[this.#e],_0xfc4436=this.#o[_0x1a510e(0x103)](_0x4f06dd);return await Promise[_0x1a510e(0xed)](_0xfc4436[_0x1a510e(0x125)](_0x197d43=>this[_0x1a510e(0x116)](_0x42cfc5,_0x5a0efe,_0x197d43))),new Promise((_0x53708e,_0x3a5de3)=>{const _0x3e8974=_0x1a510e,_0x511fda=_0x24a871[_0x3e8974(0x104)](_0x5a0efe);_0x511fda['onsuccess']=()=>_0x53708e(),_0x511fda[_0x3e8974(0x11a)]=()=>_0x3a5de3(_0x511fda[_0x3e8974(0x106)]);});}async['removeFromBucket'](_0x587152,_0x580e30,_0x28f30b){const _0x302369=_0xef1739,_0x10c852=await new Promise((_0x567892,_0x5b94dd)=>{const _0x51fbd0=a3_0x47f5,_0x4859e7=_0x587152[_0x51fbd0(0xe9)](_0x28f30b);_0x4859e7[_0x51fbd0(0x128)]=()=>_0x567892(_0x4859e7[_0x51fbd0(0x11b)]||[]),_0x4859e7[_0x51fbd0(0x11a)]=()=>_0x5b94dd(_0x4859e7[_0x51fbd0(0x106)]);}),_0x1128b4=_0x10c852[_0x302369(0xf7)](_0x580e30);-0x1!==_0x1128b4&&(_0x10c852[_0x302369(0x108)](_0x1128b4,0x1),await new Promise((_0x53b625,_0x3ba36f)=>{const _0x18cd11=_0x302369,_0x2df7f0=_0x587152[_0x18cd11(0x107)](_0x10c852,_0x28f30b);_0x2df7f0[_0x18cd11(0x128)]=()=>_0x53b625(),_0x2df7f0['onerror']=()=>_0x3ba36f(_0x2df7f0[_0x18cd11(0x106)]);}));}async[_0xef1739(0x110)](_0xd36e67,_0x145b91){const _0x47c7c0=_0xef1739;if(null==_0xd36e67)throw new Error(_0x47c7c0(0x12a));if(!(this.#e in _0x145b91))throw new Error(this.#e+_0x47c7c0(0x11e));if(!(Array[_0x47c7c0(0xfd)](_0x145b91[this.#e])||_0x145b91[this.#e]instanceof Int8Array))throw new Error(this.#e+_0x47c7c0(0x10b));const _0x2bd048=(await this.#r)['transaction']([this.#t,this.#t+'_hashIndex'],'readwrite'),_0x2468b3=_0x2bd048['objectStore'](this.#t),_0x2152ed=_0x2bd048[_0x47c7c0(0x111)](this.#t+_0x47c7c0(0x10d)),_0xbc4300=_0x2468b3[_0x47c7c0(0xe9)](_0xd36e67);return new Promise((_0x29ca7c,_0x1a0d29)=>{const _0x5922ce=_0x47c7c0;_0xbc4300['onsuccess']=async()=>{const _0x17ee18=a3_0x47f5,_0x56402d=_0xbc4300[_0x17ee18(0x11b)];if(!_0x56402d)return void _0x1a0d29(new Error('Object\x20not\x20found\x20with\x20the\x20provided\x20key'));const _0x32ca74=this.#o[_0x17ee18(0x103)](_0x56402d[this.#e]),_0x492e3b=this.#o[_0x17ee18(0x103)](_0x145b91[this.#e]),_0x367eec=_0x2468b3[_0x17ee18(0x107)](_0x145b91,_0xd36e67);_0x367eec[_0x17ee18(0x128)]=async()=>{const _0x398955=_0x17ee18;try{for(let _0x4a2dc1=0x0;_0x4a2dc1<this.#o[_0x398955(0x10c)];_0x4a2dc1++)_0x32ca74[_0x4a2dc1]!==_0x492e3b[_0x4a2dc1]&&await this[_0x398955(0xea)](_0x2152ed,_0xd36e67,_0x32ca74[_0x4a2dc1],_0x492e3b[_0x4a2dc1]);_0x29ca7c(_0x367eec[_0x398955(0x11b)]);}catch(_0x9990ed){_0x1a0d29(_0x9990ed);}},_0x367eec[_0x17ee18(0x11a)]=()=>_0x1a0d29(_0x367eec[_0x17ee18(0x106)]);},_0xbc4300[_0x5922ce(0x11a)]=()=>_0x1a0d29(_0xbc4300['error']);});}async[_0xef1739(0xea)](_0x29e867,_0x296d49,_0x4ec24f,_0x92323e){const _0x58c208=_0xef1739,_0x5fd9b=_0x29e867[_0x58c208(0xe9)](_0x4ec24f),_0x19e10f=await new Promise((_0x39d6f1,_0x5e2f88)=>{const _0x13c525=_0x58c208;_0x5fd9b[_0x13c525(0x128)]=()=>_0x39d6f1(_0x5fd9b['result']||[]),_0x5fd9b['onerror']=()=>_0x5e2f88(_0x5fd9b[_0x13c525(0x106)]);}),_0x59b67e=_0x19e10f[_0x58c208(0xf7)](_0x296d49);-0x1!==_0x59b67e&&(_0x19e10f[_0x58c208(0x108)](_0x59b67e,0x1),await _0x29e867['put'](_0x19e10f,_0x4ec24f));const _0x3cd257=_0x29e867[_0x58c208(0xe9)](_0x92323e),_0x464472=await new Promise((_0x3d512a,_0x544bfc)=>{const _0x1e999d=_0x58c208;_0x3cd257[_0x1e999d(0x128)]=()=>_0x3d512a(_0x3cd257[_0x1e999d(0x11b)]||[]),_0x3cd257[_0x1e999d(0x11a)]=()=>_0x544bfc(_0x3cd257[_0x1e999d(0x106)]);});_0x464472['push'](_0x296d49),await _0x29e867[_0x58c208(0x107)](_0x464472,_0x92323e);}async[_0xef1739(0x122)](_0x159a2e,_0x54b03c={'limit':0xa}){const _0x32764c=_0xef1739,{limit:_0x262ab3}=_0x54b03c;let _0x382279=new Set(),_0x1932f4=[];try{const _0x366bcf=(await this.#r)['transaction']([this.#t,this.#t+_0x32764c(0x10d)],'readonly'),_0x2bd9d2=_0x366bcf['objectStore'](this.#t),_0x549c2a=_0x366bcf[_0x32764c(0x111)](this.#t+_0x32764c(0x10d)),_0x45a2bc=this.#o[_0x32764c(0x103)](_0x159a2e);for(let _0x1beead of _0x45a2bc){const _0x59fa08=await new Promise((_0x38490a,_0x7d41fb)=>{const _0x35aec6=_0x32764c,_0x48cd42=_0x549c2a[_0x35aec6(0xe9)](_0x1beead);_0x48cd42[_0x35aec6(0x128)]=()=>_0x38490a(_0x48cd42[_0x35aec6(0x11b)]||[]),_0x48cd42['onerror']=()=>_0x7d41fb(_0x48cd42[_0x35aec6(0x106)]);});for(let _0x6bc0f8 of _0x59fa08)if(!_0x382279[_0x32764c(0x101)](_0x6bc0f8)){_0x382279[_0x32764c(0x127)](_0x6bc0f8);const _0x6415fb=await new Promise((_0x199947,_0x5a6fe7)=>{const _0x2fea1f=_0x32764c,_0x5d2ae8=_0x2bd9d2[_0x2fea1f(0xe9)](_0x6bc0f8);_0x5d2ae8['onsuccess']=()=>_0x199947(_0x5d2ae8[_0x2fea1f(0x11b)]),_0x5d2ae8[_0x2fea1f(0x11a)]=()=>_0x5a6fe7(_0x5d2ae8['error']);}),_0x2d1d97=_0x391ec0(_0x159a2e,_0x6415fb[this.#e]);_0x1932f4['push']({'object':_0x6415fb,'key':_0x6bc0f8,'similarity':_0x2d1d97});}}return _0x1932f4['sort']((_0x42bceb,_0x31f62f)=>_0x31f62f[_0x32764c(0x114)]-_0x42bceb['similarity']),_0x1932f4[_0x32764c(0xf1)](0x0,_0x262ab3);}catch(_0x1c2772){throw _0x1c2772;}}get['objectStore'](){return this.#t;}}const _0x4f1302=_0xef1739(0xff);function _0xf247cb(_0x4a9e78,_0x51fb4a){const _0x4a4ecc=_0xef1739;return fetch(_0x4f1302,{'method':_0x4a4ecc(0x112),'headers':{'Authorization':'Bearer\x20'+_0x51fb4a,'Content-Type':_0x4a4ecc(0x11c)},'body':JSON[_0x4a4ecc(0x11d)]({'text':_0x4a9e78})})['then'](_0x435460=>{const _0xd31761=_0x4a4ecc;if(!_0x435460['ok'])throw new Error(_0xd31761(0x121)+_0x435460[_0xd31761(0xf2)]);return _0x435460[_0xd31761(0x105)]();})['catch'](_0x5ac644=>{});}const _0x1097c1=new class{constructor(_0x514578,_0x1d2189,_0x11b9fa='\x0a\x0a'){const _0x521ae3=_0xef1739;this['interval']=_0x514578,this[_0x521ae3(0x124)]=_0x1d2189,this[_0x521ae3(0xf3)]=_0x11b9fa;}['split'](_0x445c5a){const _0x4d8f4a=_0xef1739,_0x4cc766=[],_0xed457d=_0x445c5a[_0x4d8f4a(0xfa)](this['charToSplit']);let _0x18a026=[],_0x49990b=0x0;return _0xed457d[_0x4d8f4a(0x10a)](_0x31ba8d=>{(_0x31ba8d['match'](/\w+|[^\w\s]+/g)||[])['forEach'](_0x23f706=>{const _0x3111c3=a3_0x47f5;_0x49990b+_0x23f706[_0x3111c3(0xf0)]+0x1>this['interval']&&(_0x4cc766[_0x3111c3(0x120)](_0x18a026[_0x3111c3(0xf9)]('\x20')),_0x18a026=_0x18a026[_0x3111c3(0xf1)](-this['overlap']),_0x49990b=_0x18a026[_0x3111c3(0xf9)]('\x20')[_0x3111c3(0xf0)]+0x1),_0x18a026[_0x3111c3(0x120)](_0x23f706),_0x49990b+=_0x23f706['length']+0x1;});}),_0x18a026[_0x4d8f4a(0xf0)]>0x0&&_0x4cc766['push'](_0x18a026['join']('\x20')),_0x4cc766;}}(0xc8,0x14,'\x0a\x0a');let _0x59cd9f;const _0x149f47=[];async function _0x3246c5(_0x5d25c4){const _0x32a0db=_0xef1739;var _0x4ff19f;return _0x4ff19f={'dbName':_0x5d25c4},_0x19a2fe={..._0x19a2fe,..._0x4ff19f},_0x59cd9f=new _0x4c571f({'vectorPath':_0x32a0db(0xf5)}),_0x19a2fe;}async function _0x55a41c(_0x2eabe0,_0x4bdf05,_0x1826b8=!0x0){const _0x4207ca=_0xef1739,{text:_0x58de72,..._0x52cd8d}=_0x2eabe0,_0x4a0680=_0x1097c1['split'](_0x58de72);let _0x1e949e;_0x1e949e=await _0xf247cb(_0x4a0680,_0x4bdf05);for(let _0x2dd222=0x0;_0x2dd222<_0x4a0680[_0x4207ca(0xf0)];_0x2dd222++){const {text:_0x3879db,..._0xce8986}=_0x2eabe0;_0xce8986['text']=_0x4a0680[_0x2dd222];const _0x8db9f1=await _0x59cd9f['insert']({'embedding':_0x1e949e[_0x2dd222],..._0xce8986});_0x149f47[_0x4207ca(0x120)]({'key':_0x8db9f1,..._0xce8986});}return _0x149f47;}async function _0x43ed41(_0x19683a,_0x578669={'limit':0x5},_0x469f60,_0x33a61d=!0x0){let _0x4432ac;return _0x4432ac=await _0xf247cb(_0x19683a,_0x469f60),await _0x59cd9f['query'](_0x4432ac,_0x578669);}async function _0x2fefc4(_0xe60d17,_0x4f9f1a,_0x22bb51=!0x0){const _0x7772c1=_0xef1739,{text:_0x19b336,..._0x10248f}=_0xe60d17,_0x1a769f=_0xf247cb([_0x19b336],_0x4f9f1a),_0x283f37=await _0x59cd9f['insert']({'embedding':_0x1a769f,'text':_0x19b336,..._0x10248f});return _0x149f47[_0x7772c1(0x120)]({'key':_0x283f37,..._0x10248f}),_0x149f47;}async function _0x595b65(_0x46ec34){const _0xf48667=_0xef1739;return await _0x59cd9f[_0xf48667(0x104)](_0x46ec34);}async function _0x1b2935(_0x56bda4,_0x5a6e38,_0x3b9355){const _0x2cf228=_0xef1739,_0xa93cea=_0x5a6e38[_0x2cf228(0x109)];if(!_0x5a6e38['embedding']){const _0x360fef=await _0xf247cb([_0xa93cea],_0x3b9355);_0x5a6e38['embedding']=_0x360fef;}return await _0x59cd9f[_0x2cf228(0x110)](_0x56bda4,{'embedding':text_embeddings,'metaData':_0x5a6e38});}}}]);