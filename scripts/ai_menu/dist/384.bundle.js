'use strict';const a3_0x200cc3=a3_0x3752;(function(_0x5cd907,_0x1953d1){const _0x5cb8b6=a3_0x3752,_0x4e4a46=_0x5cd907();while(!![]){try{const _0x2c1f54=-parseInt(_0x5cb8b6(0x200))/0x1+parseInt(_0x5cb8b6(0x218))/0x2+-parseInt(_0x5cb8b6(0x210))/0x3*(parseInt(_0x5cb8b6(0x1ff))/0x4)+parseInt(_0x5cb8b6(0x219))/0x5+-parseInt(_0x5cb8b6(0x202))/0x6+parseInt(_0x5cb8b6(0x20c))/0x7*(parseInt(_0x5cb8b6(0x20f))/0x8)+parseInt(_0x5cb8b6(0x21e))/0x9*(-parseInt(_0x5cb8b6(0x20a))/0xa);if(_0x2c1f54===_0x1953d1)break;else _0x4e4a46['push'](_0x4e4a46['shift']());}catch(_0x113806){_0x4e4a46['push'](_0x4e4a46['shift']());}}}(a3_0x42e3,0xcc3c3));function a3_0x3752(_0x3f3d45,_0x3ed12a){const _0x42e3a8=a3_0x42e3();return a3_0x3752=function(_0x3752b0,_0x21c13e){_0x3752b0=_0x3752b0-0x1df;let _0x35b912=_0x42e3a8[_0x3752b0];return _0x35b912;},a3_0x3752(_0x3f3d45,_0x3ed12a);}function a3_0x42e3(){const _0x255815=['join','removeFromBucket','indexOf','sqrt','186910lsAvKR','map','1378580hMwADB','application/json','tables','48gtMPBl','504921vteqVZ','onsuccess','split','Object\x20not\x20found\x20with\x20the\x20provided\x20key','hashVector','all','\x20expected\x20to\x20be\x20present\x20in\x20the\x20object\x20being\x20updated','vectorDB_new','317728DGEEPi','8006615FXnbKZ','reduce','result','error','HTTP\x20error!\x20status:\x20','99bGYcdM','get','text','embedding','interval','length','put','Unable\x20to\x20delete\x20object\x20without\x20a\x20key','overlap','numTables','webpackChunkinjectchat','transaction','POST','query','target','match','objectStore','has','charToSplit','contains','https://tinymlbackend3.azurewebsites.net/api/embeddings-binary','from','readwrite','sort','splice','createObjectStore','delete','update','forEach','then','objectStoreNames','add','status','Unable\x20to\x20update\x20object\x20without\x20a\x20key','\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array','push','_hashIndex','insert','stringify','12TYKlkP','790855jAccyT','open','3623418nBQXfO','vectors','onerror','slice'];a3_0x42e3=function(){return _0x255815;};return a3_0x42e3();}(self[a3_0x200cc3(0x1e2)]=self[a3_0x200cc3(0x1e2)]||[])[a3_0x200cc3(0x1fb)]([[0x180],{0x20c0:(_0x241acd,_0x533fc6,_0x548f08)=>{const _0x6b0555=a3_0x200cc3;_0x548f08['r'](_0x533fc6),_0x548f08['d'](_0x533fc6,{'delete_row':()=>_0x5a88ac,'initiate':()=>_0x5004bf,'quickStart':()=>_0x174e67,'quickStart_single':()=>_0x1e8754,'search':()=>_0x4576d7,'update':()=>_0x185a88});let _0x39cb3f={'dbName':_0x6b0555(0x217),'objectStore':_0x6b0555(0x203),'hyperplanes':0xa,'dimensions':0x180,'numPlanes':0x5};class _0xc10047{constructor(_0x4ae086,_0x1825a0,_0x4af379=0x5){const _0x17287f=_0x6b0555;this[_0x17287f(0x1e1)]=_0x4af379,this['tables']=Array[_0x17287f(0x1ed)]({'length':_0x4af379},()=>Array[_0x17287f(0x1ed)]({'length':_0x1825a0},()=>function(_0x3ed5d1){const _0xd04c63=_0x17287f;return Array[_0xd04c63(0x1ed)]({'length':_0x3ed5d1},()=>Math['random']()-0.5);}(_0x4ae086)));}[_0x6b0555(0x214)](_0x507631){const _0x2a7f9a=_0x6b0555;return this[_0x2a7f9a(0x20e)][_0x2a7f9a(0x20b)](_0x293835=>_0x293835['map'](_0x54c9b2=>_0x507631[_0x2a7f9a(0x21a)]((_0x37508a,_0x2834fd,_0x2e69ea)=>_0x37508a+_0x2834fd*_0x54c9b2[_0x2e69ea],0x0)>=0x0?'1':'0')[_0x2a7f9a(0x206)](''));}}function _0xa2be9b(_0x32d611,_0x4a70ef){const _0x32d95e=_0x6b0555;return 0x1===_0x32d611[_0x32d95e(0x223)]&&(_0x32d611=_0x32d611[0x0]),_0x32d611['reduce']((_0x58652b,_0x17f90c,_0x3f986d)=>_0x58652b+_0x17f90c*_0x4a70ef[_0x3f986d],0x0)/(Math[_0x32d95e(0x209)](_0x32d611[_0x32d95e(0x21a)]((_0x410ea4,_0x5f0c2f)=>_0x410ea4+_0x5f0c2f*_0x5f0c2f,0x0))*Math[_0x32d95e(0x209)](_0x4a70ef[_0x32d95e(0x21a)]((_0xf49287,_0x58de87)=>_0xf49287+_0x58de87*_0x58de87,0x0)));}class _0x3c773f{#t;#e;#r;#o;constructor(_0x4dc196={}){const {dbName:_0x24db36,objectStore:_0x41c6eb,vectorPath:_0x1a3f85,dimensions:_0x541f1b,numPlanes:_0x14ba9d}={..._0x39cb3f,..._0x4dc196};this.#t=_0x41c6eb,this.#e=_0x1a3f85,this.#o=new _0xc10047(_0x541f1b,_0x14ba9d),this.#r=function(_0x4ef0f7){const {dbName:_0x40f051,objectStore:_0x4b1afc,vectorPath:_0x1d77fc}={..._0x39cb3f,..._0x4ef0f7};return new Promise((_0x476d71,_0x21b5b6)=>{const _0x115b43=a3_0x3752,_0x29b695=indexedDB[_0x115b43(0x201)](_0x40f051,0x2);_0x29b695['onupgradeneeded']=_0x518a6c=>{const _0x39afab=_0x115b43,_0x24d2dd=_0x518a6c[_0x39afab(0x1e6)]['result'];_0x24d2dd[_0x39afab(0x1f6)][_0x39afab(0x1eb)](_0x4b1afc)||_0x24d2dd[_0x39afab(0x1f1)](_0x4b1afc,{'autoIncrement':!0x0});const _0x443f26=_0x4b1afc+_0x39afab(0x1fc);_0x24d2dd[_0x39afab(0x1f6)]['contains'](_0x443f26)||_0x24d2dd[_0x39afab(0x1f1)](_0x443f26,{'autoIncrement':!0x0});},_0x29b695[_0x115b43(0x211)]=_0x55fb74=>{const _0x2ca2ad=_0x115b43;_0x476d71(_0x55fb74[_0x2ca2ad(0x1e6)][_0x2ca2ad(0x21b)]);},_0x29b695[_0x115b43(0x204)]=_0xc4b896=>{const _0x236eb5=_0x115b43;_0x21b5b6(_0xc4b896[_0x236eb5(0x1e6)][_0x236eb5(0x21c)]);};});}({'dbName':_0x24db36,'objectStore':_0x41c6eb,'vectorPath':_0x1a3f85});}async[_0x6b0555(0x1fd)](_0x1ab277){const _0xa680b4=_0x6b0555,_0x7b5978=_0x1ab277[this.#e];if(!(Array['isArray'](_0x7b5978)||_0x7b5978 instanceof Int8Array))throw new Error(this.#e+_0xa680b4(0x1fa));const _0x2da692=(await this.#r)[_0xa680b4(0x1e3)]([this.#t,this.#t+'_hashIndex'],_0xa680b4(0x1ee)),_0x14a029=_0x2da692[_0xa680b4(0x1e8)](this.#t),_0x57b047=_0x2da692['objectStore'](this.#t+_0xa680b4(0x1fc));try{const _0xe60ce7=_0x14a029['add'](_0x1ab277),_0x1e00c5=await new Promise((_0x4420bc,_0x369285)=>{const _0x400278=_0xa680b4;_0xe60ce7[_0x400278(0x211)]=()=>_0x4420bc(_0xe60ce7[_0x400278(0x21b)]),_0xe60ce7[_0x400278(0x204)]=()=>_0x369285(_0xe60ce7[_0x400278(0x21c)]);}),_0x3c740f=this.#o[_0xa680b4(0x214)](_0x7b5978);for(let _0x120d22 of _0x3c740f){const _0x416a97=await new Promise((_0x42e8f9,_0x1009d1)=>{const _0x58dd5a=_0xa680b4,_0x19552a=_0x57b047[_0x58dd5a(0x21f)](_0x120d22);_0x19552a[_0x58dd5a(0x211)]=()=>_0x42e8f9(_0x19552a[_0x58dd5a(0x21b)]||[]),_0x19552a[_0x58dd5a(0x204)]=()=>_0x1009d1(_0x19552a[_0x58dd5a(0x21c)]);});_0x416a97['push'](_0x1e00c5),await new Promise((_0x54df64,_0x350039)=>{const _0x580de0=_0xa680b4,_0x220927=_0x57b047['put'](_0x416a97,_0x120d22);_0x220927[_0x580de0(0x211)]=()=>_0x54df64(),_0x220927[_0x580de0(0x204)]=()=>_0x350039(_0x220927[_0x580de0(0x21c)]);});}return _0x1e00c5;}catch(_0x1345af){throw _0x1345af;}}async[_0x6b0555(0x1f2)](_0x222beb){const _0x2272da=_0x6b0555;if(null==_0x222beb)throw new Error(_0x2272da(0x1df));const _0x5236b8=(await this.#r)[_0x2272da(0x1e3)]([this.#t,this.#t+_0x2272da(0x1fc)],_0x2272da(0x1ee)),_0x12a203=_0x5236b8['objectStore'](this.#t),_0x585f3e=_0x5236b8[_0x2272da(0x1e8)](this.#t+_0x2272da(0x1fc)),_0x74637=await new Promise((_0x153ae7,_0xb686fa)=>{const _0xa5fcda=_0x2272da,_0x79925d=_0x12a203['get'](_0x222beb);_0x79925d[_0xa5fcda(0x211)]=()=>_0x153ae7(_0x79925d[_0xa5fcda(0x21b)]),_0x79925d['onerror']=()=>_0xb686fa(_0x79925d[_0xa5fcda(0x21c)]);});if(!_0x74637)throw new Error(_0x2272da(0x213));const _0x17c688=_0x74637[this.#e],_0xab857e=this.#o[_0x2272da(0x214)](_0x17c688);return await Promise[_0x2272da(0x215)](_0xab857e[_0x2272da(0x20b)](_0x53d1ce=>this['removeFromBucket'](_0x585f3e,_0x222beb,_0x53d1ce))),new Promise((_0x3cf8a8,_0x20125b)=>{const _0x44adad=_0x2272da,_0x244ff3=_0x12a203[_0x44adad(0x1f2)](_0x222beb);_0x244ff3[_0x44adad(0x211)]=()=>_0x3cf8a8(),_0x244ff3[_0x44adad(0x204)]=()=>_0x20125b(_0x244ff3[_0x44adad(0x21c)]);});}async[_0x6b0555(0x207)](_0x3b08c1,_0x721b7c,_0x13f234){const _0x1ea62b=_0x6b0555,_0x27c5e0=await new Promise((_0x3a7438,_0x55cc29)=>{const _0x224fac=a3_0x3752,_0x7d94c7=_0x3b08c1[_0x224fac(0x21f)](_0x13f234);_0x7d94c7[_0x224fac(0x211)]=()=>_0x3a7438(_0x7d94c7[_0x224fac(0x21b)]||[]),_0x7d94c7['onerror']=()=>_0x55cc29(_0x7d94c7[_0x224fac(0x21c)]);}),_0x447a35=_0x27c5e0['indexOf'](_0x721b7c);-0x1!==_0x447a35&&(_0x27c5e0[_0x1ea62b(0x1f0)](_0x447a35,0x1),await new Promise((_0x348502,_0x4fe70c)=>{const _0x3c42c3=_0x1ea62b,_0x28b366=_0x3b08c1[_0x3c42c3(0x224)](_0x27c5e0,_0x13f234);_0x28b366[_0x3c42c3(0x211)]=()=>_0x348502(),_0x28b366[_0x3c42c3(0x204)]=()=>_0x4fe70c(_0x28b366['error']);}));}async[_0x6b0555(0x1f3)](_0x1dd3b1,_0x159bab){const _0x512440=_0x6b0555;if(null==_0x1dd3b1)throw new Error(_0x512440(0x1f9));if(!(this.#e in _0x159bab))throw new Error(this.#e+_0x512440(0x216));if(!(Array['isArray'](_0x159bab[this.#e])||_0x159bab[this.#e]instanceof Int8Array))throw new Error(this.#e+_0x512440(0x1fa));const _0x3798cc=(await this.#r)[_0x512440(0x1e3)]([this.#t,this.#t+'_hashIndex'],'readwrite'),_0x3652a2=_0x3798cc[_0x512440(0x1e8)](this.#t),_0x28f0c3=_0x3798cc['objectStore'](this.#t+_0x512440(0x1fc)),_0x39d0ee=_0x3652a2[_0x512440(0x21f)](_0x1dd3b1);return new Promise((_0x2126e5,_0x24b5da)=>{const _0xc99eef=_0x512440;_0x39d0ee['onsuccess']=async()=>{const _0x4c2d77=a3_0x3752,_0x221aa3=_0x39d0ee[_0x4c2d77(0x21b)];if(!_0x221aa3)return void _0x24b5da(new Error('Object\x20not\x20found\x20with\x20the\x20provided\x20key'));const _0x1cae6a=this.#o[_0x4c2d77(0x214)](_0x221aa3[this.#e]),_0x5f1469=this.#o[_0x4c2d77(0x214)](_0x159bab[this.#e]),_0x55fa81=_0x3652a2[_0x4c2d77(0x224)](_0x159bab,_0x1dd3b1);_0x55fa81[_0x4c2d77(0x211)]=async()=>{const _0xa57d33=_0x4c2d77;try{for(let _0x5cad7f=0x0;_0x5cad7f<this.#o[_0xa57d33(0x1e1)];_0x5cad7f++)_0x1cae6a[_0x5cad7f]!==_0x5f1469[_0x5cad7f]&&await this['updateHashIndex'](_0x28f0c3,_0x1dd3b1,_0x1cae6a[_0x5cad7f],_0x5f1469[_0x5cad7f]);_0x2126e5(_0x55fa81[_0xa57d33(0x21b)]);}catch(_0x41c0af){_0x24b5da(_0x41c0af);}},_0x55fa81[_0x4c2d77(0x204)]=()=>_0x24b5da(_0x55fa81[_0x4c2d77(0x21c)]);},_0x39d0ee[_0xc99eef(0x204)]=()=>_0x24b5da(_0x39d0ee['error']);});}async['updateHashIndex'](_0x48afc1,_0x207185,_0x4c9d73,_0x7c1d1){const _0x4b4c2c=_0x6b0555,_0x16b810=_0x48afc1['get'](_0x4c9d73),_0x31e37f=await new Promise((_0x4779c,_0x4df4a0)=>{const _0x515a58=a3_0x3752;_0x16b810[_0x515a58(0x211)]=()=>_0x4779c(_0x16b810['result']||[]),_0x16b810[_0x515a58(0x204)]=()=>_0x4df4a0(_0x16b810[_0x515a58(0x21c)]);}),_0x25c19a=_0x31e37f[_0x4b4c2c(0x208)](_0x207185);-0x1!==_0x25c19a&&(_0x31e37f[_0x4b4c2c(0x1f0)](_0x25c19a,0x1),await _0x48afc1[_0x4b4c2c(0x224)](_0x31e37f,_0x4c9d73));const _0x4facc6=_0x48afc1['get'](_0x7c1d1),_0x1ed406=await new Promise((_0x50356b,_0x4cf4e0)=>{const _0x2d35a0=_0x4b4c2c;_0x4facc6[_0x2d35a0(0x211)]=()=>_0x50356b(_0x4facc6['result']||[]),_0x4facc6[_0x2d35a0(0x204)]=()=>_0x4cf4e0(_0x4facc6[_0x2d35a0(0x21c)]);});_0x1ed406[_0x4b4c2c(0x1fb)](_0x207185),await _0x48afc1[_0x4b4c2c(0x224)](_0x1ed406,_0x7c1d1);}async['query'](_0x5b26bb,_0x317687={'limit':0xa}){const _0x232b89=_0x6b0555,{limit:_0x462f8b}=_0x317687;let _0x40ea5d=new Set(),_0x27a04e=[];try{const _0x5059dd=(await this.#r)[_0x232b89(0x1e3)]([this.#t,this.#t+_0x232b89(0x1fc)],'readonly'),_0x37c127=_0x5059dd[_0x232b89(0x1e8)](this.#t),_0x3c8de8=_0x5059dd['objectStore'](this.#t+'_hashIndex'),_0x14be54=this.#o[_0x232b89(0x214)](_0x5b26bb);for(let _0x25677b of _0x14be54){const _0x50f6c1=await new Promise((_0x3045f3,_0x101840)=>{const _0x64e10d=_0x232b89,_0x4886de=_0x3c8de8[_0x64e10d(0x21f)](_0x25677b);_0x4886de['onsuccess']=()=>_0x3045f3(_0x4886de[_0x64e10d(0x21b)]||[]),_0x4886de['onerror']=()=>_0x101840(_0x4886de['error']);});for(let _0x1d5a6a of _0x50f6c1)if(!_0x40ea5d[_0x232b89(0x1e9)](_0x1d5a6a)){_0x40ea5d[_0x232b89(0x1f7)](_0x1d5a6a);const _0x6c2a50=await new Promise((_0x27eb0d,_0x5b4a89)=>{const _0x46dd69=_0x232b89,_0xf117fa=_0x37c127[_0x46dd69(0x21f)](_0x1d5a6a);_0xf117fa[_0x46dd69(0x211)]=()=>_0x27eb0d(_0xf117fa[_0x46dd69(0x21b)]),_0xf117fa[_0x46dd69(0x204)]=()=>_0x5b4a89(_0xf117fa[_0x46dd69(0x21c)]);}),_0x2075d7=_0xa2be9b(_0x5b26bb,_0x6c2a50[this.#e]);_0x27a04e[_0x232b89(0x1fb)]({'object':_0x6c2a50,'key':_0x1d5a6a,'similarity':_0x2075d7});}}return _0x27a04e[_0x232b89(0x1ef)]((_0x4e9707,_0xa00725)=>_0xa00725['similarity']-_0x4e9707['similarity']),_0x27a04e[_0x232b89(0x205)](0x0,_0x462f8b);}catch(_0x552126){throw _0x552126;}}get[_0x6b0555(0x1e8)](){return this.#t;}}const _0x20ffff=_0x6b0555(0x1ec);function _0x333ce5(_0x5cfd50,_0x19d821){const _0x19f2bf=_0x6b0555;return fetch(_0x20ffff,{'method':_0x19f2bf(0x1e4),'headers':{'Authorization':'Bearer\x20'+_0x19d821,'Content-Type':_0x19f2bf(0x20d)},'body':JSON[_0x19f2bf(0x1fe)]({'text':_0x5cfd50})})[_0x19f2bf(0x1f5)](_0x598ab1=>{const _0x2a6f71=_0x19f2bf;if(!_0x598ab1['ok'])throw new Error(_0x2a6f71(0x21d)+_0x598ab1[_0x2a6f71(0x1f8)]);return _0x598ab1['json']();})['catch'](_0x2d60ac=>{});}const _0x56a293=new class{constructor(_0x443bf7,_0x539067,_0x5f471f='\x0a\x0a'){const _0x262e5c=_0x6b0555;this[_0x262e5c(0x222)]=_0x443bf7,this['overlap']=_0x539067,this[_0x262e5c(0x1ea)]=_0x5f471f;}[_0x6b0555(0x212)](_0x3a8f0c){const _0x3251c5=_0x6b0555,_0x5e9879=[],_0x498355=_0x3a8f0c[_0x3251c5(0x212)](this['charToSplit']);let _0x45b897=[],_0x30a9f7=0x0;return _0x498355[_0x3251c5(0x1f4)](_0x1322b9=>{const _0x4bee3a=_0x3251c5;(_0x1322b9[_0x4bee3a(0x1e7)](/\w+|[^\w\s]+/g)||[])['forEach'](_0x2abb87=>{const _0x5952aa=_0x4bee3a;_0x30a9f7+_0x2abb87[_0x5952aa(0x223)]+0x1>this[_0x5952aa(0x222)]&&(_0x5e9879[_0x5952aa(0x1fb)](_0x45b897[_0x5952aa(0x206)]('\x20')),_0x45b897=_0x45b897[_0x5952aa(0x205)](-this[_0x5952aa(0x1e0)]),_0x30a9f7=_0x45b897[_0x5952aa(0x206)]('\x20')['length']+0x1),_0x45b897[_0x5952aa(0x1fb)](_0x2abb87),_0x30a9f7+=_0x2abb87['length']+0x1;});}),_0x45b897[_0x3251c5(0x223)]>0x0&&_0x5e9879[_0x3251c5(0x1fb)](_0x45b897[_0x3251c5(0x206)]('\x20')),_0x5e9879;}}(0xc8,0x14,'\x0a\x0a');let _0x5baf7f;const _0x35c6f8=[];async function _0x5004bf(_0x19768a){const _0x525374=_0x6b0555;var _0x40eb96;return _0x40eb96={'dbName':_0x19768a},_0x39cb3f={..._0x39cb3f,..._0x40eb96},_0x5baf7f=new _0x3c773f({'vectorPath':_0x525374(0x221)}),_0x39cb3f;}async function _0x174e67(_0x2e4c0e,_0x125fdc,_0x2233b3=!0x0){const _0x48ba6e=_0x6b0555,{text:_0x43d14d,..._0xefd907}=_0x2e4c0e,_0x53c2d8=_0x56a293[_0x48ba6e(0x212)](_0x43d14d);let _0x206261;_0x206261=await _0x333ce5(_0x53c2d8,_0x125fdc);for(let _0x510e28=0x0;_0x510e28<_0x53c2d8['length'];_0x510e28++){const {text:_0x28ba8e,..._0x2b57e0}=_0x2e4c0e;_0x2b57e0[_0x48ba6e(0x220)]=_0x53c2d8[_0x510e28];const _0x36dd99=await _0x5baf7f[_0x48ba6e(0x1fd)]({'embedding':_0x206261[_0x510e28],..._0x2b57e0});_0x35c6f8[_0x48ba6e(0x1fb)]({'key':_0x36dd99,..._0x2b57e0});}return _0x35c6f8;}async function _0x4576d7(_0x59282a,_0x5353c4={'limit':0x5},_0x333cb6,_0x5b4ddc=!0x0){const _0x468086=_0x6b0555;let _0x3e3e95;return _0x3e3e95=await _0x333ce5(_0x59282a,_0x333cb6),await _0x5baf7f[_0x468086(0x1e5)](_0x3e3e95,_0x5353c4);}async function _0x1e8754(_0x345f14,_0x1aeecf,_0x41df0c=!0x0){const _0x28cd4f=_0x6b0555,{text:_0x26a381,..._0x293ff4}=_0x345f14,_0x13888e=_0x333ce5([_0x26a381],_0x1aeecf),_0xe39722=await _0x5baf7f[_0x28cd4f(0x1fd)]({'embedding':_0x13888e,'text':_0x26a381,..._0x293ff4});return _0x35c6f8[_0x28cd4f(0x1fb)]({'key':_0xe39722,..._0x293ff4}),_0x35c6f8;}async function _0x5a88ac(_0x2e1b78){const _0x7316eb=_0x6b0555;return await _0x5baf7f[_0x7316eb(0x1f2)](_0x2e1b78);}async function _0x185a88(_0x3929e8,_0x4e3e28,_0x21d5c2){const _0x13e7e0=_0x6b0555,_0x208a53=_0x4e3e28['text'];if(!_0x4e3e28[_0x13e7e0(0x221)]){const _0x33447a=await _0x333ce5([_0x208a53],_0x21d5c2);_0x4e3e28[_0x13e7e0(0x221)]=_0x33447a;}return await _0x5baf7f[_0x13e7e0(0x1f3)](_0x3929e8,{'embedding':text_embeddings,'metaData':_0x4e3e28});}}}]);