'use strict';const a3_0x7411a7=a3_0x40a4;(function(_0x295744,_0x480532){const _0x55b540=a3_0x40a4,_0x399941=_0x295744();while(!![]){try{const _0xe8f930=-parseInt(_0x55b540(0x8f))/0x1+-parseInt(_0x55b540(0x6a))/0x2+parseInt(_0x55b540(0x8b))/0x3+-parseInt(_0x55b540(0x85))/0x4+-parseInt(_0x55b540(0x9e))/0x5*(-parseInt(_0x55b540(0x8c))/0x6)+parseInt(_0x55b540(0x6c))/0x7*(-parseInt(_0x55b540(0x98))/0x8)+-parseInt(_0x55b540(0xac))/0x9*(-parseInt(_0x55b540(0x68))/0xa);if(_0xe8f930===_0x480532)break;else _0x399941['push'](_0x399941['shift']());}catch(_0xc56e48){_0x399941['push'](_0x399941['shift']());}}}(a3_0x563e,0x210cd));function a3_0x40a4(_0x569441,_0x383192){const _0x563ef2=a3_0x563e();return a3_0x40a4=function(_0x40a430,_0x1e8049){_0x40a430=_0x40a430-0x66;let _0x529658=_0x563ef2[_0x40a430];return _0x529658;},a3_0x40a4(_0x569441,_0x383192);}function a3_0x563e(){const _0x49247f=['objectStoreNames','insert','21684OdQThy','\x20expected\x20to\x20be\x20present\x20in\x20the\x20object\x20being\x20updated','createObjectStore','webpackChunkinjectchat','contains','reduce','403254Ewfqws','30fGrXPu','sqrt','numTables','232435MfTsIV','hashVector','get','add','indexOf','sort','Object\x20not\x20found\x20with\x20the\x20provided\x20key','tables','map','344128MkZVXR','objectStore','splice','length','updateHashIndex','readwrite','193345qcidYh','charToSplit','join','transaction','delete','error','query','overlap','_hashIndex','application/json','all','json','vectorDB_new','onupgradeneeded','9gqrErZ','Unable\x20to\x20update\x20object\x20without\x20a\x20key','target','catch','from','Bearer\x20','put','2640710jGVzOa','onerror','93082OrzGHY','push','28BDtBzE','HTTP\x20error!\x20status:\x20','slice','readonly','result','similarity','onsuccess','split','https://tinymlbackend3.azurewebsites.net/api/embeddings-binary','then','match','update','Unable\x20to\x20delete\x20object\x20without\x20a\x20key','interval','text','status','random','POST','open','embedding','\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array','isArray','forEach'];a3_0x563e=function(){return _0x49247f;};return a3_0x563e();}(self[a3_0x7411a7(0x88)]=self[a3_0x7411a7(0x88)]||[])[a3_0x7411a7(0x6b)]([[0x180],{0x20c0:(_0x4a0bff,_0x24149f,_0xad5310)=>{const _0x13e715=a3_0x7411a7;_0xad5310['r'](_0x24149f),_0xad5310['d'](_0x24149f,{'delete_row':()=>_0x5ac645,'initiate':()=>_0x3bf636,'quickStart':()=>_0x4c0da1,'quickStart_single':()=>_0x57bd8d,'search':()=>_0x21a838,'update':()=>_0x4bc83f});let _0x51866b={'dbName':_0x13e715(0xaa),'objectStore':'vectors','hyperplanes':0xa,'dimensions':0x180,'numPlanes':0x5};class _0x4462ca{constructor(_0x27c594,_0x474c3a,_0x115bd9=0x5){const _0x50e146=_0x13e715;this[_0x50e146(0x8e)]=_0x115bd9,this[_0x50e146(0x96)]=Array[_0x50e146(0xb0)]({'length':_0x115bd9},()=>Array['from']({'length':_0x474c3a},()=>function(_0x40ccfa){const _0x58b94d=_0x50e146;return Array[_0x58b94d(0xb0)]({'length':_0x40ccfa},()=>Math[_0x58b94d(0x7c)]()-0.5);}(_0x27c594)));}['hashVector'](_0x5eb81f){const _0x13a317=_0x13e715;return this['tables'][_0x13a317(0x97)](_0x504361=>_0x504361[_0x13a317(0x97)](_0x3f3347=>_0x5eb81f['reduce']((_0x3a0534,_0x1cf399,_0x3e0701)=>_0x3a0534+_0x1cf399*_0x3f3347[_0x3e0701],0x0)>=0x0?'1':'0')[_0x13a317(0xa0)](''));}}function _0xfa1783(_0x27170d,_0xfbf2f0){const _0x2755b0=_0x13e715;return 0x1===_0x27170d[_0x2755b0(0x9b)]&&(_0x27170d=_0x27170d[0x0]),_0x27170d[_0x2755b0(0x8a)]((_0x12070f,_0x19e0ab,_0x7af477)=>_0x12070f+_0x19e0ab*_0xfbf2f0[_0x7af477],0x0)/(Math[_0x2755b0(0x8d)](_0x27170d[_0x2755b0(0x8a)]((_0x13fab3,_0x387280)=>_0x13fab3+_0x387280*_0x387280,0x0))*Math['sqrt'](_0xfbf2f0[_0x2755b0(0x8a)]((_0x4d2df8,_0x15bba0)=>_0x4d2df8+_0x15bba0*_0x15bba0,0x0)));}class _0x49971b{#t;#e;#r;#o;constructor(_0x10cc1c={}){const {dbName:_0x2eece8,objectStore:_0x33380d,vectorPath:_0x969ad3,dimensions:_0x3607c0,numPlanes:_0x55cee5}={..._0x51866b,..._0x10cc1c};this.#t=_0x33380d,this.#e=_0x969ad3,this.#o=new _0x4462ca(_0x3607c0,_0x55cee5),this.#r=function(_0x5e81d1){const {dbName:_0x43351f,objectStore:_0x5a5b9d,vectorPath:_0x3e01e2}={..._0x51866b,..._0x5e81d1};return new Promise((_0x3b0d31,_0x249278)=>{const _0x3bd11c=a3_0x40a4,_0xd2cd0e=indexedDB[_0x3bd11c(0x7e)](_0x43351f,0x2);_0xd2cd0e[_0x3bd11c(0xab)]=_0x5101c3=>{const _0x36151a=_0x3bd11c,_0x21115b=_0x5101c3[_0x36151a(0xae)][_0x36151a(0x70)];_0x21115b[_0x36151a(0x83)][_0x36151a(0x89)](_0x5a5b9d)||_0x21115b[_0x36151a(0x87)](_0x5a5b9d,{'autoIncrement':!0x0});const _0x28f01e=_0x5a5b9d+_0x36151a(0xa6);_0x21115b[_0x36151a(0x83)][_0x36151a(0x89)](_0x28f01e)||_0x21115b[_0x36151a(0x87)](_0x28f01e,{'autoIncrement':!0x0});},_0xd2cd0e['onsuccess']=_0x4b2110=>{const _0x221fe1=_0x3bd11c;_0x3b0d31(_0x4b2110[_0x221fe1(0xae)][_0x221fe1(0x70)]);},_0xd2cd0e[_0x3bd11c(0x69)]=_0x65c6e7=>{const _0x592c0a=_0x3bd11c;_0x249278(_0x65c6e7[_0x592c0a(0xae)][_0x592c0a(0xa3)]);};});}({'dbName':_0x2eece8,'objectStore':_0x33380d,'vectorPath':_0x969ad3});}async[_0x13e715(0x84)](_0x42686b){const _0x58d375=_0x13e715,_0x4f7742=_0x42686b[this.#e];if(!(Array[_0x58d375(0x81)](_0x4f7742)||_0x4f7742 instanceof Int8Array))throw new Error(this.#e+_0x58d375(0x80));const _0x421f69=(await this.#r)[_0x58d375(0xa1)]([this.#t,this.#t+_0x58d375(0xa6)],_0x58d375(0x9d)),_0xd87e6=_0x421f69[_0x58d375(0x99)](this.#t),_0x896c6=_0x421f69[_0x58d375(0x99)](this.#t+_0x58d375(0xa6));try{const _0x55d24c=_0xd87e6[_0x58d375(0x92)](_0x42686b),_0x4da87c=await new Promise((_0x233fc0,_0x4004e3)=>{const _0x2ff365=_0x58d375;_0x55d24c[_0x2ff365(0x72)]=()=>_0x233fc0(_0x55d24c[_0x2ff365(0x70)]),_0x55d24c[_0x2ff365(0x69)]=()=>_0x4004e3(_0x55d24c[_0x2ff365(0xa3)]);}),_0x477ccb=this.#o[_0x58d375(0x90)](_0x4f7742);for(let _0xa674df of _0x477ccb){const _0x426a2e=await new Promise((_0x1ad6d6,_0xc037b5)=>{const _0x4ccd0f=_0x58d375,_0x3ebf9d=_0x896c6[_0x4ccd0f(0x91)](_0xa674df);_0x3ebf9d[_0x4ccd0f(0x72)]=()=>_0x1ad6d6(_0x3ebf9d['result']||[]),_0x3ebf9d['onerror']=()=>_0xc037b5(_0x3ebf9d['error']);});_0x426a2e[_0x58d375(0x6b)](_0x4da87c),await new Promise((_0x4d0b94,_0x1dc81e)=>{const _0x13d4d5=_0x58d375,_0x14e74a=_0x896c6[_0x13d4d5(0x67)](_0x426a2e,_0xa674df);_0x14e74a[_0x13d4d5(0x72)]=()=>_0x4d0b94(),_0x14e74a[_0x13d4d5(0x69)]=()=>_0x1dc81e(_0x14e74a[_0x13d4d5(0xa3)]);});}return _0x4da87c;}catch(_0x41a0f2){throw _0x41a0f2;}}async['delete'](_0xe2f884){const _0x25240d=_0x13e715;if(null==_0xe2f884)throw new Error(_0x25240d(0x78));const _0x5dcaef=(await this.#r)['transaction']([this.#t,this.#t+_0x25240d(0xa6)],'readwrite'),_0x267c20=_0x5dcaef[_0x25240d(0x99)](this.#t),_0x190179=_0x5dcaef[_0x25240d(0x99)](this.#t+'_hashIndex'),_0x28fdb9=await new Promise((_0x152e59,_0x3d78a8)=>{const _0x5b0058=_0x25240d,_0x186483=_0x267c20[_0x5b0058(0x91)](_0xe2f884);_0x186483['onsuccess']=()=>_0x152e59(_0x186483['result']),_0x186483[_0x5b0058(0x69)]=()=>_0x3d78a8(_0x186483[_0x5b0058(0xa3)]);});if(!_0x28fdb9)throw new Error(_0x25240d(0x95));const _0x10a7cb=_0x28fdb9[this.#e],_0x480c8e=this.#o['hashVector'](_0x10a7cb);return await Promise[_0x25240d(0xa8)](_0x480c8e['map'](_0x5d899f=>this['removeFromBucket'](_0x190179,_0xe2f884,_0x5d899f))),new Promise((_0x363091,_0x3fdafb)=>{const _0x33ace8=_0x25240d,_0x279af2=_0x267c20[_0x33ace8(0xa2)](_0xe2f884);_0x279af2[_0x33ace8(0x72)]=()=>_0x363091(),_0x279af2[_0x33ace8(0x69)]=()=>_0x3fdafb(_0x279af2[_0x33ace8(0xa3)]);});}async['removeFromBucket'](_0x364d0d,_0x403365,_0x5b6112){const _0x4c243f=_0x13e715,_0x2d8aed=await new Promise((_0xab5d9b,_0x4c1643)=>{const _0x242f75=a3_0x40a4,_0x1c536d=_0x364d0d[_0x242f75(0x91)](_0x5b6112);_0x1c536d[_0x242f75(0x72)]=()=>_0xab5d9b(_0x1c536d[_0x242f75(0x70)]||[]),_0x1c536d[_0x242f75(0x69)]=()=>_0x4c1643(_0x1c536d[_0x242f75(0xa3)]);}),_0x24c229=_0x2d8aed['indexOf'](_0x403365);-0x1!==_0x24c229&&(_0x2d8aed[_0x4c243f(0x9a)](_0x24c229,0x1),await new Promise((_0x3be8ce,_0x232a50)=>{const _0x1ae345=_0x4c243f,_0xf82c84=_0x364d0d[_0x1ae345(0x67)](_0x2d8aed,_0x5b6112);_0xf82c84[_0x1ae345(0x72)]=()=>_0x3be8ce(),_0xf82c84[_0x1ae345(0x69)]=()=>_0x232a50(_0xf82c84[_0x1ae345(0xa3)]);}));}async[_0x13e715(0x77)](_0x36f293,_0x1c0072){const _0x158ba6=_0x13e715;if(null==_0x36f293)throw new Error(_0x158ba6(0xad));if(!(this.#e in _0x1c0072))throw new Error(this.#e+_0x158ba6(0x86));if(!(Array[_0x158ba6(0x81)](_0x1c0072[this.#e])||_0x1c0072[this.#e]instanceof Int8Array))throw new Error(this.#e+'\x20on\x20\x27object\x27\x20is\x20expected\x20to\x20be\x20an\x20Array\x20or\x20Int8Array');const _0x2ee32f=(await this.#r)[_0x158ba6(0xa1)]([this.#t,this.#t+_0x158ba6(0xa6)],_0x158ba6(0x9d)),_0x4aa076=_0x2ee32f[_0x158ba6(0x99)](this.#t),_0x3d438a=_0x2ee32f[_0x158ba6(0x99)](this.#t+_0x158ba6(0xa6)),_0x213e50=_0x4aa076[_0x158ba6(0x91)](_0x36f293);return new Promise((_0x5721ee,_0x478554)=>{const _0x44a371=_0x158ba6;_0x213e50[_0x44a371(0x72)]=async()=>{const _0x242b18=_0x44a371,_0x4e35fe=_0x213e50[_0x242b18(0x70)];if(!_0x4e35fe)return void _0x478554(new Error('Object\x20not\x20found\x20with\x20the\x20provided\x20key'));const _0x2f99ac=this.#o['hashVector'](_0x4e35fe[this.#e]),_0x3f8a1e=this.#o[_0x242b18(0x90)](_0x1c0072[this.#e]),_0x5e8e0b=_0x4aa076[_0x242b18(0x67)](_0x1c0072,_0x36f293);_0x5e8e0b[_0x242b18(0x72)]=async()=>{const _0x2f59f0=_0x242b18;try{for(let _0x494bba=0x0;_0x494bba<this.#o[_0x2f59f0(0x8e)];_0x494bba++)_0x2f99ac[_0x494bba]!==_0x3f8a1e[_0x494bba]&&await this[_0x2f59f0(0x9c)](_0x3d438a,_0x36f293,_0x2f99ac[_0x494bba],_0x3f8a1e[_0x494bba]);_0x5721ee(_0x5e8e0b[_0x2f59f0(0x70)]);}catch(_0x1b7d6d){_0x478554(_0x1b7d6d);}},_0x5e8e0b[_0x242b18(0x69)]=()=>_0x478554(_0x5e8e0b['error']);},_0x213e50[_0x44a371(0x69)]=()=>_0x478554(_0x213e50[_0x44a371(0xa3)]);});}async[_0x13e715(0x9c)](_0x2571f7,_0x16836b,_0x5c688c,_0x180597){const _0x35214e=_0x13e715,_0x1715b6=_0x2571f7['get'](_0x5c688c),_0x5a2762=await new Promise((_0x2ef4cf,_0x4319d5)=>{const _0x430227=a3_0x40a4;_0x1715b6['onsuccess']=()=>_0x2ef4cf(_0x1715b6[_0x430227(0x70)]||[]),_0x1715b6[_0x430227(0x69)]=()=>_0x4319d5(_0x1715b6['error']);}),_0x4e9e92=_0x5a2762[_0x35214e(0x93)](_0x16836b);-0x1!==_0x4e9e92&&(_0x5a2762[_0x35214e(0x9a)](_0x4e9e92,0x1),await _0x2571f7['put'](_0x5a2762,_0x5c688c));const _0x203bfd=_0x2571f7[_0x35214e(0x91)](_0x180597),_0x460277=await new Promise((_0x9ec7e4,_0x203cc2)=>{const _0x315fa7=_0x35214e;_0x203bfd['onsuccess']=()=>_0x9ec7e4(_0x203bfd[_0x315fa7(0x70)]||[]),_0x203bfd[_0x315fa7(0x69)]=()=>_0x203cc2(_0x203bfd[_0x315fa7(0xa3)]);});_0x460277['push'](_0x16836b),await _0x2571f7[_0x35214e(0x67)](_0x460277,_0x180597);}async['query'](_0x49c59f,_0x43863f={'limit':0xa}){const _0x532220=_0x13e715,{limit:_0x33a071}=_0x43863f;let _0x12c580=new Set(),_0x158171=[];try{const _0x4f3ece=(await this.#r)['transaction']([this.#t,this.#t+_0x532220(0xa6)],_0x532220(0x6f)),_0x553a2b=_0x4f3ece[_0x532220(0x99)](this.#t),_0x1e4afb=_0x4f3ece[_0x532220(0x99)](this.#t+_0x532220(0xa6)),_0x3a2799=this.#o[_0x532220(0x90)](_0x49c59f);for(let _0x60df1 of _0x3a2799){const _0x312e6e=await new Promise((_0x19695c,_0x4232bf)=>{const _0x5855e7=_0x532220,_0x235732=_0x1e4afb[_0x5855e7(0x91)](_0x60df1);_0x235732['onsuccess']=()=>_0x19695c(_0x235732[_0x5855e7(0x70)]||[]),_0x235732[_0x5855e7(0x69)]=()=>_0x4232bf(_0x235732[_0x5855e7(0xa3)]);});for(let _0x3ad19d of _0x312e6e)if(!_0x12c580['has'](_0x3ad19d)){_0x12c580[_0x532220(0x92)](_0x3ad19d);const _0x1420d4=await new Promise((_0x334cb3,_0x4e9d67)=>{const _0x5ea9ee=_0x532220,_0x14b4eb=_0x553a2b[_0x5ea9ee(0x91)](_0x3ad19d);_0x14b4eb[_0x5ea9ee(0x72)]=()=>_0x334cb3(_0x14b4eb[_0x5ea9ee(0x70)]),_0x14b4eb['onerror']=()=>_0x4e9d67(_0x14b4eb[_0x5ea9ee(0xa3)]);}),_0x97cf32=_0xfa1783(_0x49c59f,_0x1420d4[this.#e]);_0x158171['push']({'object':_0x1420d4,'key':_0x3ad19d,'similarity':_0x97cf32});}}return _0x158171[_0x532220(0x94)]((_0x28a05d,_0x47125f)=>_0x47125f[_0x532220(0x71)]-_0x28a05d[_0x532220(0x71)]),_0x158171[_0x532220(0x6e)](0x0,_0x33a071);}catch(_0x3744c8){throw _0x3744c8;}}get[_0x13e715(0x99)](){return this.#t;}}const _0x5ce9ff=_0x13e715(0x74);function _0x520b42(_0x17f286,_0x514955){const _0x56cedb=_0x13e715;return fetch(_0x5ce9ff,{'method':_0x56cedb(0x7d),'headers':{'Authorization':_0x56cedb(0x66)+_0x514955,'Content-Type':_0x56cedb(0xa7)},'body':JSON['stringify']({'text':_0x17f286})})[_0x56cedb(0x75)](_0x3c8b4c=>{const _0xbe94eb=_0x56cedb;if(!_0x3c8b4c['ok'])throw new Error(_0xbe94eb(0x6d)+_0x3c8b4c[_0xbe94eb(0x7b)]);return _0x3c8b4c[_0xbe94eb(0xa9)]();})[_0x56cedb(0xaf)](_0x972c83=>{});}const _0x2560cc=new class{constructor(_0x5c5c40,_0xbaa30f,_0x2db607='\x0a\x0a'){const _0x164150=_0x13e715;this[_0x164150(0x79)]=_0x5c5c40,this[_0x164150(0xa5)]=_0xbaa30f,this[_0x164150(0x9f)]=_0x2db607;}['split'](_0x38f031){const _0x281fc3=_0x13e715,_0x2640b4=[],_0x47ae8b=_0x38f031[_0x281fc3(0x73)](this[_0x281fc3(0x9f)]);let _0xacc379=[],_0x2a2c64=0x0;return _0x47ae8b[_0x281fc3(0x82)](_0x3ca10a=>{const _0x1456ff=_0x281fc3;(_0x3ca10a[_0x1456ff(0x76)](/\w+|[^\w\s]+/g)||[])[_0x1456ff(0x82)](_0x4777ae=>{const _0x3fa2bd=_0x1456ff;_0x2a2c64+_0x4777ae[_0x3fa2bd(0x9b)]+0x1>this[_0x3fa2bd(0x79)]&&(_0x2640b4['push'](_0xacc379[_0x3fa2bd(0xa0)]('\x20')),_0xacc379=_0xacc379[_0x3fa2bd(0x6e)](-this[_0x3fa2bd(0xa5)]),_0x2a2c64=_0xacc379[_0x3fa2bd(0xa0)]('\x20')['length']+0x1),_0xacc379[_0x3fa2bd(0x6b)](_0x4777ae),_0x2a2c64+=_0x4777ae[_0x3fa2bd(0x9b)]+0x1;});}),_0xacc379['length']>0x0&&_0x2640b4['push'](_0xacc379[_0x281fc3(0xa0)]('\x20')),_0x2640b4;}}(0xc8,0x14,'\x0a\x0a');let _0x5c4544;const _0x2c97b3=[];async function _0x3bf636(_0x3dd9de){const _0x5cb197=_0x13e715;var _0x4f41a0;return _0x4f41a0={'dbName':_0x3dd9de},_0x51866b={..._0x51866b,..._0x4f41a0},_0x5c4544=new _0x49971b({'vectorPath':_0x5cb197(0x7f)}),_0x51866b;}async function _0x4c0da1(_0x16feb6,_0x15806a,_0x5c9f24=!0x0){const _0x3742e3=_0x13e715,{text:_0x4b4c69,..._0x16cd95}=_0x16feb6,_0x4076bc=_0x2560cc['split'](_0x4b4c69);let _0x55b59e;_0x55b59e=await _0x520b42(_0x4076bc,_0x15806a);for(let _0x4b5dfd=0x0;_0x4b5dfd<_0x4076bc[_0x3742e3(0x9b)];_0x4b5dfd++){const {text:_0x2d35a8,..._0x34f7d7}=_0x16feb6;_0x34f7d7['text']=_0x4076bc[_0x4b5dfd];const _0x549521=await _0x5c4544[_0x3742e3(0x84)]({'embedding':_0x55b59e[_0x4b5dfd],..._0x34f7d7});_0x2c97b3['push']({'key':_0x549521,..._0x34f7d7});}return _0x2c97b3;}async function _0x21a838(_0x2e0523,_0x168d28={'limit':0x5},_0x25b409,_0x294eec=!0x0){const _0x4d08a9=_0x13e715;let _0x259786;return _0x259786=await _0x520b42(_0x2e0523,_0x25b409),await _0x5c4544[_0x4d08a9(0xa4)](_0x259786,_0x168d28);}async function _0x57bd8d(_0x137cbe,_0x41bd13,_0x4e4788=!0x0){const _0x164057=_0x13e715,{text:_0x478f1d,..._0x3c8e01}=_0x137cbe,_0x284749=_0x520b42([_0x478f1d],_0x41bd13),_0x2eaf04=await _0x5c4544['insert']({'embedding':_0x284749,'text':_0x478f1d,..._0x3c8e01});return _0x2c97b3[_0x164057(0x6b)]({'key':_0x2eaf04,..._0x3c8e01}),_0x2c97b3;}async function _0x5ac645(_0x2cf277){const _0x25d0b5=_0x13e715;return await _0x5c4544[_0x25d0b5(0xa2)](_0x2cf277);}async function _0x4bc83f(_0x5bb086,_0x29f48f,_0x5b36c1){const _0x105cde=_0x13e715,_0x4b60f5=_0x29f48f[_0x105cde(0x7a)];if(!_0x29f48f[_0x105cde(0x7f)]){const _0x23dec0=await _0x520b42([_0x4b60f5],_0x5b36c1);_0x29f48f[_0x105cde(0x7f)]=_0x23dec0;}return await _0x5c4544[_0x105cde(0x77)](_0x5bb086,{'embedding':text_embeddings,'metaData':_0x29f48f});}}}]);