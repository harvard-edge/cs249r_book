<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#333"/>
    </marker>
    <marker id="arr-red" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#c44"/>
    </marker>
    <marker id="arr-green" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#3d9e5a"/>
    </marker>
  </defs>

  <rect width="680" height="460" fill="#fff"/>

  <!-- Left panel: Conventional Fine-tuning -->
  <rect x="14" y="14" width="296" height="428" rx="6" fill="#fafafa" stroke="#bbb" stroke-width="1.2"/>
  <rect x="14" y="14" width="296" height="30" rx="6" fill="#f9d6d5" stroke="#c44" stroke-width="1.2"/>
  <rect x="14" y="30" width="296" height="14" fill="#f9d6d5"/>
  <text x="162" y="34" font-size="11" font-weight="700" fill="#333" text-anchor="middle">Conventional Fine-tuning</text>

  <!-- Neural network: 5 colored (trainable) layers -->
  <!-- Layer labels -->
  <text x="26" y="76" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Input</text>
  <text x="26" y="136" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 1</text>
  <text x="26" y="196" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 2</text>
  <text x="26" y="256" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 3</text>
  <text x="26" y="316" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 4</text>
  <text x="26" y="376" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Head</text>

  <!-- Layer bars (all blue = trainable) -->
  <rect x="78" y="60" width="160" height="26" rx="3" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="158" y="77" font-size="8.5" fill="#1a5a8a" text-anchor="middle">trainable</text>

  <rect x="78" y="118" width="160" height="26" rx="3" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="158" y="135" font-size="8.5" fill="#1a5a8a" text-anchor="middle">trainable</text>

  <rect x="78" y="178" width="160" height="26" rx="3" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="158" y="195" font-size="8.5" fill="#1a5a8a" text-anchor="middle">trainable</text>

  <rect x="78" y="238" width="160" height="26" rx="3" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="158" y="255" font-size="8.5" fill="#1a5a8a" text-anchor="middle">trainable</text>

  <rect x="78" y="298" width="160" height="26" rx="3" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="158" y="315" font-size="8.5" fill="#1a5a8a" text-anchor="middle">trainable</text>

  <rect x="78" y="358" width="160" height="26" rx="3" fill="#4a90c4" stroke="#1a5a8a" stroke-width="1.2"/>
  <text x="158" y="375" font-size="8.5" fill="#fff" text-anchor="middle" font-weight="600">classifier head</text>

  <!-- Vertical connecting lines between layers -->
  <line x1="158" y1="86" x2="158" y2="118" stroke="#4a90c4" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="158" y1="144" x2="158" y2="178" stroke="#4a90c4" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="158" y1="204" x2="158" y2="238" stroke="#4a90c4" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="158" y1="264" x2="158" y2="298" stroke="#4a90c4" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="158" y1="324" x2="158" y2="358" stroke="#4a90c4" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Gradient flow arrow (backprop through all layers) -->
  <path d="M 246,380 Q 264,380 264,300 Q 264,80 246,72" fill="none" stroke="#c44" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr-red)"/>
  <text x="268" y="228" font-size="8" fill="#c44" text-anchor="start" transform="rotate(90,268,228)">backprop through all layers</text>

  <!-- Memory bar -->
  <rect x="248" y="58" width="22" height="328" rx="3" fill="#e0e0e0" stroke="#bbb" stroke-width="0.8"/>
  <!-- Filled (large footprint) -->
  <rect x="248" y="58" width="22" height="320" rx="3" fill="#f9d6d5" stroke="#c44" stroke-width="0.8"/>
  <text x="259" y="54" font-size="8" fill="#c44" text-anchor="middle" font-weight="600">Mem</text>
  <text x="259" y="396" font-size="7.5" fill="#c44" text-anchor="middle">large</text>

  <!-- Legend below -->
  <rect x="78" y="400" width="12" height="10" rx="1" fill="#cfe2f3" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="96" y="410" font-size="8.5" fill="#4a90c4">All layers trainable</text>
  <text x="26" y="428" font-size="8" fill="#c44" text-anchor="start">Stores activations for ALL layers → high memory</text>

  <!-- Right panel: TinyTL -->
  <rect x="370" y="14" width="296" height="428" rx="6" fill="#fafafa" stroke="#bbb" stroke-width="1.2"/>
  <rect x="370" y="14" width="296" height="30" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.2"/>
  <rect x="370" y="30" width="296" height="14" fill="#d4edda"/>
  <text x="518" y="34" font-size="11" font-weight="700" fill="#333" text-anchor="middle">TinyTL</text>

  <!-- Neural network: frozen backbone + tiny bias terms -->
  <!-- Layer labels -->
  <text x="382" y="76" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Input</text>
  <text x="382" y="136" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 1</text>
  <text x="382" y="196" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 2</text>
  <text x="382" y="256" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 3</text>
  <text x="382" y="316" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Layer 4</text>
  <text x="382" y="376" font-size="8.5" fill="#555" text-anchor="start" font-weight="600">Head</text>

  <!-- Frozen backbone layers (gray) -->
  <rect x="434" y="60" width="152" height="26" rx="3" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="510" y="77" font-size="8.5" fill="#777" text-anchor="middle">frozen backbone</text>
  <!-- Bias dot -->
  <circle cx="428" cy="73" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="428" y="77" font-size="7" fill="#c87b2a" text-anchor="middle">b</text>

  <rect x="434" y="120" width="152" height="26" rx="3" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="510" y="137" font-size="8.5" fill="#777" text-anchor="middle">frozen backbone</text>
  <circle cx="428" cy="133" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="428" y="137" font-size="7" fill="#c87b2a" text-anchor="middle">b</text>

  <rect x="434" y="180" width="152" height="26" rx="3" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="510" y="197" font-size="8.5" fill="#777" text-anchor="middle">frozen backbone</text>
  <circle cx="428" cy="193" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="428" y="197" font-size="7" fill="#c87b2a" text-anchor="middle">b</text>

  <!-- Small residual module between layer 2 and 3 -->
  <rect x="434" y="214" width="152" height="18" rx="3" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="510" y="227" font-size="8" fill="#7a4a10" text-anchor="middle" font-weight="600">residual adapter (trainable)</text>

  <rect x="434" y="240" width="152" height="26" rx="3" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="510" y="257" font-size="8.5" fill="#777" text-anchor="middle">frozen backbone</text>
  <circle cx="428" cy="253" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="428" y="257" font-size="7" fill="#c87b2a" text-anchor="middle">b</text>

  <rect x="434" y="298" width="152" height="26" rx="3" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="510" y="315" font-size="8.5" fill="#777" text-anchor="middle">frozen backbone</text>
  <circle cx="428" cy="311" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="428" y="315" font-size="7" fill="#c87b2a" text-anchor="middle">b</text>

  <rect x="434" y="358" width="152" height="26" rx="3" fill="#c87b2a" stroke="#7a4a10" stroke-width="1.2"/>
  <text x="510" y="375" font-size="8.5" fill="#fff" text-anchor="middle" font-weight="600">classifier head (trainable)</text>

  <!-- Connecting lines -->
  <line x1="510" y1="86" x2="510" y2="120" stroke="#999" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="510" y1="146" x2="510" y2="180" stroke="#999" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="510" y1="206" x2="510" y2="214" stroke="#c87b2a" stroke-width="1"/>
  <line x1="510" y1="232" x2="510" y2="240" stroke="#c87b2a" stroke-width="1"/>
  <line x1="510" y1="266" x2="510" y2="298" stroke="#999" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="510" y1="324" x2="510" y2="358" stroke="#c87b2a" stroke-width="1"/>

  <!-- Memory bar: small footprint -->
  <rect x="604" y="58" width="22" height="328" rx="3" fill="#e0e0e0" stroke="#bbb" stroke-width="0.8"/>
  <!-- Only small portion filled -->
  <rect x="604" y="258" width="22" height="128" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
  <text x="615" y="54" font-size="8" fill="#3d9e5a" text-anchor="middle" font-weight="600">Mem</text>
  <text x="615" y="402" font-size="7.5" fill="#3d9e5a" text-anchor="middle">small</text>

  <!-- Legend -->
  <rect x="434" y="400" width="12" height="10" rx="1" fill="#e0e0e0" stroke="#999" stroke-width="0.8"/>
  <text x="452" y="410" font-size="8.5" fill="#777">Frozen (backbone)</text>
  <circle cx="440" cy="426" r="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.2"/>
  <text x="452" y="430" font-size="8.5" fill="#c87b2a">Trainable (bias + residual)</text>

  <!-- Comparison arrow in center -->
  <text x="340" y="220" font-size="22" fill="#bbb" text-anchor="middle">vs.</text>
  <text x="340" y="260" font-size="8.5" fill="#3d9e5a" text-anchor="middle" font-weight="600">~10× less memory</text>
  <text x="340" y="275" font-size="8" fill="#777" text-anchor="middle">activations not stored</text>
  <text x="340" y="290" font-size="8" fill="#777" text-anchor="middle">for frozen layers</text>

  <text x="340" y="450" font-size="9" fill="#999" text-anchor="middle" font-style="italic">TinyTL freezes the backbone, training only bias terms and a small residual module to minimize memory.</text>
</svg>
