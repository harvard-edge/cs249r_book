<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arr" markerWidth="9" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L9,3.5 L0,7 Z" fill="#333"/>
    </marker>
    <marker id="arr-gray" markerWidth="9" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L9,3.5 L0,7 Z" fill="#999"/>
    </marker>
    <marker id="arr-green" markerWidth="9" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L9,3.5 L0,7 Z" fill="#3d9e5a"/>
    </marker>
    <marker id="arr-blue" markerWidth="9" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L9,3.5 L0,7 Z" fill="#4a90c4"/>
    </marker>
    <marker id="arr-orange" markerWidth="9" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L9,3.5 L0,7 Z" fill="#c87b2a"/>
    </marker>
  </defs>

  <rect width="680" height="460" fill="#fff"/>

  <!-- Start: Deploy Model -->
  <rect x="240" y="12" width="200" height="36" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.8"/>
  <text x="340" y="28" font-size="10.5" font-weight="700" fill="#1a5a8a" text-anchor="middle">Deploy Model to Edge Device</text>
  <text x="340" y="42" font-size="9" fill="#4a90c4" text-anchor="middle">static model shipped to hardware</text>

  <!-- Arrow down -->
  <line x1="340" y1="48" x2="340" y2="66" stroke="#333" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- Decision 1: Adaptation needed? -->
  <polygon points="340,68 440,100 340,132 240,100" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="340" y="96" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">Adaptation needed</text>
  <text x="340" y="110" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">post-deploy?</text>

  <!-- No branch → Static deployment -->
  <line x1="440" y1="100" x2="540" y2="100" stroke="#999" stroke-width="1.5" marker-end="url(#arr-gray)"/>
  <text x="487" y="94" font-size="8.5" fill="#999" text-anchor="middle" font-weight="600">No</text>
  <rect x="542" y="82" width="124" height="36" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1.5"/>
  <text x="604" y="97" font-size="9" font-weight="700" fill="#555" text-anchor="middle">Static Deployment</text>
  <text x="604" y="110" font-size="8" fill="#777" text-anchor="middle">no learning needed</text>

  <!-- Done indicator for static -->
  <circle cx="604" cy="130" r="10" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="604" y="134" font-size="9" fill="#555" text-anchor="middle" font-weight="700">✓</text>

  <!-- Yes branch → down -->
  <line x1="340" y1="132" x2="340" y2="152" stroke="#333" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="350" y="144" font-size="8.5" fill="#333" font-weight="600">Yes</text>

  <!-- Decision 2: Memory < 1 MB? -->
  <polygon points="340,154 440,186 340,218 240,186" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="340" y="182" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">Memory</text>
  <text x="340" y="196" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">&lt; 1 MB?</text>

  <!-- Yes branch → Bias-only -->
  <line x1="240" y1="186" x2="140" y2="186" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arr-orange)"/>
  <text x="193" y="180" font-size="8.5" fill="#c87b2a" text-anchor="middle" font-weight="600">Yes</text>
  <rect x="14" y="168" width="124" height="36" rx="5" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
  <text x="76" y="183" font-size="8.5" font-weight="700" fill="#7a4a10" text-anchor="middle">Bias-only</text>
  <text x="76" y="197" font-size="8.5" font-weight="700" fill="#7a4a10" text-anchor="middle">Fine-tuning</text>

  <!-- Annotation for bias-only -->
  <rect x="14" y="210" width="124" height="44" rx="3" fill="#fafafa" stroke="#e0e0e0" stroke-width="0.8"/>
  <text x="76" y="225" font-size="7.5" fill="#777" text-anchor="middle">Update bias terms only</text>
  <text x="76" y="238" font-size="7.5" fill="#777" text-anchor="middle">Backbone frozen — no</text>
  <text x="76" y="250" font-size="7.5" fill="#777" text-anchor="middle">activation storage needed</text>

  <!-- No branch → down -->
  <line x1="340" y1="218" x2="340" y2="238" stroke="#333" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="350" y="230" font-size="8.5" fill="#333" font-weight="600">No</text>

  <!-- Decision 3: Labeled data available? -->
  <polygon points="340,240 440,272 340,304 240,272" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="340" y="268" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">Labeled data</text>
  <text x="340" y="282" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">available?</text>

  <!-- No branch → Self-supervised -->
  <line x1="240" y1="272" x2="140" y2="272" stroke="#4a90c4" stroke-width="1.5" marker-end="url(#arr-blue)"/>
  <text x="193" y="266" font-size="8.5" fill="#4a90c4" text-anchor="middle" font-weight="600">No</text>
  <rect x="14" y="254" width="124" height="36" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.5"/>
  <text x="76" y="269" font-size="8.5" font-weight="700" fill="#1a5a8a" text-anchor="middle">Self-supervised /</text>
  <text x="76" y="283" font-size="8.5" font-weight="700" fill="#1a5a8a" text-anchor="middle">Test-time Adapt.</text>

  <!-- Annotation for self-supervised -->
  <rect x="14" y="296" width="124" height="44" rx="3" fill="#fafafa" stroke="#e0e0e0" stroke-width="0.8"/>
  <text x="76" y="311" font-size="7.5" fill="#777" text-anchor="middle">Contrastive learning,</text>
  <text x="76" y="324" font-size="7.5" fill="#777" text-anchor="middle">entropy minimization,</text>
  <text x="76" y="337" font-size="7.5" fill="#777" text-anchor="middle">test-time batch norm</text>

  <!-- Yes branch → down -->
  <line x1="340" y1="304" x2="340" y2="324" stroke="#333" stroke-width="1.5" marker-end="url(#arr)"/>
  <text x="350" y="316" font-size="8.5" fill="#333" font-weight="600">Yes</text>

  <!-- Decision 4: Privacy constraints? -->
  <polygon points="340,326 440,358 340,390 240,358" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="340" y="354" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">Privacy</text>
  <text x="340" y="368" font-size="9" font-weight="700" fill="#7a4a10" text-anchor="middle">constraints?</text>

  <!-- Yes branch → Federated -->
  <line x1="240" y1="358" x2="140" y2="358" stroke="#3d9e5a" stroke-width="1.5" marker-end="url(#arr-green)"/>
  <text x="193" y="352" font-size="8.5" fill="#3d9e5a" text-anchor="middle" font-weight="600">Yes</text>
  <rect x="14" y="340" width="124" height="36" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="76" y="355" font-size="8.5" font-weight="700" fill="#1a6a3a" text-anchor="middle">Federated</text>
  <text x="76" y="369" font-size="8.5" font-weight="700" fill="#1a6a3a" text-anchor="middle">Learning</text>

  <!-- Annotation for federated -->
  <rect x="14" y="382" width="124" height="44" rx="3" fill="#fafafa" stroke="#e0e0e0" stroke-width="0.8"/>
  <text x="76" y="397" font-size="7.5" fill="#777" text-anchor="middle">FedAvg across devices,</text>
  <text x="76" y="410" font-size="7.5" fill="#777" text-anchor="middle">diff. privacy optional,</text>
  <text x="76" y="423" font-size="7.5" fill="#777" text-anchor="middle">no raw data leaves</text>

  <!-- No branch → On-device fine-tuning -->
  <line x1="440" y1="358" x2="540" y2="358" stroke="#3d9e5a" stroke-width="1.5" marker-end="url(#arr-green)"/>
  <text x="487" y="352" font-size="8.5" fill="#3d9e5a" text-anchor="middle" font-weight="600">No</text>
  <rect x="542" y="340" width="124" height="36" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="604" y="355" font-size="8.5" font-weight="700" fill="#1a6a3a" text-anchor="middle">On-Device Fine-</text>
  <text x="604" y="369" font-size="8.5" font-weight="700" fill="#1a6a3a" text-anchor="middle">tuning + Adapters</text>

  <!-- Annotation for on-device FT -->
  <rect x="542" y="382" width="124" height="44" rx="3" fill="#fafafa" stroke="#e0e0e0" stroke-width="0.8"/>
  <text x="604" y="397" font-size="7.5" fill="#777" text-anchor="middle">LoRA / adapter modules,</text>
  <text x="604" y="410" font-size="7.5" fill="#777" text-anchor="middle">local gradient updates,</text>
  <text x="604" y="423" font-size="7.5" fill="#777" text-anchor="middle">head + adapter trainable</text>

  <!-- Legend: diamond = decision, rect = action -->
  <rect x="240" y="432" width="200" height="22" rx="3" fill="#fafafa" stroke="#e0e0e0" stroke-width="0.8"/>
  <polygon points="255,443 264,449 255,455 246,449" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
  <text x="270" y="449" font-size="8" fill="#777" dominant-baseline="middle">Decision</text>
  <rect x="316" y="441" width="20" height="14" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
  <text x="342" y="449" font-size="8" fill="#777" dominant-baseline="middle">Action / Strategy</text>
</svg>
