<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 680 460" xmlns="http://www.w3.org/2000/svg" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#555"/>
    </marker>
  </defs>

  <!-- Panel labels -->
  <text x="170" y="24" text-anchor="middle" font-size="12" font-weight="700" fill="#333">Training Distribution</text>
  <text x="510" y="24" text-anchor="middle" font-size="12" font-weight="700" fill="#333">Test Distribution (Deployment)</text>

  <!-- ========== LEFT PANEL: Training Distribution ========== -->
  <g transform="translate(15, 38)">
    <!-- Background -->
    <rect x="15" y="5" width="300" height="320" rx="6" fill="#fafafa" stroke="#ddd" stroke-width="0.8"/>

    <!-- Axes -->
    <line x1="45" y1="300" x2="295" y2="300" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
    <line x1="45" y1="300" x2="45" y2="25" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
    <text x="175" y="318" text-anchor="middle" font-size="9.5" fill="#555">Feature X1</text>
    <text x="25" y="162" text-anchor="middle" font-size="9.5" fill="#555" transform="rotate(-90, 25, 162)">Feature X2</text>

    <!-- Decision boundary (learned) -->
    <line x1="55" y1="50" x2="285" y2="285" stroke="#a31f34" stroke-width="1.5" stroke-dasharray="6,3"/>
    <text x="245" y="52" font-size="8.5" fill="#a31f34" font-weight="600">Learned boundary</text>

    <!-- Class A: Blue cluster (upper left) -->
    <circle cx="80" cy="80" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="95" cy="95" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="75" cy="110" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="100" cy="120" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="85" cy="135" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="110" cy="105" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="90" cy="150" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="70" cy="145" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="105" cy="140" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="115" cy="130" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="80" cy="165" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="60" cy="125" r="5" fill="#4a90c4" opacity="0.8"/>

    <!-- Class B: Green cluster (lower right) -->
    <circle cx="175" cy="185" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="190" cy="200" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="200" cy="220" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="210" cy="240" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="220" cy="210" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="235" cy="230" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="195" cy="250" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="250" cy="250" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="240" cy="265" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="225" cy="260" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="260" cy="270" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="180" cy="235" r="5" fill="#3d9e5a" opacity="0.8"/>

    <!-- Labels -->
    <text x="65" y="72" font-size="9" font-weight="600" fill="#4a90c4">Class A</text>
    <text x="240" y="195" font-size="9" font-weight="600" fill="#3d9e5a">Class B</text>

    <!-- Checkmark annotation -->
    <text x="165" y="290" text-anchor="middle" font-size="9" fill="#3d9e5a" font-weight="700">Correctly separated</text>
  </g>

  <!-- ========== ARROW BETWEEN PANELS ========== -->
  <!-- Box centered in the gap between panels (left panel ends ~330, right starts ~370) -->
  <g transform="translate(300, 180)">
    <rect x="0" y="0" width="76" height="34" rx="5" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
    <text x="38" y="15" text-anchor="middle" font-size="9" font-weight="700" fill="#c87b2a">Deployment</text>
    <text x="38" y="28" text-anchor="middle" font-size="8" fill="#c87b2a">Time passes</text>
    <!-- Arrows flanking the box -->
    <line x1="-10" y1="17" x2="-1" y2="17" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arrow)"/>
    <line x1="77" y1="17" x2="88" y2="17" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arrow)"/>
  </g>

  <!-- ========== RIGHT PANEL: Test Distribution ========== -->
  <g transform="translate(355, 38)">
    <!-- Background -->
    <rect x="15" y="5" width="300" height="320" rx="6" fill="#fdf5f5" stroke="#e0d0d0" stroke-width="0.8"/>

    <!-- Axes -->
    <line x1="45" y1="300" x2="295" y2="300" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
    <line x1="45" y1="300" x2="45" y2="25" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
    <text x="175" y="318" text-anchor="middle" font-size="9.5" fill="#555">Feature X1</text>
    <text x="25" y="162" text-anchor="middle" font-size="9.5" fill="#555" transform="rotate(-90, 25, 162)">Feature X2</text>

    <!-- Same decision boundary (the model has not changed) -->
    <line x1="55" y1="50" x2="285" y2="285" stroke="#a31f34" stroke-width="1.5" stroke-dasharray="6,3"/>
    <text x="245" y="52" font-size="8.5" fill="#a31f34" font-weight="600">Same boundary</text>

    <!-- Class A: Blue cluster SHIFTED right/down (covariate shift) -->
    <circle cx="140" cy="140" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="155" cy="155" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="145" cy="170" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="165" cy="165" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="150" cy="185" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="170" cy="180" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="135" cy="195" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="160" cy="200" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="175" cy="195" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="180" cy="175" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="130" cy="160" r="5" fill="#4a90c4" opacity="0.8"/>
    <circle cx="160" cy="148" r="5" fill="#4a90c4" opacity="0.8"/>

    <!-- Class B: Green cluster (same position) -->
    <circle cx="200" cy="220" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="210" cy="240" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="220" cy="210" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="235" cy="230" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="195" cy="250" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="250" cy="250" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="240" cy="265" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="225" cy="260" r="5" fill="#3d9e5a" opacity="0.8"/>
    <circle cx="260" cy="270" r="5" fill="#3d9e5a" opacity="0.8"/>

    <!-- Misclassified samples (red X marks) Class A points that fell on wrong side -->
    <line x1="167" y1="161" x2="177" y2="171" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="177" y1="161" x2="167" y2="171" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="172" y1="176" x2="182" y2="186" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="182" y1="176" x2="172" y2="186" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="177" y1="191" x2="187" y2="201" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="187" y1="191" x2="177" y2="201" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="162" y1="196" x2="172" y2="206" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>
    <line x1="172" y1="196" x2="162" y2="206" stroke="#c44" stroke-width="2.5" stroke-linecap="round"/>

    <!-- Labels -->
    <text x="120" y="132" font-size="9" font-weight="600" fill="#4a90c4">Class A (shifted)</text>
    <text x="250" y="207" font-size="9" font-weight="600" fill="#3d9e5a">Class B</text>

    <!-- Annotation for misclassified region â€” shifted left to avoid clipping -->
    <rect x="155" y="118" width="100" height="36" rx="4" fill="white" stroke="#c44" stroke-width="0.8" opacity="0.9"/>
    <text x="205" y="134" text-anchor="middle" font-size="8" fill="#c44" font-weight="600">Misclassified</text>
    <text x="205" y="147" text-anchor="middle" font-size="8" fill="#c44">Wrong side of boundary</text>
    <line x1="205" y1="154" x2="180" y2="175" stroke="#c44" stroke-width="0.8" stroke-dasharray="3,2"/>

    <!-- Error annotation -->
    <text x="165" y="290" text-anchor="middle" font-size="9" fill="#c44" font-weight="700">Boundary now incorrect</text>
  </g>

  <!-- Bottom explanation -->
  <rect x="80" y="385" width="520" height="55" rx="5" fill="#f7f7f7" stroke="#bbb" stroke-width="1"/>
  <text x="340" y="405" text-anchor="middle" font-size="9.5" font-weight="600" fill="#333">The model boundary stayed the same, but the world changed</text>
  <text x="340" y="420" text-anchor="middle" font-size="9" fill="#555">Covariate shift causes misclassification because the learned decision boundary</text>
  <text x="340" y="433" text-anchor="middle" font-size="9" fill="#555">was optimized for the training distribution, not the deployment distribution</text>

  <!-- Legend -->
  <g transform="translate(100, 450)">
    <circle cx="0" cy="0" r="4.5" fill="#4a90c4" opacity="0.8"/>
    <text x="10" y="4" font-size="8.5" fill="#555">Class A</text>
    <circle cx="70" cy="0" r="4.5" fill="#3d9e5a" opacity="0.8"/>
    <text x="80" y="4" font-size="8.5" fill="#555">Class B</text>
    <line x1="140" y1="-4" x2="148" y2="4" stroke="#c44" stroke-width="2" stroke-linecap="round"/>
    <line x1="148" y1="-4" x2="140" y2="4" stroke="#c44" stroke-width="2" stroke-linecap="round"/>
    <text x="156" y="4" font-size="8.5" fill="#555">Misclassified</text>
    <line x1="240" y1="0" x2="270" y2="0" stroke="#a31f34" stroke-width="1.2" stroke-dasharray="5,3"/>
    <text x="278" y="4" font-size="8.5" fill="#555">Decision boundary</text>
  </g>
</svg>
