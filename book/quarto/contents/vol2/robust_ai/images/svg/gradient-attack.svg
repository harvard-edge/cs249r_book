<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <rect width="680" height="460" fill="#fafafa" rx="3"/>
  <rect x="10" y="10" width="660" height="440" fill="#fafafa" stroke="#e0e0e0" stroke-width="1" rx="4"/>

  <!-- Step labels at top -->
  <text x="340" y="38" text-anchor="middle" font-size="12" fill="#999" font-style="italic">Fast Gradient Sign Method (FGSM) — Adversarial Example Generation</text>

  <!-- ──────────────────────────────────────────── -->
  <!-- STEP 1: Original image (blue) -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="30" y="70" width="130" height="100" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="2.5"/>
  <!-- Simulated image content — simple pixel blocks -->
  <rect x="40" y="80" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.7"/>
  <rect x="64" y="80" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.9"/>
  <rect x="88" y="80" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.5"/>
  <rect x="112" y="80" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.8"/>
  <rect x="40" y="104" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.6"/>
  <rect x="64" y="104" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.8"/>
  <rect x="88" y="104" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.7"/>
  <rect x="112" y="104" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.6"/>
  <rect x="40" y="128" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.6"/>
  <rect x="64" y="128" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.5"/>
  <rect x="88" y="128" width="22" height="22" rx="2" fill="#4a90c4" opacity="0.9"/>
  <rect x="112" y="128" width="22" height="22" rx="2" fill="#cfe2f3" opacity="0.7"/>
  <text x="95" y="185" text-anchor="middle" font-size="11" font-weight="bold" fill="#1a4f7a">x: Panda</text>
  <text x="95" y="200" text-anchor="middle" font-size="10" fill="#4a90c4">conf = 0.99</text>
  <text x="95" y="215" text-anchor="middle" font-size="10" fill="#555">Original Input</text>

  <!-- Arrow 1→2 -->
  <line x1="162" y1="120" x2="195" y2="120" stroke="#555" stroke-width="1.8"/>
  <polygon points="197,120 188,115 188,125" fill="#555"/>

  <!-- ──────────────────────────────────────────── -->
  <!-- STEP 2: Compute gradient -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="198" y="78" width="148" height="84" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1.8"/>
  <text x="272" y="104" text-anchor="middle" font-size="12" font-weight="bold" fill="#444">Compute Gradient</text>
  <text x="272" y="122" text-anchor="middle" font-size="13" fill="#555" font-style="italic">∇</text>
  <text x="287" y="122" text-anchor="middle" font-size="11" fill="#555" font-style="italic">ₓ L(f(x), y)</text>
  <text x="272" y="140" text-anchor="middle" font-size="10" fill="#777">backprop w.r.t. input</text>
  <text x="272" y="154" text-anchor="middle" font-size="10" fill="#777">not parameters</text>

  <!-- Arrow 2→3 -->
  <line x1="348" y1="120" x2="378" y2="120" stroke="#555" stroke-width="1.8"/>
  <polygon points="380,120 371,115 371,125" fill="#555"/>

  <!-- ──────────────────────────────────────────── -->
  <!-- STEP 3: Sign of gradient (perturbation) -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="382" y="78" width="128" height="84" rx="5" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="446" y="100" text-anchor="middle" font-size="12" font-weight="bold" fill="#7a3f00">Perturbation δ</text>
  <text x="446" y="118" text-anchor="middle" font-size="12" fill="#c87b2a">ε · sign(∇ₓL)</text>
  <!-- sign pattern grid -->
  <text x="398" y="138" font-size="11" fill="#c44" font-weight="bold">+</text>
  <text x="414" y="138" font-size="11" fill="#3d9e5a" font-weight="bold">−</text>
  <text x="430" y="138" font-size="11" fill="#c44" font-weight="bold">+</text>
  <text x="446" y="138" font-size="11" fill="#3d9e5a" font-weight="bold">−</text>
  <text x="462" y="138" font-size="11" fill="#c44" font-weight="bold">+</text>
  <text x="478" y="138" font-size="11" fill="#3d9e5a" font-weight="bold">−</text>
  <text x="446" y="155" text-anchor="middle" font-size="10" fill="#777">ε = 0.007 (invisible)</text>

  <!-- Plus symbol -->
  <text x="523" y="126" text-anchor="middle" font-size="28" font-weight="bold" fill="#555">+</text>

  <!-- Arrow 3→4 -->
  <line x1="534" y1="120" x2="558" y2="120" stroke="#555" stroke-width="1.8"/>
  <polygon points="560,120 551,115 551,125" fill="#555"/>

  <!-- ──────────────────────────────────────────── -->
  <!-- STEP 4: Adversarial image (red) -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="562" y="70" width="100" height="100" rx="5" fill="#f9d6d5" stroke="#c44" stroke-width="2.5"/>
  <!-- Same-looking image but adversarial (slightly different colors) -->
  <rect x="572" y="80" width="18" height="18" rx="2" fill="#c44" opacity="0.6"/>
  <rect x="592" y="80" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.9"/>
  <rect x="612" y="80" width="18" height="18" rx="2" fill="#c44" opacity="0.45"/>
  <rect x="632" y="80" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.75"/>
  <rect x="572" y="100" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.55"/>
  <rect x="592" y="100" width="18" height="18" rx="2" fill="#c44" opacity="0.7"/>
  <rect x="612" y="100" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.65"/>
  <rect x="632" y="100" width="18" height="18" rx="2" fill="#c44" opacity="0.5"/>
  <rect x="572" y="120" width="18" height="18" rx="2" fill="#c44" opacity="0.5"/>
  <rect x="592" y="120" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.4"/>
  <rect x="612" y="120" width="18" height="18" rx="2" fill="#c44" opacity="0.8"/>
  <rect x="632" y="120" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.6"/>
  <rect x="572" y="140" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.7"/>
  <rect x="592" y="140" width="18" height="18" rx="2" fill="#c44" opacity="0.5"/>
  <rect x="612" y="140" width="18" height="18" rx="2" fill="#f9d6d5" opacity="0.6"/>
  <rect x="632" y="140" width="18" height="18" rx="2" fill="#c44" opacity="0.4"/>

  <text x="612" y="185" text-anchor="middle" font-size="11" font-weight="bold" fill="#a31f34">x': Gibbon</text>
  <text x="612" y="200" text-anchor="middle" font-size="10" fill="#c44">conf = 0.87</text>
  <text x="612" y="215" text-anchor="middle" font-size="10" fill="#555">Adversarial Input</text>

  <!-- ──────────────────────────────────────────── -->
  <!-- Equation box in center -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="80" y="245" width="520" height="50" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="340" y="265" text-anchor="middle" font-size="13" font-weight="bold" fill="#333">x' = x + δ,   where   δ = ε · sign(∇ₓ L(f(x), y))</text>
  <text x="340" y="284" text-anchor="middle" font-size="11" fill="#666">Perturbation is imperceptible to humans (ε ≈ 0.007) but sufficient to cross the decision boundary</text>

  <!-- ──────────────────────────────────────────── -->
  <!-- Key insight annotations -->
  <!-- ──────────────────────────────────────────── -->
  <rect x="50" y="315" width="275" height="50" rx="4" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.2"/>
  <text x="187" y="334" text-anchor="middle" font-size="11" font-weight="bold" fill="#1e5e35">Human perception: identical images</text>
  <text x="187" y="352" text-anchor="middle" font-size="10" fill="#3d9e5a">L∞ distance = ε = 0.007 per pixel</text>

  <rect x="355" y="315" width="275" height="50" rx="4" fill="#f9d6d5" stroke="#c44" stroke-width="1.2"/>
  <text x="492" y="334" text-anchor="middle" font-size="11" font-weight="bold" fill="#a31f34">Model perception: completely different</text>
  <text x="492" y="352" text-anchor="middle" font-size="10" fill="#c44">Classification flips with high confidence</text>

  <!-- Bottom annotation -->
  <rect x="30" y="390" width="620" height="34" rx="3" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
  <text x="340" y="404" text-anchor="middle" font-size="11" font-weight="bold" fill="#7a3f00">White-box attack: requires access to model gradients.</text>
  <text x="340" y="418" text-anchor="middle" font-size="10" fill="#c87b2a">Adversarial examples often transfer to other models (black-box transferability).</text>
</svg>
