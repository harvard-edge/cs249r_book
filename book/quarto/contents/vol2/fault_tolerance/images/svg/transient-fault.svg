<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrowOr" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c87b2a"/>
    </marker>
    <marker id="arrowRed" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c44"/>
    </marker>
    <marker id="arrowGray" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#888"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- ══════════ CROSS-SECTION OF IC PACKAGE ══════════ -->
  <!-- The cross-section occupies roughly x=55..625, y=55..360 -->

  <!-- Layer 1: Metal / Interconnect (top layer) -->
  <rect x="55" y="55" width="570" height="38" rx="4" fill="#e8e8e8" stroke="#bbb" stroke-width="1.2"/>
  <text x="340" y="73" text-anchor="middle" font-size="10" font-weight="600" fill="#666">Metal Interconnect Layer (Cu)</text>
  <text x="340" y="86" text-anchor="middle" font-size="8.5" fill="#999">wiring, vias, power distribution</text>

  <!-- Layer 2: Gate Oxide / Transistor Channel -->
  <rect x="55" y="93" width="570" height="50" rx="0" fill="#d0e4f5" stroke="#4a90c4" stroke-width="1.2"/>
  <text x="130" y="116" text-anchor="middle" font-size="10" font-weight="600" fill="#1a4a7a">Gate Oxide</text>
  <text x="130" y="129" text-anchor="middle" font-size="8.5" fill="#4a90c4">~1 nm thick</text>

  <!-- SRAM cell schematic inside oxide layer -->
  <rect x="280" y="98" width="120" height="40" rx="4" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.5"/>
  <text x="340" y="116" text-anchor="middle" font-size="9" font-weight="600" fill="#1a4a7a">Storage Node</text>
  <text x="340" y="128" text-anchor="middle" font-size="9" fill="#4a90c4">(bit state: 0)</text>

  <!-- Layer 3: N-well / P-well (silicon active region) -->
  <rect x="55" y="143" width="570" height="70" rx="0" fill="#b8d4e8" stroke="#3a7db8" stroke-width="1.2"/>
  <text x="130" y="175" text-anchor="middle" font-size="10" font-weight="600" fill="#1a4a7a">Silicon N-well</text>
  <text x="130" y="188" text-anchor="middle" font-size="8.5" fill="#4a90c4">transistor body</text>

  <!-- Individual transistors in N-well -->
  <!-- Source, drain, gate of a MOSFET (simplified) -->
  <rect x="282" y="150" width="36" height="30" rx="2" fill="#4a90c4" fill-opacity="0.3" stroke="#4a90c4" stroke-width="1"/>
  <text x="300" y="165" text-anchor="middle" font-size="8" fill="#1a4a7a">M1</text>
  <text x="300" y="175" text-anchor="middle" font-size="7" fill="#1a4a7a">NMOS</text>

  <rect x="326" y="150" width="36" height="30" rx="2" fill="#4a90c4" fill-opacity="0.3" stroke="#4a90c4" stroke-width="1"/>
  <text x="344" y="165" text-anchor="middle" font-size="8" fill="#1a4a7a">M2</text>
  <text x="344" y="175" text-anchor="middle" font-size="7" fill="#1a4a7a">PMOS</text>

  <!-- Layer 4: P-substrate (bulk silicon) -->
  <rect x="55" y="213" width="570" height="100" rx="0" fill="#8ab8da" stroke="#2d6fa8" stroke-width="1.2"/>
  <text x="130" y="258" text-anchor="middle" font-size="10" font-weight="600" fill="white">P-Substrate</text>
  <text x="130" y="272" text-anchor="middle" font-size="8.5" fill="#cfe2f3">(bulk silicon)</text>

  <!-- Layer 5: Packaging / Die attach -->
  <rect x="55" y="313" width="570" height="46" rx="0" fill="#c8dde8" stroke="#3a7db8" stroke-width="1.2"/>
  <text x="340" y="335" text-anchor="middle" font-size="10" font-weight="600" fill="#1a4a7a">Die Attach / Underfill</text>
  <text x="340" y="348" text-anchor="middle" font-size="8.5" fill="#4a90c4">epoxy bonding layer</text>

  <!-- Layer 6: Substrate/PCB -->
  <rect x="55" y="359" width="570" height="30" rx="0" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="340" y="378" text-anchor="middle" font-size="10" fill="#666">Substrate (organic / ceramic)</text>

  <!-- ══════════ COSMIC RAY PARTICLE ══════════ -->
  <!-- Diagonal track entering from upper left, striking the N-well transistor -->
  <line x1="200" y1="38" x2="310" y2="158" stroke="#c44" stroke-width="3" stroke-dasharray="6,3" opacity="0.85" marker-end="url(#arrowRed)"/>

  <!-- Particle label -->
  <text x="148" y="30" font-size="10" font-weight="700" fill="#c44">Alpha particle /</text>
  <text x="148" y="43" font-size="10" font-weight="700" fill="#c44">cosmic ray</text>

  <!-- Track label -->
  <text x="218" y="78" font-size="8.5" fill="#c44" font-style="italic">ionizing track</text>

  <!-- ══════════ CHARGE DEPOSITION CLOUD ══════════ -->
  <ellipse cx="315" cy="165" rx="30" ry="22" fill="#fdebd0" stroke="#c87b2a" stroke-width="2" opacity="0.9"/>
  <text x="315" y="161" text-anchor="middle" font-size="8" fill="#8a4000" font-weight="600">charge</text>
  <text x="315" y="172" text-anchor="middle" font-size="8" fill="#8a4000">deposit</text>

  <!-- Charge annotation arrow -->
  <line x1="360" y1="150" x2="347" y2="162" stroke="#c87b2a" stroke-width="1.2" marker-end="url(#arrowOr)"/>
  <text x="380" y="148" font-size="9" fill="#c87b2a" font-weight="600">Charge deposition</text>
  <text x="380" y="160" font-size="8.5" fill="#c87b2a">~10 fC flips node voltage</text>

  <!-- ══════════ BIT STATE DISRUPTION ══════════ -->
  <!-- Arrow from charge cloud to storage node -->
  <line x1="320" y1="143" x2="330" y2="110" stroke="#c44" stroke-width="1.5" stroke-dasharray="3,2" marker-end="url(#arrowRed)"/>

  <!-- Storage node after flip -->
  <rect x="400" y="95" width="130" height="44" rx="4" fill="#f9d6d5" stroke="#c44" stroke-width="1.8"/>
  <text x="465" y="115" text-anchor="middle" font-size="9.5" font-weight="700" fill="#900">Bit state disrupted!</text>
  <text x="465" y="130" text-anchor="middle" font-size="9" fill="#c44">0 → 1 (SEU event)</text>

  <!-- Connection from storage node box to disrupted box -->
  <line x1="400" y1="118" x2="401" y2="118" stroke="#c44" stroke-width="1"/>
  <path d="M402 118 L400 118" fill="none" stroke="#c44" stroke-width="1"/>

  <!-- ══════════ LAYER LABELS (right margin) ══════════ -->
  <g font-size="9" fill="#888">
    <text x="630" y="76">Metal</text>
    <text x="630" y="124">Oxide</text>
    <text x="630" y="178">N-well</text>
    <text x="630" y="260">Substrate</text>
    <text x="630" y="338">Die attach</text>
    <text x="630" y="372">Package</text>
  </g>

  <!-- Bracket for layer -->
  <line x1="627" y1="55" x2="627" y2="93" stroke="#bbb" stroke-width="0.8"/>
  <line x1="627" y1="93" x2="627" y2="143" stroke="#bbb" stroke-width="0.8"/>
  <line x1="627" y1="143" x2="627" y2="213" stroke="#bbb" stroke-width="0.8"/>
  <line x1="627" y1="213" x2="627" y2="313" stroke="#bbb" stroke-width="0.8"/>
  <line x1="627" y1="313" x2="627" y2="360" stroke="#bbb" stroke-width="0.8"/>
  <line x1="627" y1="360" x2="627" y2="390" stroke="#bbb" stroke-width="0.8"/>

  <!-- ══════════ TEMPORAL SEQUENCE (below) ══════════ -->
  <rect x="55" y="400" width="570" height="48" rx="5" fill="white" stroke="#e0e0e0" stroke-width="1"/>
  <text x="130" y="418" text-anchor="middle" font-size="9" fill="#3d9e5a" font-weight="600">Before SEU: bit = 0</text>
  <text x="130" y="432" text-anchor="middle" font-size="8.5" fill="#555">storage node at logic-low voltage</text>

  <line x1="210" y1="418" x2="250" y2="418" stroke="#c44" stroke-width="1.2" marker-end="url(#arrowRed)"/>
  <text x="230" y="413" text-anchor="middle" font-size="8" fill="#c44">particle</text>
  <text x="230" y="425" text-anchor="middle" font-size="8" fill="#c44">strike</text>

  <text x="340" y="418" text-anchor="middle" font-size="9" fill="#c44" font-weight="600">During SEU: transient pulse</text>
  <text x="340" y="432" text-anchor="middle" font-size="8.5" fill="#c44">charge injection flips node voltage</text>

  <line x1="430" y1="418" x2="460" y2="418" stroke="#888" stroke-width="1.2" marker-end="url(#arrowGray)"/>

  <text x="555" y="418" text-anchor="middle" font-size="9" fill="#888" font-weight="600">After SEU: bit = 1</text>
  <text x="555" y="432" text-anchor="middle" font-size="8.5" fill="#888">ECC corrects (if enabled) or silent corruption</text>
</svg>
