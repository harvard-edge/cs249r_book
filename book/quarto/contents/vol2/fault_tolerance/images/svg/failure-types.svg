<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- Divider -->
  <line x1="340" y1="20" x2="340" y2="420" stroke="#ddd" stroke-width="1.5" stroke-dasharray="6,4"/>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LEFT PANEL: Fail-Stop Failure -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="170" y="44" text-anchor="middle" font-size="13" font-weight="700" fill="#333">Fail-Stop Failure</text>

  <!-- Coordinator (top-center) -->
  <rect x="115" y="60" width="110" height="38" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.5"/>
  <text x="170" y="79" text-anchor="middle" font-size="11" font-weight="600" fill="#1a4a7a">Coordinator</text>
  <text x="170" y="91" text-anchor="middle" font-size="9" fill="#4a90c4">timeout detector</text>

  <!-- Worker nodes — 4 workers in a row -->
  <!-- Worker 1 -->
  <rect x="22" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="58" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 1</text>
  <text x="58" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">running</text>

  <!-- Worker 2 — FAILED (gray) -->
  <rect x="102" y="158" width="72" height="52" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1.5"/>
  <text x="138" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#666">Worker 2</text>
  <text x="138" y="195" text-anchor="middle" font-size="8" fill="#999">silent / dead</text>
  <!-- X mark -->
  <line x1="117" y1="163" x2="159" y2="205" stroke="#c44" stroke-width="2.5"/>
  <line x1="159" y1="163" x2="117" y2="205" stroke="#c44" stroke-width="2.5"/>

  <!-- Worker 3 -->
  <rect x="182" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="218" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 3</text>
  <text x="218" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">running</text>

  <!-- Worker 4 -->
  <rect x="262" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="298" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 4</text>
  <text x="298" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">running</text>

  <!-- Heartbeat arrows: workers 1,3,4 to coordinator (solid) -->
  <defs>
    <marker id="arrowBlue" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#4a90c4"/>
    </marker>
    <marker id="arrowGray" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#999"/>
    </marker>
    <marker id="arrowRed" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c44"/>
    </marker>
    <marker id="arrowOrange" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c87b2a"/>
    </marker>
    <marker id="arrowGreen" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#3d9e5a"/>
    </marker>
  </defs>

  <!-- Worker1 → Coordinator -->
  <line x1="58" y1="158" x2="140" y2="98" stroke="#4a90c4" stroke-width="1.2" stroke-dasharray="5,3" marker-end="url(#arrowBlue)"/>
  <text x="88" y="124" font-size="8" fill="#4a90c4">heartbeat</text>

  <!-- Worker2 → Coordinator: NO signal (dashed red/timeout) -->
  <line x1="138" y1="158" x2="155" y2="98" stroke="#c44" stroke-width="1.2" stroke-dasharray="3,3"/>
  <text x="100" y="145" font-size="8" fill="#c44" font-style="italic">timeout!</text>

  <!-- Worker3 → Coordinator -->
  <line x1="218" y1="158" x2="195" y2="98" stroke="#4a90c4" stroke-width="1.2" stroke-dasharray="5,3" marker-end="url(#arrowBlue)"/>

  <!-- Worker4 → Coordinator -->
  <line x1="298" y1="158" x2="210" y2="98" stroke="#4a90c4" stroke-width="1.2" stroke-dasharray="5,3" marker-end="url(#arrowBlue)"/>

  <!-- Detection annotation -->
  <rect x="95" y="225" width="152" height="34" rx="4" fill="#fff3cd" stroke="#c87b2a" stroke-width="1"/>
  <text x="171" y="240" text-anchor="middle" font-size="9" fill="#7a4a10">Coordinator detects missing</text>
  <text x="171" y="252" text-anchor="middle" font-size="9" fill="#7a4a10">heartbeat → failure declared</text>

  <!-- Left panel key -->
  <rect x="22" y="278" width="296" height="52" rx="4" fill="#f0f8ff" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="170" y="297" text-anchor="middle" font-size="9.5" font-weight="700" fill="#1a4a7a">Key property:</text>
  <text x="170" y="311" text-anchor="middle" font-size="9" fill="#333">Component stops responding entirely.</text>
  <text x="170" y="323" text-anchor="middle" font-size="9" fill="#333">Detection: timeout. Recovery: replace + checkpoint.</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- RIGHT PANEL: Byzantine Failure -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="510" y="44" text-anchor="middle" font-size="13" font-weight="700" fill="#333">Byzantine Failure</text>

  <!-- Coordinator (top-center) -->
  <rect x="455" y="60" width="110" height="38" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.5"/>
  <text x="510" y="79" text-anchor="middle" font-size="11" font-weight="600" fill="#1a4a7a">Coordinator</text>
  <text x="510" y="91" text-anchor="middle" font-size="9" fill="#4a90c4">receives all gradients</text>

  <!-- Worker 5 -->
  <rect x="362" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="398" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 5</text>
  <text x="398" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">correct ∇</text>

  <!-- Worker 6 — Byzantine (looks alive but sends poison) -->
  <rect x="442" y="158" width="72" height="52" rx="5" fill="#fdebd0" stroke="#c87b2a" stroke-width="2"/>
  <text x="478" y="176" text-anchor="middle" font-size="10" font-weight="600" fill="#8a4000">Worker 6</text>
  <text x="478" y="189" text-anchor="middle" font-size="8" fill="#c87b2a">appears healthy!</text>
  <text x="478" y="201" text-anchor="middle" font-size="8" fill="#c44">corrupt output</text>

  <!-- Worker 7 -->
  <rect x="522" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="558" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 7</text>
  <text x="558" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">correct ∇</text>

  <!-- Worker 8 -->
  <rect x="602" y="158" width="72" height="52" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="638" y="181" text-anchor="middle" font-size="10" font-weight="600" fill="#266040">Worker 8</text>
  <text x="638" y="195" text-anchor="middle" font-size="8" fill="#3d9e5a">correct ∇</text>

  <!-- Worker5 → Coordinator normal gradient arrow -->
  <line x1="398" y1="158" x2="470" y2="98" stroke="#3d9e5a" stroke-width="1.2" marker-end="url(#arrowGreen)"/>

  <!-- Worker6 → Coordinator: POISONED gradient (red dashed) -->
  <line x1="478" y1="158" x2="497" y2="98" stroke="#c44" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowRed)"/>
  <text x="446" y="145" font-size="8" fill="#c44" font-weight="700">poison ∇</text>
  <!-- Label showing it looks valid -->
  <text x="430" y="133" font-size="7.5" fill="#c87b2a" font-style="italic">(passes sanity check)</text>

  <!-- Worker7 → Coordinator -->
  <line x1="558" y1="158" x2="533" y2="98" stroke="#3d9e5a" stroke-width="1.2" marker-end="url(#arrowGreen)"/>

  <!-- Worker8 → Coordinator -->
  <line x1="638" y1="158" x2="548" y2="98" stroke="#3d9e5a" stroke-width="1.2" marker-end="url(#arrowGreen)"/>

  <!-- Detection failure annotation -->
  <rect x="435" y="225" width="152" height="34" rx="4" fill="#f9d6d5" stroke="#c44" stroke-width="1"/>
  <text x="511" y="240" text-anchor="middle" font-size="9" fill="#7a0000">No timeout triggered —</text>
  <text x="511" y="252" text-anchor="middle" font-size="9" fill="#7a0000">failure is invisible to coordinator</text>

  <!-- Right panel key -->
  <rect x="362" y="278" width="296" height="52" rx="4" fill="#fff8f0" stroke="#c87b2a" stroke-width="0.8"/>
  <text x="510" y="297" text-anchor="middle" font-size="9.5" font-weight="700" fill="#8a4000">Key property:</text>
  <text x="510" y="311" text-anchor="middle" font-size="9" fill="#333">Component sends wrong results but stays alive.</text>
  <text x="510" y="323" text-anchor="middle" font-size="9" fill="#333">Detection requires checksum / cross-validation.</text>

  <!-- Bottom comparison bar -->
  <rect x="22" y="345" width="636" height="60" rx="5" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
  <text x="340" y="364" text-anchor="middle" font-size="10" font-weight="700" fill="#333">Critical Distinction</text>
  <text x="170" y="381" text-anchor="middle" font-size="9" fill="#1a4a7a">Fail-stop: absence of signal = failure</text>
  <text x="170" y="395" text-anchor="middle" font-size="9" fill="#1a4a7a">Simple timeout detection is sufficient</text>
  <line x1="340" y1="350" x2="340" y2="400" stroke="#ddd" stroke-width="1"/>
  <text x="510" y="381" text-anchor="middle" font-size="9" fill="#8a4000">Byzantine: presence of signal ≠ correctness</text>
  <text x="510" y="395" text-anchor="middle" font-size="9" fill="#8a4000">Requires gradient checksums or redundant compute</text>

  <!-- footnote -->
  <text x="340" y="445" text-anchor="middle" font-size="9" fill="#999" font-style="italic">Byzantine term from Lamport et al. (1982): generals who may defect and send contradictory messages to confuse consensus</text>
</svg>
