<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrowD" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#555"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- Panel grid lines -->
  <line x1="340" y1="30" x2="340" y2="410" stroke="#e0e0e0" stroke-width="1"/>
  <line x1="30" y1="230" x2="650" y2="230" stroke="#e0e0e0" stroke-width="1"/>

  <!-- Panel labels -->
  <text x="185" y="22" text-anchor="middle" font-size="10" fill="#999" font-weight="600">PHASE 1</text>
  <text x="510" y="22" text-anchor="middle" font-size="10" fill="#999" font-weight="600">PHASE 2</text>
  <text x="185" y="242" text-anchor="middle" font-size="10" fill="#999" font-weight="600">PHASE 3</text>
  <text x="510" y="242" text-anchor="middle" font-size="10" fill="#999" font-weight="600">PHASE 4</text>

  <!-- ═══════ PANEL 1: Normal Training ═══════ -->
  <rect x="40" y="30" width="290" height="185" rx="6" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="185" y="50" text-anchor="middle" font-size="11" font-weight="700" fill="#1a5c35">Normal Training</text>

  <!-- 4-GPU cluster, all green -->
  <g>
    <rect x="60" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="89" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 0</text>
    <text x="89" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>

    <rect x="128" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="157" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 1</text>
    <text x="157" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>

    <rect x="196" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="225" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 2</text>
    <text x="225" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>

    <rect x="264" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="293" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 3</text>
    <text x="293" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>
  </g>

  <!-- Health monitor -->
  <rect x="105" y="125" width="140" height="32" rx="4" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
  <text x="175" y="139" text-anchor="middle" font-size="9" font-weight="600" fill="#1a4a7a">Health Monitor</text>
  <text x="175" y="151" text-anchor="middle" font-size="8" fill="#4a90c4">gradient statistics: nominal</text>

  <!-- Training metrics -->
  <text x="185" y="178" text-anchor="middle" font-size="9" fill="#3d9e5a">Loss: decreasing normally</text>
  <text x="185" y="190" text-anchor="middle" font-size="9" fill="#3d9e5a">Gradient norm: stable</text>
  <text x="185" y="202" text-anchor="middle" font-size="9" fill="#3d9e5a">All checksums pass</text>

  <!-- ═══════ PANEL 2: SDC Detected ═══════ -->
  <rect x="350" y="30" width="290" height="185" rx="6" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="510" y="50" text-anchor="middle" font-size="11" font-weight="700" fill="#900">SDC Detected</text>

  <!-- 4-GPU cluster, GPU 2 red/anomaly -->
  <g>
    <rect x="372" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="401" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 0</text>
    <text x="401" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>

    <rect x="440" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="469" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 1</text>
    <text x="469" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>

    <!-- GPU 2: ANOMALY -->
    <rect x="508" y="58" width="58" height="50" rx="5" fill="#f9d6d5" stroke="#c44" stroke-width="2.5"/>
    <text x="537" y="77" text-anchor="middle" font-size="9" font-weight="700" fill="#900">GPU 2</text>
    <text x="537" y="89" text-anchor="middle" font-size="8" fill="#c44">SDC!</text>
    <text x="537" y="100" text-anchor="middle" font-size="7.5" fill="#c44">bit-flip</text>
    <!-- Warning indicator -->
    <text x="559" y="65" font-size="12" fill="#c44" font-weight="700">⚠</text>

    <rect x="576" y="62" width="58" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="605" y="81" text-anchor="middle" font-size="9" font-weight="600" fill="#1a5c35">GPU 3</text>
    <text x="605" y="93" text-anchor="middle" font-size="8" fill="#3d9e5a">OK</text>
  </g>

  <!-- Health monitor flagging -->
  <rect x="417" y="125" width="184" height="32" rx="4" fill="#f9d6d5" stroke="#c44" stroke-width="1.5"/>
  <text x="509" y="139" text-anchor="middle" font-size="9" font-weight="600" fill="#900">Health Monitor: ALERT</text>
  <text x="509" y="151" text-anchor="middle" font-size="8" fill="#c44">gradient checksum mismatch on GPU 2</text>

  <text x="510" y="176" text-anchor="middle" font-size="9" fill="#c44">Loss: unexpected spike detected</text>
  <text x="510" y="188" text-anchor="middle" font-size="9" fill="#c44">Isolation: quarantine GPU 2</text>

  <!-- ═══════ PANEL 3: Hot Spare Activated ═══════ -->
  <rect x="40" y="246" width="290" height="150" rx="6" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="185" y="266" text-anchor="middle" font-size="11" font-weight="700" fill="#c87b2a">Hot Spare Activated</text>

  <!-- 3 healthy GPUs + hot spare joining -->
  <g>
    <rect x="50" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="76" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 0</text>
    <text x="76" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>

    <rect x="110" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="136" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 1</text>
    <text x="136" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>

    <!-- Defective GPU: gray/isolated -->
    <rect x="170" y="278" width="52" height="42" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1.5" stroke-dasharray="4,3"/>
    <text x="196" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#888">GPU 2</text>
    <text x="196" y="309" text-anchor="middle" font-size="7.5" fill="#999">isolated</text>

    <rect x="230" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="256" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 3</text>
    <text x="256" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>

    <!-- Hot spare joining (orange → green) -->
    <rect x="296" y="274" width="26" height="50" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="2"/>
    <text x="309" y="293" text-anchor="middle" font-size="8" font-weight="700" fill="#1a5c35">Spare</text>
    <text x="309" y="305" text-anchor="middle" font-size="7" fill="#3d9e5a">→ active</text>
    <!-- Arrow indicating spare is joining -->
    <line x1="295" y1="299" x2="285" y2="299" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arrowD)"/>
  </g>

  <text x="185" y="342" text-anchor="middle" font-size="9" fill="#c87b2a">Hot spare transitions from standby → active</text>
  <text x="185" y="355" text-anchor="middle" font-size="9" fill="#c87b2a">Training resumes with 4-GPU ring</text>
  <text x="185" y="368" text-anchor="middle" font-size="9" fill="#3d9e5a">Checkpoint reloaded — minimal lost work</text>

  <!-- ═══════ PANEL 4: Repair / Replace ═══════ -->
  <rect x="350" y="246" width="290" height="150" rx="6" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="510" y="266" text-anchor="middle" font-size="11" font-weight="700" fill="#4a90c4">Repair / Replace</text>

  <!-- Cluster: 4 healthy GPUs, spare is now permanent -->
  <g>
    <rect x="360" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="386" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 0</text>
    <text x="386" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>

    <rect x="420" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="446" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 1</text>
    <text x="446" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>

    <!-- Spare is now permanent (formerly spare) -->
    <rect x="480" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="506" y="294" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 2'</text>
    <text x="506" y="306" text-anchor="middle" font-size="7.5" fill="#3d9e5a">spare→perm</text>

    <rect x="540" y="278" width="52" height="42" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="566" y="297" text-anchor="middle" font-size="8.5" font-weight="600" fill="#1a5c35">GPU 3</text>
    <text x="566" y="309" text-anchor="middle" font-size="7.5" fill="#3d9e5a">OK</text>
  </g>

  <!-- Defective unit removed -->
  <rect x="604" y="278" width="26" height="42" rx="5" fill="#e0e0e0" stroke="#999" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="617" y="297" text-anchor="middle" font-size="7" fill="#999">defect</text>
  <text x="617" y="309" text-anchor="middle" font-size="7" fill="#999">→ RMA</text>
  <!-- Removal arrow -->
  <line x1="617" y1="275" x2="617" y2="262" stroke="#999" stroke-width="1.2" marker-end="url(#arrowD)"/>

  <text x="480" y="342" text-anchor="middle" font-size="9" fill="#4a90c4">Defective unit removed; new spare ordered</text>
  <text x="480" y="355" text-anchor="middle" font-size="9" fill="#4a90c4">Training runs at full 4-GPU capacity</text>
  <text x="480" y="368" text-anchor="middle" font-size="9" fill="#3d9e5a">Cluster returns to N+1 redundancy state</text>

  <!-- Flow arrows between panels -->
  <line x1="185" y1="215" x2="185" y2="244" stroke="#666" stroke-width="1.5" marker-end="url(#arrowD)"/>
  <line x1="510" y1="215" x2="510" y2="244" stroke="#666" stroke-width="1.5" marker-end="url(#arrowD)"/>
  <line x1="330" y1="178" x2="350" y2="178" stroke="#666" stroke-width="1.5" marker-end="url(#arrowD)"/>
  <line x1="330" y1="335" x2="350" y2="335" stroke="#666" stroke-width="1.5" marker-end="url(#arrowD)"/>

  <!-- Bottom note -->
  <text x="340" y="420" text-anchor="middle" font-size="9" fill="#555" font-style="italic">SDC controllers implement proactive hot-spare rotation before defective units cause training divergence</text>
  <text x="340" y="434" text-anchor="middle" font-size="9" fill="#555" font-style="italic">N+1 redundancy: always one spare available for immediate substitution</text>
</svg>
