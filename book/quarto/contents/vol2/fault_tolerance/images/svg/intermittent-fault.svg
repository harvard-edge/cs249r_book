<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrowBlk" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#444"/>
    </marker>
    <marker id="arrowRed" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c44"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- Left panel: Normal state -->
  <!-- Right panel: Stressed state -->
  <text x="170" y="34" text-anchor="middle" font-size="12" font-weight="700" fill="#3d9e5a">Normal State (ambient temperature)</text>
  <text x="510" y="34" text-anchor="middle" font-size="12" font-weight="700" fill="#c44">Stressed State (thermal expansion)</text>

  <!-- Divider -->
  <line x1="340" y1="28" x2="340" y2="380" stroke="#ddd" stroke-width="1.5" stroke-dasharray="6,4"/>

  <!-- ════════════ LEFT PANEL — NORMAL ════════════ -->
  <!-- IC Die block -->
  <rect x="45" y="55" width="180" height="85" rx="5" fill="#cfe2f3" stroke="#4a90c4" stroke-width="2"/>
  <text x="135" y="90" text-anchor="middle" font-size="12" font-weight="700" fill="#1a4a7a">IC Die</text>
  <text x="135" y="106" text-anchor="middle" font-size="9" fill="#4a90c4">SoC / GPU processor</text>
  <text x="135" y="120" text-anchor="middle" font-size="8.5" fill="#4a90c4">28°C ambient</text>

  <!-- Solder bump array (intact) - 3 bumps shown -->
  <!-- Bump 1 -->
  <ellipse cx="95" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <rect x="77" y="145" width="36" height="17" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="95" cy="145" rx="18" ry="8" fill="#ccc" stroke="#888" stroke-width="1.2"/>
  <text x="95" y="178" text-anchor="middle" font-size="8" fill="#888">bump</text>

  <!-- Bump 2 (center — will have crack) -->
  <ellipse cx="135" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <rect x="117" y="145" width="36" height="17" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="135" cy="145" rx="18" ry="8" fill="#ccc" stroke="#888" stroke-width="1.2"/>
  <text x="135" y="178" text-anchor="middle" font-size="8" fill="#888">bump</text>

  <!-- Bump 3 -->
  <ellipse cx="175" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <rect x="157" y="145" width="36" height="17" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="175" cy="145" rx="18" ry="8" fill="#ccc" stroke="#888" stroke-width="1.2"/>
  <text x="175" y="178" text-anchor="middle" font-size="8" fill="#888">bump</text>

  <!-- Substrate (normal) -->
  <rect x="45" y="165" width="180" height="50" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="135" y="190" text-anchor="middle" font-size="11" font-weight="600" fill="#1a5c35">Substrate (PCB)</text>
  <text x="135" y="204" text-anchor="middle" font-size="8.5" fill="#3d9e5a">organic laminate</text>

  <!-- Underfill -->
  <rect x="45" y="140" width="180" height="25" rx="0" fill="#fdebd0" fill-opacity="0.5" stroke="#c87b2a" stroke-width="0.8" stroke-dasharray="3,2"/>
  <text x="135" y="135" font-size="8" fill="#c87b2a" text-anchor="middle">underfill epoxy</text>

  <!-- Status: connection good -->
  <rect x="55" y="230" width="160" height="36" rx="4" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="135" y="247" text-anchor="middle" font-size="9.5" font-weight="700" fill="#1a5c35">Connection: INTACT</text>
  <text x="135" y="260" text-anchor="middle" font-size="8.5" fill="#3d9e5a">Electrical continuity: 100%</text>

  <!-- Detail label: normal bump cross-section callout -->
  <rect x="42" y="280" width="180" height="68" rx="4" fill="#f9f9f9" stroke="#ccc" stroke-width="1"/>
  <text x="132" y="296" text-anchor="middle" font-size="9.5" font-weight="600" fill="#555">Copper Bump (normal)</text>
  <!-- Mini cross-section detail -->
  <rect x="85" y="304" width="90" height="22" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
  <text x="130" y="318" text-anchor="middle" font-size="8" fill="#1a4a7a">Cu bump — full contact</text>
  <rect x="85" y="326" width="90" height="14" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="130" y="336" text-anchor="middle" font-size="8" fill="#1a5c35">substrate pad</text>

  <!-- ════════════ RIGHT PANEL — STRESSED ════════════ -->
  <!-- IC Die block (slightly expanded due to thermal stress) -->
  <rect x="385" y="55" width="180" height="85" rx="5" fill="#f9d6d5" stroke="#c44" stroke-width="2"/>
  <text x="475" y="90" text-anchor="middle" font-size="12" font-weight="700" fill="#900">IC Die</text>
  <text x="475" y="106" text-anchor="middle" font-size="9" fill="#c44">thermal stress</text>
  <text x="475" y="120" text-anchor="middle" font-size="8.5" fill="#c44">95°C (GPU backward pass)</text>

  <!-- Bump 4 (left, intact) -->
  <ellipse cx="435" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <rect x="417" y="145" width="36" height="17" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="435" cy="145" rx="18" ry="8" fill="#ccc" stroke="#888" stroke-width="1.2"/>

  <!-- Bump 5 (center — CRACKED / intermittent open) -->
  <!-- Bottom ellipse (substrate pad) -->
  <ellipse cx="475" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <!-- Solder body with gap -->
  <rect x="457" y="152" width="36" height="7" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <!-- Crack line (visible gap) -->
  <line x1="457" y1="157" x2="493" y2="157" stroke="#c44" stroke-width="3"/>
  <!-- Gap markers -->
  <rect x="457" y="148" width="36" height="5" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="475" cy="145" rx="18" ry="8" fill="#ccc" stroke="#c44" stroke-width="2"/>
  <!-- Crack annotation -->
  <text x="519" y="156" font-size="9" fill="#c44" font-weight="700">← crack</text>
  <text x="519" y="168" font-size="8.5" fill="#c44">(intermittent open)</text>

  <!-- Bump 6 (right, intact) -->
  <ellipse cx="515" cy="162" rx="18" ry="8" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <rect x="497" y="145" width="36" height="17" rx="0" fill="#bbb" stroke="#888" stroke-width="1"/>
  <ellipse cx="515" cy="145" rx="18" ry="8" fill="#ccc" stroke="#888" stroke-width="1.2"/>

  <!-- Substrate (stressed) -->
  <rect x="385" y="165" width="180" height="50" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
  <text x="475" y="190" text-anchor="middle" font-size="11" font-weight="600" fill="#1a5c35">Substrate (PCB)</text>
  <text x="475" y="204" text-anchor="middle" font-size="8.5" fill="#3d9e5a">organic laminate</text>

  <!-- Status: intermittent -->
  <rect x="392" y="230" width="166" height="36" rx="4" fill="#f9d6d5" stroke="#c44" stroke-width="1.5"/>
  <text x="475" y="247" text-anchor="middle" font-size="9.5" font-weight="700" fill="#900">Connection: OPEN</text>
  <text x="475" y="260" text-anchor="middle" font-size="8.5" fill="#c44">Electrical continuity: intermittent</text>

  <!-- Detail label: cracked bump callout -->
  <rect x="383" y="280" width="180" height="68" rx="4" fill="#fff8f5" stroke="#c44" stroke-width="1"/>
  <text x="473" y="296" text-anchor="middle" font-size="9.5" font-weight="600" fill="#900">Solder Crack (fatigued)</text>
  <!-- Mini cross-section detail -->
  <rect x="425" y="304" width="90" height="10" rx="2" fill="#f9d6d5" stroke="#c44" stroke-width="1"/>
  <text x="470" y="313" text-anchor="middle" font-size="8" fill="#900">Cu bump (separated)</text>
  <!-- Crack detail -->
  <line x1="425" y1="315" x2="515" y2="315" stroke="#c44" stroke-width="2"/>
  <text x="470" y="323" text-anchor="middle" font-size="8" fill="#c44">← hairline crack →</text>
  <rect x="425" y="325" width="90" height="14" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="470" y="335" text-anchor="middle" font-size="8" fill="#1a5c35">substrate pad</text>

  <!-- ════════════ BOTTOM: Thermal Cycle explanation ════════════ -->
  <rect x="42" y="362" width="596" height="80" rx="6" fill="white" stroke="#e0e0e0" stroke-width="1"/>
  <text x="340" y="383" text-anchor="middle" font-size="11" font-weight="700" fill="#555">Intermittent Fault: Thermal Cycling Mechanism</text>

  <!-- Thermal cycle diagram (simplified waveform) -->
  <!-- Temperature waveform -->
  <polyline points="60,430 100,410 140,430 180,408 220,430 260,406 300,430" fill="none" stroke="#c87b2a" stroke-width="1.8"/>
  <text x="65" y="443" font-size="8" fill="#888">cold</text>
  <text x="102" y="403" font-size="8" fill="#c44">hot</text>

  <!-- Labels -->
  <text x="180" y="445" text-anchor="middle" font-size="8" fill="#888">repeated heating/cooling cycles</text>
  <text x="180" y="455" text-anchor="middle" font-size="8" fill="#888">(GPU backward pass generates heat)</text>

  <!-- Annotation for intermittency -->
  <text x="430" y="397" font-size="9.5" fill="#555">Die (Si): CTE = 2.8 ppm/°C</text>
  <text x="430" y="410" font-size="9.5" fill="#555">Substrate: CTE = 17 ppm/°C</text>
  <text x="430" y="423" font-size="9.5" fill="#c44" font-weight="700">CTE mismatch → fatigue crack</text>
  <text x="430" y="436" font-size="9" fill="#888">crack closes when cool → passes tests</text>
  <text x="430" y="447" font-size="9" fill="#888">crack opens when hot → intermittent open</text>
</svg>
