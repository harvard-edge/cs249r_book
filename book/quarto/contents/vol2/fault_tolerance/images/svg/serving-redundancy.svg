<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrowBlk" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#444"/>
    </marker>
    <marker id="arrowGrn" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#3d9e5a"/>
    </marker>
    <marker id="arrowOr" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c87b2a"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- Divider -->
  <line x1="340" y1="28" x2="340" y2="400" stroke="#ddd" stroke-width="1.5" stroke-dasharray="6,4"/>

  <!-- ═══════════════════════════════════════════ -->
  <!-- LEFT PANEL: Active-Active -->
  <!-- ═══════════════════════════════════════════ -->
  <text x="170" y="46" text-anchor="middle" font-size="13" font-weight="700" fill="#333">Active-Active</text>

  <!-- Load Balancer -->
  <rect x="96" y="68" width="148" height="40" rx="6" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.8"/>
  <text x="170" y="87" text-anchor="middle" font-size="11" font-weight="700" fill="#1a4a7a">Load Balancer</text>
  <text x="170" y="100" text-anchor="middle" font-size="8.5" fill="#4a90c4">round-robin / weighted</text>

  <!-- Traffic in arrow -->
  <line x1="170" y1="44" x2="170" y2="66" stroke="#444" stroke-width="1.5" marker-end="url(#arrowBlk)"/>
  <text x="145" y="60" font-size="8.5" fill="#666">traffic</text>

  <!-- Replica 1 (green) -->
  <rect x="38" y="155" width="96" height="52" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.8"/>
  <text x="86" y="177" text-anchor="middle" font-size="10" font-weight="600" fill="#1a5c35">Replica 1</text>
  <text x="86" y="192" text-anchor="middle" font-size="8.5" fill="#3d9e5a">active</text>

  <!-- Replica 2 (green) -->
  <rect x="122" y="155" width="96" height="52" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.8"/>
  <text x="170" y="177" text-anchor="middle" font-size="10" font-weight="600" fill="#1a5c35">Replica 2</text>
  <text x="170" y="192" text-anchor="middle" font-size="8.5" fill="#3d9e5a">active</text>

  <!-- Replica 3 (green) -->
  <rect x="206" y="155" width="96" height="52" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.8"/>
  <text x="254" y="177" text-anchor="middle" font-size="10" font-weight="600" fill="#1a5c35">Replica 3</text>
  <text x="254" y="192" text-anchor="middle" font-size="8.5" fill="#3d9e5a">active</text>

  <!-- LB → replicas -->
  <line x1="145" y1="108" x2="90" y2="153" stroke="#3d9e5a" stroke-width="1.3" marker-end="url(#arrowGrn)"/>
  <line x1="165" y1="108" x2="168" y2="153" stroke="#3d9e5a" stroke-width="1.3" marker-end="url(#arrowGrn)"/>
  <line x1="190" y1="108" x2="248" y2="153" stroke="#3d9e5a" stroke-width="1.3" marker-end="url(#arrowGrn)"/>

  <!-- Load distribution labels -->
  <text x="100" y="138" font-size="8" fill="#3d9e5a">~33%</text>
  <text x="156" y="138" font-size="8" fill="#3d9e5a">~33%</text>
  <text x="206" y="138" font-size="8" fill="#3d9e5a">~33%</text>

  <!-- Response arrows back up -->
  <line x1="80" y1="207" x2="148" y2="230" stroke="#3d9e5a" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowGrn)"/>
  <line x1="170" y1="207" x2="170" y2="230" stroke="#3d9e5a" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowGrn)"/>
  <line x1="255" y1="207" x2="195" y2="230" stroke="#3d9e5a" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowGrn)"/>

  <!-- Utilization annotation -->
  <rect x="55" y="240" width="230" height="44" rx="5" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="170" y="258" text-anchor="middle" font-size="10" font-weight="700" fill="#1a5c35">Higher utilization</text>
  <text x="170" y="272" text-anchor="middle" font-size="9" fill="#3d9e5a">All replicas serve traffic simultaneously</text>
  <text x="170" y="282" text-anchor="middle" font-size="8.5" fill="#3d9e5a">No idle capacity — cost efficient</text>

  <!-- Trade-off note -->
  <rect x="55" y="296" width="230" height="44" rx="5" fill="#fff3cd" stroke="#c87b2a" stroke-width="1"/>
  <text x="170" y="314" text-anchor="middle" font-size="9" font-weight="600" fill="#8a4000">Trade-off:</text>
  <text x="170" y="327" text-anchor="middle" font-size="8.5" fill="#7a5000">Failover adds rebalancing latency.</text>
  <text x="170" y="339" text-anchor="middle" font-size="8.5" fill="#7a5000">Load spikes if 1 replica fails.</text>

  <!-- ═══════════════════════════════════════════ -->
  <!-- RIGHT PANEL: Active-Passive -->
  <!-- ═══════════════════════════════════════════ -->
  <text x="510" y="46" text-anchor="middle" font-size="13" font-weight="700" fill="#333">Active-Passive</text>

  <!-- Load Balancer -->
  <rect x="436" y="68" width="148" height="40" rx="6" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.8"/>
  <text x="510" y="87" text-anchor="middle" font-size="11" font-weight="700" fill="#1a4a7a">Load Balancer</text>
  <text x="510" y="100" text-anchor="middle" font-size="8.5" fill="#4a90c4">monitors primary health</text>

  <!-- Traffic in arrow -->
  <line x1="510" y1="44" x2="510" y2="66" stroke="#444" stroke-width="1.5" marker-end="url(#arrowBlk)"/>
  <text x="485" y="60" font-size="8.5" fill="#666">traffic</text>

  <!-- Primary (green, active) -->
  <rect x="436" y="155" width="110" height="52" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.8"/>
  <text x="491" y="174" text-anchor="middle" font-size="10" font-weight="600" fill="#1a5c35">Primary</text>
  <text x="491" y="188" text-anchor="middle" font-size="8.5" fill="#3d9e5a">active — all traffic</text>

  <!-- LB → Primary arrow -->
  <line x1="490" y1="108" x2="490" y2="153" stroke="#3d9e5a" stroke-width="1.5" marker-end="url(#arrowGrn)"/>
  <text x="497" y="136" font-size="8" fill="#3d9e5a">100%</text>

  <!-- Standby 1 (gray) -->
  <rect x="430" y="245" width="90" height="48" rx="6" fill="#e0e0e0" stroke="#999" stroke-width="1.5"/>
  <text x="475" y="265" text-anchor="middle" font-size="9.5" font-weight="600" fill="#666">Standby 1</text>
  <text x="475" y="279" text-anchor="middle" font-size="8" fill="#999">idle — warm</text>

  <!-- Standby 2 (gray) -->
  <rect x="528" y="245" width="90" height="48" rx="6" fill="#e0e0e0" stroke="#999" stroke-width="1.5"/>
  <text x="573" y="265" text-anchor="middle" font-size="9.5" font-weight="600" fill="#666">Standby 2</text>
  <text x="573" y="279" text-anchor="middle" font-size="8" fill="#999">idle — warm</text>

  <!-- Heartbeat from LB to standbys (monitoring) -->
  <line x1="450" y1="108" x2="456" y2="243" stroke="#999" stroke-width="0.8" stroke-dasharray="3,3"/>
  <line x1="565" y1="108" x2="560" y2="243" stroke="#999" stroke-width="0.8" stroke-dasharray="3,3"/>
  <text x="432" y="180" font-size="7.5" fill="#999" font-style="italic">health</text>
  <text x="432" y="190" font-size="7.5" fill="#999" font-style="italic">check</text>

  <!-- Primary FAILS: X and arrow to standby 1 -->
  <!-- Failure X on primary -->
  <line x1="438" y1="157" x2="544" y2="205" stroke="#c44" stroke-width="1.8" stroke-dasharray="5,3"/>
  <circle cx="491" cy="233" r="14" fill="#f9d6d5" stroke="#c44" stroke-width="1.5"/>
  <text x="491" y="237.5" text-anchor="middle" font-size="13" fill="#c44" font-weight="700">✕</text>

  <!-- Failover arrow (orange curved) from LB to Standby 1 -->
  <path d="M455,108 C420,150 435,195 447,243" fill="none" stroke="#c87b2a" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowOr)"/>
  <text x="416" y="172" font-size="8" fill="#c87b2a" font-weight="700">failover</text>

  <!-- Failover label annotation -->
  <rect x="382" y="310" width="110" height="30" rx="4" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
  <text x="437" y="326" text-anchor="middle" font-size="9" fill="#8a4000" font-weight="700">Instant failover</text>
  <text x="437" y="336" text-anchor="middle" font-size="8" fill="#c87b2a">standby promoted</text>

  <!-- Trade-off boxes -->
  <rect x="378" y="350" width="262" height="44" rx="5" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
  <text x="509" y="368" text-anchor="middle" font-size="10" font-weight="700" fill="#8a4000">Instant failover</text>
  <text x="509" y="382" text-anchor="middle" font-size="9" fill="#c87b2a">Standby replicas immediately take over</text>

  <rect x="378" y="404" width="262" height="30" rx="5" fill="#fff3cd" stroke="#c87b2a" stroke-width="1"/>
  <text x="509" y="418" text-anchor="middle" font-size="9" font-weight="600" fill="#8a4000">Trade-off: lower utilization</text>
  <text x="509" y="428" text-anchor="middle" font-size="8.5" fill="#7a5000">Standby capacity is reserved but idle</text>

  <!-- Bottom note -->
  <text x="340" y="450" text-anchor="middle" font-size="9" fill="#999" font-style="italic">Active-active preferred for inference throughput; active-passive preferred for deterministic failover SLOs</text>
</svg>
