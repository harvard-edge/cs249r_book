<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrowBlk" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#444"/>
    </marker>
    <marker id="arrowGrn" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#3d9e5a"/>
    </marker>
    <marker id="arrowRed" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#c44"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- ═══════════ SENSOR INPUTS (left column) ═══════════ -->
  <text x="80" y="42" text-anchor="middle" font-size="11" font-weight="700" fill="#555">Sensor Inputs</text>

  <!-- Sensors -->
  <rect x="28" y="54" width="104" height="28" rx="4" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="80" y="68" text-anchor="middle" font-size="9.5" fill="#555" font-weight="600">Cameras</text>
  <text x="80" y="78" text-anchor="middle" font-size="8" fill="#888">8x wide-angle</text>

  <rect x="28" y="90" width="104" height="28" rx="4" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="80" y="104" text-anchor="middle" font-size="9.5" fill="#555" font-weight="600">Radar</text>
  <text x="80" y="114" text-anchor="middle" font-size="8" fill="#888">long-range</text>

  <rect x="28" y="126" width="104" height="28" rx="4" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="80" y="140" text-anchor="middle" font-size="9.5" fill="#555" font-weight="600">Ultrasonic</text>
  <text x="80" y="150" text-anchor="middle" font-size="8" fill="#888">proximity</text>

  <rect x="28" y="162" width="104" height="28" rx="4" fill="#e0e0e0" stroke="#999" stroke-width="1.2"/>
  <text x="80" y="176" text-anchor="middle" font-size="9.5" fill="#555" font-weight="600">GPS / IMU</text>
  <text x="80" y="186" text-anchor="middle" font-size="8" fill="#888">localization</text>

  <!-- Sensor input feed lines -->
  <line x1="132" y1="68" x2="185" y2="95" stroke="#888" stroke-width="1" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="104" x2="185" y2="109" stroke="#888" stroke-width="1" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="140" x2="185" y2="126" stroke="#888" stroke-width="1" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="176" x2="185" y2="143" stroke="#888" stroke-width="1" marker-end="url(#arrowBlk)"/>

  <!-- Same feeds to SoC B -->
  <line x1="132" y1="68" x2="185" y2="285" stroke="#888" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="104" x2="185" y2="295" stroke="#888" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="140" x2="185" y2="310" stroke="#888" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arrowBlk)"/>
  <line x1="132" y1="176" x2="185" y2="325" stroke="#888" stroke-width="1" stroke-dasharray="3,2" marker-end="url(#arrowBlk)"/>

  <!-- Identical inputs label -->
  <text x="155" y="210" text-anchor="middle" font-size="8" fill="#888" font-style="italic">identical</text>
  <text x="155" y="220" text-anchor="middle" font-size="8" fill="#888" font-style="italic">inputs</text>
  <line x1="155" y1="223" x2="155" y2="275" stroke="#888" stroke-width="0.8" stroke-dasharray="2,2"/>

  <!-- ═══════════ SoC A (upper path) ═══════════ -->
  <rect x="185" y="70" width="180" height="120" rx="8" fill="#cfe2f3" stroke="#4a90c4" stroke-width="2"/>
  <text x="275" y="94" text-anchor="middle" font-size="13" font-weight="700" fill="#1a4a7a">SoC A</text>
  <text x="275" y="110" text-anchor="middle" font-size="9" fill="#4a90c4">Full Self-Driving Chip</text>
  <!-- Internal blocks of SoC A -->
  <rect x="198" y="118" width="70" height="28" rx="3" fill="#4a90c4" fill-opacity="0.25" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="233" y="130" text-anchor="middle" font-size="8" fill="#1a4a7a">Neural Net</text>
  <text x="233" y="140" text-anchor="middle" font-size="8" fill="#1a4a7a">Engine</text>
  <rect x="278" y="118" width="70" height="28" rx="3" fill="#4a90c4" fill-opacity="0.25" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="313" y="130" text-anchor="middle" font-size="8" fill="#1a4a7a">Path</text>
  <text x="313" y="140" text-anchor="middle" font-size="8" fill="#1a4a7a">Planner</text>
  <rect x="198" y="152" width="150" height="24" rx="3" fill="#4a90c4" fill-opacity="0.15" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="273" y="167" text-anchor="middle" font-size="8" fill="#1a4a7a">Image Signal Processor (ISP)</text>

  <!-- SoC A output label -->
  <text x="275" y="202" text-anchor="middle" font-size="8.5" fill="#4a90c4">Output: action vector A</text>

  <!-- ═══════════ SoC B (lower path) ═══════════ -->
  <rect x="185" y="260" width="180" height="120" rx="8" fill="#cfe2f3" stroke="#4a90c4" stroke-width="2"/>
  <text x="275" y="284" text-anchor="middle" font-size="13" font-weight="700" fill="#1a4a7a">SoC B</text>
  <text x="275" y="300" text-anchor="middle" font-size="9" fill="#4a90c4">Full Self-Driving Chip</text>
  <!-- Internal blocks of SoC B (identical) -->
  <rect x="198" y="308" width="70" height="28" rx="3" fill="#4a90c4" fill-opacity="0.25" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="233" y="320" text-anchor="middle" font-size="8" fill="#1a4a7a">Neural Net</text>
  <text x="233" y="330" text-anchor="middle" font-size="8" fill="#1a4a7a">Engine</text>
  <rect x="278" y="308" width="70" height="28" rx="3" fill="#4a90c4" fill-opacity="0.25" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="313" y="320" text-anchor="middle" font-size="8" fill="#1a4a7a">Path</text>
  <text x="313" y="330" text-anchor="middle" font-size="8" fill="#1a4a7a">Planner</text>
  <rect x="198" y="342" width="150" height="24" rx="3" fill="#4a90c4" fill-opacity="0.15" stroke="#4a90c4" stroke-width="0.8"/>
  <text x="273" y="357" text-anchor="middle" font-size="8" fill="#1a4a7a">Image Signal Processor (ISP)</text>

  <!-- SoC B output label -->
  <text x="275" y="392" text-anchor="middle" font-size="8.5" fill="#4a90c4">Output: action vector B</text>

  <!-- "Identical computation" brace/label -->
  <line x1="367" y1="90" x2="375" y2="90" stroke="#888" stroke-width="1"/>
  <line x1="375" y1="90" x2="375" y2="370" stroke="#888" stroke-width="1"/>
  <line x1="367" y1="370" x2="375" y2="370" stroke="#888" stroke-width="1"/>
  <text x="380" y="226" font-size="8.5" fill="#888">identical</text>
  <text x="380" y="237" font-size="8.5" fill="#888">computation</text>
  <text x="380" y="248" font-size="8.5" fill="#888">simultaneously</text>

  <!-- ═══════════ COMPARATOR ═══════════ -->
  <rect x="415" y="165" width="130" height="120" rx="8" fill="#fdebd0" stroke="#c87b2a" stroke-width="2"/>
  <text x="480" y="192" text-anchor="middle" font-size="12" font-weight="700" fill="#8a4000">COMPARATOR</text>
  <text x="480" y="207" text-anchor="middle" font-size="9" fill="#c87b2a">bitwise comparison</text>
  <text x="480" y="222" text-anchor="middle" font-size="9" fill="#c87b2a">of action vectors</text>

  <!-- Logic inside comparator -->
  <text x="480" y="244" text-anchor="middle" font-size="10" fill="#c87b2a">A == B ?</text>

  <!-- Match path (green) -->
  <rect x="425" y="252" width="110" height="20" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="480" y="264" text-anchor="middle" font-size="8.5" fill="#3d9e5a">Match → pass through</text>

  <!-- SoC A → Comparator -->
  <line x1="365" y1="130" x2="413" y2="196" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arrowBlk)"/>
  <text x="393" y="155" font-size="8" fill="#c87b2a">vector A</text>

  <!-- SoC B → Comparator -->
  <line x1="365" y1="320" x2="413" y2="254" stroke="#c87b2a" stroke-width="1.5" marker-end="url(#arrowBlk)"/>
  <text x="393" y="305" font-size="8" fill="#c87b2a">vector B</text>

  <!-- ═══════════ VEHICLE CONTROL ═══════════ -->
  <rect x="575" y="185" width="90" height="80" rx="7" fill="#d4edda" stroke="#3d9e5a" stroke-width="2"/>
  <text x="620" y="215" text-anchor="middle" font-size="10" font-weight="700" fill="#1a5c35">Vehicle</text>
  <text x="620" y="229" text-anchor="middle" font-size="10" font-weight="700" fill="#1a5c35">Control</text>
  <text x="620" y="246" text-anchor="middle" font-size="8" fill="#3d9e5a">steering / brakes</text>

  <!-- Comparator → Vehicle Control (match path, green) -->
  <line x1="545" y1="225" x2="573" y2="225" stroke="#3d9e5a" stroke-width="1.8" marker-end="url(#arrowGrn)"/>

  <!-- ═══════════ FAULT DETECTED path ═══════════ -->
  <rect x="430" y="295" width="130" height="48" rx="6" fill="#f9d6d5" stroke="#c44" stroke-width="2"/>
  <text x="495" y="316" text-anchor="middle" font-size="11" font-weight="700" fill="#900">FAULT</text>
  <text x="495" y="330" text-anchor="middle" font-size="11" font-weight="700" fill="#900">DETECTED</text>

  <!-- Comparator → Fault Detected (mismatch) -->
  <line x1="480" y1="285" x2="480" y2="293" stroke="#c44" stroke-width="1.5" marker-end="url(#arrowRed)"/>
  <text x="507" y="292" font-size="8" fill="#c44">mismatch</text>

  <!-- Fault → safe state action -->
  <rect x="430" y="355" width="130" height="30" rx="4" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
  <text x="495" y="370" text-anchor="middle" font-size="8.5" fill="#8a4000">Safe-state: alert driver</text>
  <text x="495" y="381" text-anchor="middle" font-size="8.5" fill="#8a4000">or controlled stop</text>

  <line x1="495" y1="343" x2="495" y2="353" stroke="#c44" stroke-width="1.2" marker-end="url(#arrowRed)"/>

  <!-- Bottom notes -->
  <text x="340" y="415" text-anchor="middle" font-size="9" fill="#555">DMR (Dual Modular Redundancy): two independent computation paths; comparator detects any output divergence</text>
  <text x="340" y="428" text-anchor="middle" font-size="9" fill="#555">Tesla FSD chip: two independent SoCs on one package, continuous real-time cross-checking at inference frequency</text>
  <text x="340" y="443" text-anchor="middle" font-size="9" fill="#888" font-style="italic">Each SoC contains: 12-core CPU + Neural Processing Unit + ISP + safety MCU</text>
</svg>
