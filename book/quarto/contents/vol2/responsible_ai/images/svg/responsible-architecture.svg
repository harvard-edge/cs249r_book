<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#333"/>
    </marker>
    <marker id="arrow-blue" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#4a90c4"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#c44"/>
    </marker>
  </defs>

  <rect width="680" height="460" fill="#fff"/>

  <!-- Main pipeline: left to right -->
  <!-- Input guardrails -->
  <g transform="translate(20, 115)">
    <rect x="0" y="0" width="118" height="110" rx="6" fill="#f9d6d5" stroke="#c44" stroke-width="1.5"/>
    <text x="59" y="20" font-size="10" font-weight="700" fill="#a31f34" text-anchor="middle">INPUT</text>
    <text x="59" y="33" font-size="10" font-weight="700" fill="#a31f34" text-anchor="middle">GUARDRAILS</text>
    <line x1="10" y1="40" x2="108" y2="40" stroke="#c44" stroke-width="0.8"/>
    <text x="59" y="56" font-size="9" fill="#555" text-anchor="middle">PII detection</text>
    <text x="59" y="70" font-size="9" fill="#555" text-anchor="middle">Content filtering</text>
    <text x="59" y="84" font-size="9" fill="#555" text-anchor="middle">Input validation</text>
    <text x="59" y="98" font-size="9" fill="#555" text-anchor="middle">Injection defense</text>
  </g>

  <!-- Arrow -->
  <line x1="140" y1="170" x2="165" y2="170" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- Model -->
  <g transform="translate(168, 135)">
    <rect x="0" y="0" width="96" height="70" rx="6" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.5"/>
    <text x="48" y="28" font-size="12" font-weight="700" fill="#333" text-anchor="middle">ML</text>
    <text x="48" y="44" font-size="12" font-weight="700" fill="#333" text-anchor="middle">Model</text>
    <text x="48" y="60" font-size="9" fill="#555" text-anchor="middle">Inference</text>
  </g>

  <!-- Arrow -->
  <line x1="266" y1="170" x2="291" y2="170" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- Output guardrails -->
  <g transform="translate(294, 115)">
    <rect x="0" y="0" width="118" height="110" rx="6" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.5"/>
    <text x="59" y="20" font-size="10" font-weight="700" fill="#3d9e5a" text-anchor="middle">OUTPUT</text>
    <text x="59" y="33" font-size="10" font-weight="700" fill="#3d9e5a" text-anchor="middle">GUARDRAILS</text>
    <line x1="10" y1="40" x2="108" y2="40" stroke="#3d9e5a" stroke-width="0.8"/>
    <text x="59" y="56" font-size="9" fill="#555" text-anchor="middle">Toxicity filter</text>
    <text x="59" y="70" font-size="9" fill="#555" text-anchor="middle">Factual grounding</text>
    <text x="59" y="84" font-size="9" fill="#555" text-anchor="middle">Bias check</text>
    <text x="59" y="98" font-size="9" fill="#555" text-anchor="middle">Policy compliance</text>
  </g>

  <!-- Arrow to audit logger -->
  <line x1="414" y1="170" x2="439" y2="170" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- Audit Logger -->
  <g transform="translate(442, 135)">
    <rect x="0" y="0" width="96" height="70" rx="6" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.5"/>
    <text x="48" y="28" font-size="10" font-weight="700" fill="#333" text-anchor="middle">Audit</text>
    <text x="48" y="43" font-size="10" font-weight="700" fill="#333" text-anchor="middle">Logger</text>
    <text x="48" y="60" font-size="9" fill="#555" text-anchor="middle">All decisions</text>
  </g>

  <!-- Arrow to human review -->
  <line x1="540" y1="170" x2="565" y2="170" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- Human Review Queue -->
  <g transform="translate(568, 125)">
    <rect x="0" y="0" width="96" height="90" rx="6" fill="#f7f7f7" stroke="#bbb" stroke-width="1.2"/>
    <text x="48" y="22" font-size="10" font-weight="700" fill="#333" text-anchor="middle">Human</text>
    <text x="48" y="37" font-size="10" font-weight="700" fill="#333" text-anchor="middle">Review</text>
    <text x="48" y="52" font-size="10" font-weight="700" fill="#333" text-anchor="middle">Queue</text>
    <line x1="8" y1="60" x2="88" y2="60" stroke="#bbb" stroke-width="0.8"/>
    <text x="48" y="76" font-size="8" fill="#555" text-anchor="middle">Flagged outputs</text>
    <text x="48" y="86" font-size="8" fill="#555" text-anchor="middle">escalated here</text>
  </g>

  <!-- Flagging path from output guardrails to human review -->
  <path d="M 412,210 Q 422,255 500,255 Q 580,255 604,217" fill="none" stroke="#c44" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrow-red)"/>
  <text x="500" y="248" font-size="8" fill="#c44" text-anchor="middle" font-style="italic">flagged outputs</text>

  <!-- Bias Monitoring Dashboard (below model) -->
  <g transform="translate(118, 285)">
    <rect x="0" y="0" width="155" height="68" rx="6" fill="#f9d6d5" stroke="#c44" stroke-width="1.2"/>
    <text x="78" y="19" font-size="10" font-weight="700" fill="#a31f34" text-anchor="middle">Bias Monitoring</text>
    <text x="78" y="33" font-size="10" font-weight="700" fill="#a31f34" text-anchor="middle">Dashboard</text>
    <line x1="10" y1="40" x2="145" y2="40" stroke="#c44" stroke-width="0.6"/>
    <text x="78" y="54" font-size="9" fill="#555" text-anchor="middle">Group fairness metrics</text>
    <text x="78" y="65" font-size="9" fill="#555" text-anchor="middle">Drift detection alerts</text>
  </g>

  <!-- Connection from model to bias monitoring -->
  <line x1="216" y1="205" x2="196" y2="283" stroke="#4a90c4" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrow-blue)"/>

  <!-- Explainability Module (below output) -->
  <g transform="translate(338, 285)">
    <rect x="0" y="0" width="155" height="68" rx="6" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1.2"/>
    <text x="78" y="19" font-size="10" font-weight="700" fill="#4a90c4" text-anchor="middle">Explainability</text>
    <text x="78" y="33" font-size="10" font-weight="700" fill="#4a90c4" text-anchor="middle">Module</text>
    <line x1="10" y1="40" x2="145" y2="40" stroke="#4a90c4" stroke-width="0.6"/>
    <text x="78" y="54" font-size="9" fill="#555" text-anchor="middle">SHAP / LIME values</text>
    <text x="78" y="65" font-size="9" fill="#555" text-anchor="middle">Feature attribution</text>
  </g>

  <!-- Connection from output to explainability -->
  <line x1="373" y1="225" x2="396" y2="283" stroke="#4a90c4" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrow-blue)"/>

  <!-- Connection from explainability to audit -->
  <line x1="493" y1="319" x2="490" y2="207" stroke="#4a90c4" stroke-width="1.0" stroke-dasharray="4,3" marker-end="url(#arrow-blue)"/>
  <text x="508" y="265" font-size="8" fill="#4a90c4" font-style="italic">explanations</text>
  <text x="508" y="275" font-size="8" fill="#4a90c4" font-style="italic">logged</text>

  <!-- Pipeline flow labels at top -->
  <g transform="translate(0, 97)">
    <text x="79" y="0" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Filter</text>
    <text x="216" y="0" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Predict</text>
    <text x="353" y="0" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Validate</text>
    <text x="490" y="0" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Log</text>
    <text x="616" y="0" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Escalate</text>
  </g>

  <!-- Legend -->
  <g transform="translate(20, 395)">
    <rect x="0" y="0" width="14" height="14" rx="2" fill="#f9d6d5" stroke="#c44" stroke-width="1"/>
    <text x="20" y="11" font-size="9" fill="#555">Safety / monitoring</text>

    <rect x="140" y="0" width="14" height="14" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="160" y="11" font-size="9" fill="#555">Model / explainability</text>

    <rect x="300" y="0" width="14" height="14" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
    <text x="320" y="11" font-size="9" fill="#555">Output validation</text>

    <rect x="440" y="0" width="14" height="14" rx="2" fill="#fdebd0" stroke="#c87b2a" stroke-width="1"/>
    <text x="460" y="11" font-size="9" fill="#555">Audit trail</text>
  </g>

  <!-- Bottom annotation -->
  <text x="340" y="440" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Every inference request passes through input and output guardrails; flagged outputs are escalated for human review.</text>
</svg>
