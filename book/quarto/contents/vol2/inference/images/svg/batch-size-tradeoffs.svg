<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 420" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#333"/>
    </marker>
  </defs>

  <!-- Grid lines -->
  <g stroke="#e8e8e8" stroke-width="0.8">
    <line x1="80" y1="60" x2="80" y2="340"/>
    <!-- Horizontal grid -->
    <line x1="80" y1="90" x2="560" y2="90"/>
    <line x1="80" y1="130" x2="560" y2="130"/>
    <line x1="80" y1="170" x2="560" y2="170"/>
    <line x1="80" y1="210" x2="560" y2="210"/>
    <line x1="80" y1="250" x2="560" y2="250"/>
    <line x1="80" y1="290" x2="560" y2="290"/>
    <line x1="80" y1="330" x2="560" y2="330"/>
  </g>

  <!-- Axes -->
  <line x1="80" y1="340" x2="570" y2="340" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
  <line x1="80" y1="345" x2="80" y2="55" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>
  <!-- Right Y axis -->
  <line x1="560" y1="345" x2="560" y2="55" stroke="#333" stroke-width="1.2" marker-end="url(#arrow)"/>

  <!-- X axis title -->
  <text x="320" y="378" text-anchor="middle" font-size="11" font-weight="600" fill="#333">Batch Size</text>

  <!-- X axis ticks -->
  <g font-size="9" fill="#555" text-anchor="middle">
    <line x1="100" y1="340" x2="100" y2="344" stroke="#333" stroke-width="1"/>
    <text x="100" y="356">1</text>
    <line x1="160" y1="340" x2="160" y2="344" stroke="#333" stroke-width="1"/>
    <text x="160" y="356">2</text>
    <line x1="220" y1="340" x2="220" y2="344" stroke="#333" stroke-width="1"/>
    <text x="220" y="356">4</text>
    <line x1="280" y1="340" x2="280" y2="344" stroke="#333" stroke-width="1"/>
    <text x="280" y="356">8</text>
    <line x1="340" y1="340" x2="340" y2="344" stroke="#333" stroke-width="1"/>
    <text x="340" y="356">16</text>
    <line x1="400" y1="340" x2="400" y2="344" stroke="#333" stroke-width="1"/>
    <text x="400" y="356">32</text>
    <line x1="460" y1="340" x2="460" y2="344" stroke="#333" stroke-width="1"/>
    <text x="460" y="356">64</text>
    <line x1="520" y1="340" x2="520" y2="344" stroke="#333" stroke-width="1"/>
    <text x="520" y="356">128</text>
  </g>

  <!-- Left Y axis: Throughput (tokens/sec, log scale) -->
  <text x="28" y="200" text-anchor="middle" font-size="11" font-weight="600" fill="#4a90c4" transform="rotate(-90, 28, 200)">Throughput (tokens/s)</text>
  <g font-size="9" fill="#555" text-anchor="end">
    <text x="76" y="334">100</text>
    <text x="76" y="290">200</text>
    <text x="76" y="250">500</text>
    <text x="76" y="210">1K</text>
    <text x="76" y="170">2K</text>
    <text x="76" y="130">5K</text>
    <text x="76" y="94">10K</text>
  </g>

  <!-- Right Y axis: Latency (ms, log scale) -->
  <text x="616" y="200" text-anchor="middle" font-size="11" font-weight="600" fill="#c44" transform="rotate(90, 616, 200)">Latency P50 (ms)</text>
  <g font-size="9" fill="#555" text-anchor="start">
    <text x="566" y="334">20</text>
    <text x="566" y="290">40</text>
    <text x="566" y="250">80</text>
    <text x="566" y="210">150</text>
    <text x="566" y="170">300</text>
    <text x="566" y="130">600</text>
    <text x="566" y="94">1.2K</text>
  </g>

  <!-- Throughput curve (blue, sublinear growth, flattens) -->
  <!-- Realistic A100 numbers: BS=1 ~150 tok/s, BS=128 ~8000 tok/s (log scale) -->
  <polyline points="100,322 160,290 220,255 280,215 340,182 400,155 460,135 520,122"
    fill="none" stroke="#4a90c4" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/>
  <!-- Data points -->
  <circle cx="100" cy="322" r="3.5" fill="#4a90c4"/>
  <circle cx="160" cy="290" r="3.5" fill="#4a90c4"/>
  <circle cx="220" cy="255" r="3.5" fill="#4a90c4"/>
  <circle cx="280" cy="215" r="3.5" fill="#4a90c4"/>
  <circle cx="340" cy="182" r="3.5" fill="#4a90c4"/>
  <circle cx="400" cy="155" r="3.5" fill="#4a90c4"/>
  <circle cx="460" cy="135" r="3.5" fill="#4a90c4"/>
  <circle cx="520" cy="122" r="3.5" fill="#4a90c4"/>

  <!-- Throughput label -->
  <text x="526" y="115" font-size="9.5" font-weight="700" fill="#4a90c4">Throughput</text>

  <!-- Latency curve (red, linear growth on log scale) -->
  <!-- A100: BS=1 ~25ms, BS=128 ~900ms -->
  <polyline points="100,326 160,306 220,280 280,254 340,228 400,202 460,176 520,148"
    fill="none" stroke="#c44" stroke-width="2.5" stroke-linejoin="round" stroke-linecap="round"/>
  <!-- Data points -->
  <circle cx="100" cy="326" r="3.5" fill="#c44"/>
  <circle cx="160" cy="306" r="3.5" fill="#c44"/>
  <circle cx="220" cy="280" r="3.5" fill="#c44"/>
  <circle cx="280" cy="254" r="3.5" fill="#c44"/>
  <circle cx="340" cy="228" r="3.5" fill="#c44"/>
  <circle cx="400" cy="202" r="3.5" fill="#c44"/>
  <circle cx="460" cy="176" r="3.5" fill="#c44"/>
  <circle cx="520" cy="148" r="3.5" fill="#c44"/>

  <!-- Latency label -->
  <text x="526" y="143" font-size="9.5" font-weight="700" fill="#c44">Latency</text>

  <!-- Optimal operating point (vertical dashed line + highlight) -->
  <line x1="340" y1="60" x2="340" y2="340" stroke="#3d9e5a" stroke-width="1.5" stroke-dasharray="5,3"/>
  <circle cx="340" cy="182" r="6" fill="none" stroke="#3d9e5a" stroke-width="2"/>
  <circle cx="340" cy="228" r="6" fill="none" stroke="#3d9e5a" stroke-width="2"/>

  <!-- Optimal point annotation -->
  <rect x="298" y="62" width="86" height="22" rx="4" fill="#d4edda" stroke="#3d9e5a" stroke-width="1"/>
  <text x="341" y="77" text-anchor="middle" font-size="9" font-weight="700" fill="#3d9e5a">Optimal (BS=16)</text>

  <!-- Memory capacity limit (vertical dashed line) -->
  <line x1="490" y1="60" x2="490" y2="340" stroke="#a31f34" stroke-width="1.5" stroke-dasharray="6,3"/>

  <!-- OOM region (shaded) -->
  <rect x="490" y="60" width="70" height="280" rx="0" fill="#f9d6d5" opacity="0.3"/>

  <!-- Memory limit annotation -->
  <text x="495" y="396" font-size="9" font-weight="700" fill="#a31f34">Memory</text>
  <text x="495" y="408" font-size="9" font-weight="700" fill="#a31f34">capacity limit</text>

  <!-- OOM annotation -->
  <rect x="498" y="86" width="54" height="20" rx="3" fill="#f9d6d5" stroke="#c44" stroke-width="1"/>
  <text x="525" y="100" text-anchor="middle" font-size="9" font-weight="700" fill="#a31f34">OOM</text>

  <!-- Annotations: sublinear vs linear -->
  <g transform="translate(100, 392)">
    <text x="0" y="0" font-size="9" font-style="italic" fill="#999">A100 80 GB, Llama-2 70B (FP16, tensor parallel across 4 GPUs)</text>
  </g>

  <!-- Key insight annotation box -->
  <rect x="140" y="62" width="140" height="36" rx="4" fill="#f7f7f7" stroke="#bbb" stroke-width="1"/>
  <text x="150" y="77" font-size="8.5" fill="#555">Throughput: sublinear</text>
  <text x="150" y="91" font-size="8.5" fill="#555">Latency: ~linear growth</text>
</svg>
