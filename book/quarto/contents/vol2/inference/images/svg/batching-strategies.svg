<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <marker id="arrow" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5 Z" fill="#333"/>
    </marker>
  </defs>

  <!-- ====== (a) No Batching ====== -->
  <text x="24" y="20" font-size="12" font-weight="700" fill="#333">(a) No Batching</text>
  <text x="24" y="34" font-size="9" fill="#555">Requests processed sequentially; GPU idle between requests</text>

  <!-- Time axis ticks for (a) -->
  <g transform="translate(100, 40)">
    <!-- Gantt bars -->
    <!-- R1: 0-40 -->
    <text x="-10" y="16" text-anchor="end" font-size="9" fill="#555">R1</text>
    <rect x="0" y="4" width="60" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="30" y="17" text-anchor="middle" font-size="8" fill="#333">R1</text>
    <!-- idle gap -->
    <rect x="60" y="4" width="20" height="18" rx="0" fill="#f7f7f7" stroke="#bbb" stroke-width="0.6" stroke-dasharray="2,2"/>

    <!-- R2: 80-140 -->
    <text x="-10" y="38" text-anchor="end" font-size="9" fill="#555">R2</text>
    <rect x="80" y="26" width="90" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="125" y="39" text-anchor="middle" font-size="8" fill="#333">R2</text>
    <rect x="170" y="26" width="20" height="18" rx="0" fill="#f7f7f7" stroke="#bbb" stroke-width="0.6" stroke-dasharray="2,2"/>

    <!-- R3: 190-230 -->
    <text x="-10" y="60" text-anchor="end" font-size="9" fill="#555">R3</text>
    <rect x="190" y="48" width="50" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="215" y="61" text-anchor="middle" font-size="8" fill="#333">R3</text>
    <rect x="240" y="48" width="20" height="18" rx="0" fill="#f7f7f7" stroke="#bbb" stroke-width="0.6" stroke-dasharray="2,2"/>

    <!-- R4 -->
    <text x="-10" y="82" text-anchor="end" font-size="9" fill="#555">R4</text>
    <rect x="260" y="70" width="70" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="295" y="83" text-anchor="middle" font-size="8" fill="#333">R4</text>

    <!-- GPU utilization bar -->
    <text x="-10" y="108" text-anchor="end" font-size="8.5" font-weight="600" fill="#555">GPU</text>
    <rect x="0" y="96" width="340" height="14" rx="2" fill="#f7f7f7" stroke="#bbb" stroke-width="0.8"/>
    <!-- Active segments -->
    <rect x="0" y="96" width="60" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <rect x="80" y="96" width="90" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <rect x="190" y="96" width="50" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <rect x="260" y="96" width="70" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <text x="380" y="107" font-size="9" font-weight="600" fill="#a31f34">~40% util.</text>

    <!-- Time axis -->
    <line x1="0" y1="115" x2="340" y2="115" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>
    <text x="170" y="128" text-anchor="middle" font-size="8.5" fill="#555">Time</text>
  </g>

  <!-- ====== (b) Static Batching ====== -->
  <text x="24" y="186" font-size="12" font-weight="700" fill="#333">(b) Static Batching</text>
  <text x="24" y="200" font-size="9" fill="#555">Wait for batch to fill, then process together; early arrivals wait</text>

  <g transform="translate(100, 206)">
    <!-- Wait zone (shaded) -->
    <rect x="0" y="0" width="80" height="88" rx="3" fill="#fdebd0" stroke="#c87b2a" stroke-width="1" stroke-dasharray="3,2"/>
    <text x="40" y="96" text-anchor="middle" font-size="8" font-style="italic" fill="#c87b2a">wait</text>

    <!-- R1 arrives early, waits -->
    <text x="-10" y="16" text-anchor="end" font-size="9" fill="#555">R1</text>
    <rect x="0" y="4" width="20" height="18" rx="2" fill="#fdebd0" stroke="#c87b2a" stroke-width="0.8"/>
    <rect x="80" y="4" width="60" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="110" y="17" text-anchor="middle" font-size="8" fill="#333">R1</text>

    <!-- R2 arrives at t=20 -->
    <text x="-10" y="38" text-anchor="end" font-size="9" fill="#555">R2</text>
    <rect x="20" y="26" width="60" height="18" rx="2" fill="#fdebd0" stroke="#c87b2a" stroke-width="0.8"/>
    <rect x="80" y="26" width="90" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="125" y="39" text-anchor="middle" font-size="8" fill="#333">R2</text>
    <!-- Padding waste for R1 (finishes before R2) -->
    <rect x="140" y="4" width="30" height="18" rx="0" fill="#f9d6d5" stroke="#c44" stroke-width="0.6" stroke-dasharray="2,2"/>
    <text x="155" y="17" text-anchor="middle" font-size="7" fill="#c44">pad</text>

    <!-- R3 arrives at t=50 -->
    <text x="-10" y="60" text-anchor="end" font-size="9" fill="#555">R3</text>
    <rect x="50" y="48" width="30" height="18" rx="2" fill="#fdebd0" stroke="#c87b2a" stroke-width="0.8"/>
    <rect x="80" y="48" width="50" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="105" y="61" text-anchor="middle" font-size="8" fill="#333">R3</text>
    <rect x="130" y="48" width="40" height="18" rx="0" fill="#f9d6d5" stroke="#c44" stroke-width="0.6" stroke-dasharray="2,2"/>
    <text x="150" y="61" text-anchor="middle" font-size="7" fill="#c44">pad</text>

    <!-- R4 arrives at t=70 (triggers batch) -->
    <text x="-10" y="82" text-anchor="end" font-size="9" fill="#555">R4</text>
    <rect x="70" y="70" width="10" height="18" rx="2" fill="#fdebd0" stroke="#c87b2a" stroke-width="0.8"/>
    <rect x="80" y="70" width="70" height="18" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="115" y="83" text-anchor="middle" font-size="8" fill="#333">R4</text>

    <!-- Batch boundary -->
    <line x1="80" y1="0" x2="80" y2="92" stroke="#a31f34" stroke-width="1.2" stroke-dasharray="4,2"/>
    <text x="82" y="-4" font-size="8" font-weight="600" fill="#a31f34">batch dispatch</text>

    <!-- Batch end -->
    <line x1="170" y1="0" x2="170" y2="92" stroke="#a31f34" stroke-width="1.2" stroke-dasharray="4,2"/>

    <!-- GPU utilization bar -->
    <text x="-10" y="124" text-anchor="end" font-size="8.5" font-weight="600" fill="#555">GPU</text>
    <rect x="0" y="112" width="340" height="14" rx="2" fill="#f7f7f7" stroke="#bbb" stroke-width="0.8"/>
    <rect x="80" y="112" width="90" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <text x="380" y="123" font-size="9" font-weight="600" fill="#a31f34">~70% util.</text>

    <!-- Time axis -->
    <line x1="0" y1="132" x2="340" y2="132" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>
    <text x="170" y="145" text-anchor="middle" font-size="8.5" fill="#555">Time</text>
  </g>

  <!-- ====== (c) Dynamic Batching ====== -->
  <text x="24" y="372" font-size="12" font-weight="700" fill="#333">(c) Dynamic Batching</text>
  <text x="24" y="386" font-size="9" fill="#555">Assemble batch within a time window; shorter wait, adaptive batch size</text>

  <g transform="translate(100, 392)">
    <!-- Time window (shorter wait) -->
    <rect x="0" y="0" width="40" height="44" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1" stroke-dasharray="3,2"/>
    <text x="20" y="52" text-anchor="middle" font-size="7" font-style="italic" fill="#3d9e5a">window</text>

    <!-- R1 -->
    <text x="-10" y="14" text-anchor="end" font-size="9" fill="#555">R1</text>
    <rect x="0" y="2" width="10" height="16" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
    <rect x="40" y="2" width="60" height="16" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="70" y="14" text-anchor="middle" font-size="8" fill="#333">R1</text>

    <!-- R2 -->
    <text x="-10" y="34" text-anchor="end" font-size="9" fill="#555">R2</text>
    <rect x="15" y="22" width="25" height="16" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
    <rect x="40" y="22" width="90" height="16" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="85" y="34" text-anchor="middle" font-size="8" fill="#333">R2</text>

    <!-- Batch 2 window -->
    <rect x="130" y="0" width="40" height="44" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1" stroke-dasharray="3,2"/>

    <!-- R3 -->
    <rect x="130" y="2" width="15" height="16" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
    <rect x="170" y="2" width="50" height="16" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="195" y="14" text-anchor="middle" font-size="8" fill="#333">R3</text>

    <!-- R4 -->
    <rect x="140" y="22" width="30" height="16" rx="2" fill="#d4edda" stroke="#3d9e5a" stroke-width="0.8"/>
    <rect x="170" y="22" width="70" height="16" rx="2" fill="#cfe2f3" stroke="#4a90c4" stroke-width="1"/>
    <text x="205" y="34" text-anchor="middle" font-size="8" fill="#333">R4</text>

    <!-- Batch boundaries -->
    <line x1="40" y1="0" x2="40" y2="46" stroke="#a31f34" stroke-width="1" stroke-dasharray="3,2"/>
    <line x1="170" y1="0" x2="170" y2="46" stroke="#a31f34" stroke-width="1" stroke-dasharray="3,2"/>

    <!-- GPU utilization bar -->
    <text x="-10" y="60" text-anchor="end" font-size="8.5" font-weight="600" fill="#555">GPU</text>
    <rect x="0" y="48" width="340" height="14" rx="2" fill="#f7f7f7" stroke="#bbb" stroke-width="0.8"/>
    <rect x="40" y="48" width="90" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <rect x="170" y="48" width="70" height="14" rx="0" fill="#cfe2f3" stroke="none"/>
    <text x="380" y="59" font-size="9" font-weight="600" fill="#3d9e5a">~85% util.</text>
  </g>
</svg>
