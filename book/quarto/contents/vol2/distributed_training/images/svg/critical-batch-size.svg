<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 460"
     font-family="Helvetica Neue, Helvetica, Arial, sans-serif">

  <defs>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <path d="M0,0 L10,3.5 L0,7 Z" fill="#555"/>
    </marker>
    <clipPath id="plot-clip">
      <rect x="80" y="40" width="530" height="340"/>
    </clipPath>
  </defs>

  <!-- Background -->
  <rect width="680" height="460" fill="#fafafa" rx="3"/>

  <!-- ── Plot area ── -->
  <!-- X: 80 to 610, Y: 40 to 380 -->
  <rect x="80" y="40" width="530" height="340" fill="#fff" stroke="#ccc" stroke-width="1.2" rx="2"/>

  <!-- ── Region shading ── -->
  <!-- Green: linear scaling regime, x=80..340, y=40..380 -->
  <rect x="80" y="40" width="260" height="340" fill="#d4edda" opacity="0.45"/>
  <!-- Orange: diminishing returns, x=340..610 -->
  <rect x="340" y="40" width="270" height="340" fill="#fdebd0" opacity="0.45"/>

  <!-- ── Region labels ── -->
  <text x="210" y="70" font-size="11" font-weight="700" fill="#2d7040" text-anchor="middle">Linear Scaling</text>
  <text x="210" y="85" font-size="11" font-weight="700" fill="#2d7040" text-anchor="middle">Regime</text>
  <text x="475" y="70" font-size="11" font-weight="700" fill="#7a4010" text-anchor="middle">Diminishing Returns</text>
  <text x="475" y="85" font-size="11" font-weight="700" fill="#7a4010" text-anchor="middle">Regime</text>

  <!-- ── The curve: rises linearly, then flattens and slightly drops ── -->
  <!-- Curve path through plot: starts low-left, rises to knee at x≈340, flattens/drops right -->
  <!-- Points: (80,360) → (150,300) → (220,240) → (290,185) → (340,160) → (400,148) → (460,142) → (530,138) → (610,136) -->
  <path d="M 80,360 C 120,330 160,280 220,235 C 270,196 310,170 340,158 C 380,146 420,141 470,139 C 510,138 560,138 610,140"
        fill="none" stroke="#4a90c4" stroke-width="2.8" clip-path="url(#plot-clip)"/>

  <!-- ── Critical batch size vertical dashed line at x=340 ── -->
  <line x1="340" y1="40" x2="340" y2="390"
        stroke="#c44" stroke-width="2" stroke-dasharray="7,4"/>
  <text x="340" y="398" font-size="10.5" font-weight="700" fill="#c44" text-anchor="middle">B* (Critical Batch Size)</text>

  <!-- Dot at knee point -->
  <circle cx="340" cy="158" r="5" fill="#c44" stroke="#fff" stroke-width="1.5"/>

  <!-- ── Axis labels ── -->
  <!-- X axis label -->
  <text x="345" y="432" font-size="11.5" font-weight="700" fill="#333" text-anchor="middle">Batch Size  (log scale)</text>

  <!-- Y axis label (rotated) -->
  <text x="26" y="210" font-size="11" font-weight="700" fill="#333" text-anchor="middle"
        transform="rotate(-90, 26, 210)">Training Efficiency (samples/sec per GPU)</text>

  <!-- ── X axis ticks and labels ── -->
  <!-- log scale: 64, 512, 4K, 32K, 256K, 512K -->
  <!-- Positions: 80=64, 164=512, 248=4K, 332=32K, 416=256K, 500=512K, 610=end -->
  <line x1="80" y1="380" x2="610" y2="380" stroke="#aaa" stroke-width="1"/>
  <line x1="80" y1="380" x2="80" y2="385" stroke="#aaa" stroke-width="1"/>
  <text x="80" y="397" font-size="9" fill="#666" text-anchor="middle">64</text>
  <line x1="164" y1="380" x2="164" y2="385" stroke="#aaa" stroke-width="1"/>
  <text x="164" y="397" font-size="9" fill="#666" text-anchor="middle">512</text>
  <line x1="248" y1="380" x2="248" y2="385" stroke="#aaa" stroke-width="1"/>
  <text x="248" y="397" font-size="9" fill="#666" text-anchor="middle">4K</text>
  <line x1="340" y1="380" x2="340" y2="385" stroke="#aaa" stroke-width="1"/>
  <line x1="424" y1="380" x2="424" y2="385" stroke="#aaa" stroke-width="1"/>
  <text x="424" y="397" font-size="9" fill="#666" text-anchor="middle">32K</text>
  <line x1="510" y1="380" x2="510" y2="385" stroke="#aaa" stroke-width="1"/>
  <text x="510" y="397" font-size="9" fill="#666" text-anchor="middle">512K</text>
  <line x1="610" y1="380" x2="610" y2="385" stroke="#aaa" stroke-width="1"/>

  <!-- ── Y axis ticks ── -->
  <line x1="80" y1="380" x2="80" y2="40" stroke="#aaa" stroke-width="1"/>
  <line x1="75" y1="380" x2="80" y2="380" stroke="#aaa" stroke-width="1"/>
  <text x="72" y="383" font-size="9" fill="#666" text-anchor="end">0</text>
  <line x1="75" y1="290" x2="80" y2="290" stroke="#aaa" stroke-width="1"/>
  <text x="72" y="293" font-size="9" fill="#666" text-anchor="end">0.25</text>
  <line x1="75" y1="200" x2="80" y2="200" stroke="#aaa" stroke-width="1"/>
  <text x="72" y="203" font-size="9" fill="#666" text-anchor="end">0.50</text>
  <line x1="75" y1="110" x2="80" y2="110" stroke="#aaa" stroke-width="1"/>
  <text x="72" y="113" font-size="9" fill="#666" text-anchor="end">0.75</text>
  <line x1="75" y1="50" x2="80" y2="50" stroke="#aaa" stroke-width="1"/>
  <text x="72" y="53" font-size="9" fill="#666" text-anchor="end">1.00</text>

  <!-- ── Annotation: linear regime ── -->
  <text x="190" y="230" font-size="9.5" fill="#2d7040" text-anchor="middle">comm. hides</text>
  <text x="190" y="244" font-size="9.5" fill="#2d7040" text-anchor="middle">behind compute</text>

  <!-- ── Annotation: diminishing returns regime ── -->
  <text x="476" y="190" font-size="9.5" fill="#7a4010" text-anchor="middle">gradient noise</text>
  <text x="476" y="204" font-size="9.5" fill="#7a4010" text-anchor="middle">limits learning</text>

  <!-- ── Example points ── -->
  <!-- ResNet-50: B*≈8K → x≈280, y computed from curve ≈ 200 -->
  <circle cx="280" cy="192" r="5" fill="#3d9e5a" stroke="#fff" stroke-width="1.5"/>
  <rect x="155" y="118" width="110" height="38" rx="3" fill="#d4edda" stroke="#3d9e5a" stroke-width="1.2"/>
  <text x="210" y="133" font-size="9.5" font-weight="700" fill="#2d7040" text-anchor="middle">ResNet-50</text>
  <text x="210" y="148" font-size="9" fill="#2d7040" text-anchor="middle">B* &#x2248; 8K samples</text>
  <line x1="210" y1="156" x2="272" y2="192" stroke="#3d9e5a" stroke-width="1.2" stroke-dasharray="3,2"/>

  <!-- GPT-3: B*≈4M → x≈560, y ≈ 138 -->
  <circle cx="558" cy="138" r="5" fill="#c87b2a" stroke="#fff" stroke-width="1.5"/>
  <rect x="470" y="92" width="130" height="38" rx="3" fill="#fdebd0" stroke="#c87b2a" stroke-width="1.2"/>
  <text x="535" y="107" font-size="9.5" font-weight="700" fill="#7a4010" text-anchor="middle">GPT-3</text>
  <text x="535" y="122" font-size="9" fill="#7a4010" text-anchor="middle">B* &#x2248; 4M tokens</text>
  <line x1="535" y1="130" x2="556" y2="138" stroke="#c87b2a" stroke-width="1.2" stroke-dasharray="3,2"/>

  <!-- ── Bottom annotation ── -->
  <text x="345" y="448" font-size="9" fill="#999" font-style="italic" text-anchor="middle">
    Above B*, adding replicas yields sub-linear throughput gains; statistical noise degrades convergence.
  </text>

</svg>
