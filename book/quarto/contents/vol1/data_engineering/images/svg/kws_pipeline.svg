<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 260" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <style>
      .box       { rx: 10; ry: 10; stroke-width: 1.5; }
      .box-input { fill: rgba(0,76,151,0.08); stroke: #004c97; }
      .box-proc  { fill: rgba(163,31,52,0.08); stroke: #a31f34; }
      .box-out   { fill: rgba(46,139,87,0.08); stroke: #2e8b57; }
      .title     { font-size: 12.5px; font-weight: 700; text-anchor: middle; }
      .title-in  { fill: #004c97; }
      .title-proc { fill: #a31f34; }
      .title-out { fill: #2e8b57; }
      .detail    { font-size: 9.5px; fill: #555; text-anchor: middle; }
      .arrow     { stroke: #999; stroke-width: 1.5; fill: none; marker-end: url(#arrowGray); }
      .icon-mic  { fill: none; stroke: #004c97; stroke-width: 2; stroke-linecap: round; }
      .annotation { font-size: 9px; fill: #888; text-anchor: middle; font-style: italic; }
      .badge     { font-size: 8.5px; fill: white; font-weight: 600; text-anchor: middle; }
      .badge-bg  { rx: 3; ry: 3; }
    </style>
    <marker id="arrowGray" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#999" />
    </marker>
  </defs>

  <!-- Stage badges -->
  <rect x="25" y="12" width="80" height="18" class="badge-bg" fill="#004c97" />
  <text x="65" y="25" class="badge">ALWAYS ON</text>

  <rect x="210" y="12" width="100" height="18" class="badge-bg" fill="#a31f34" />
  <text x="260" y="25" class="badge">WAKE DETECTION</text>

  <rect x="445" y="12" width="100" height="18" class="badge-bg" fill="#2e8b57" />
  <text x="495" y="25" class="badge">ACTIVATED</text>

  <!-- Box 1: Microphone / Audio Input -->
  <rect x="15" y="40" width="130" height="120" class="box box-input" />
  <!-- Microphone icon -->
  <line x1="80" y1="62" x2="80" y2="85" class="icon-mic" />
  <path d="M 68 72 Q 68 60 80 60 Q 92 60 92 72" class="icon-mic" />
  <line x1="68" y1="88" x2="92" y2="88" class="icon-mic" />
  <line x1="80" y1="85" x2="80" y2="92" class="icon-mic" />
  <text x="80" y="112" class="title title-in">Microphone</text>
  <text x="80" y="126" class="detail">Continuous</text>
  <text x="80" y="139" class="detail">audio stream</text>
  <text x="80" y="152" class="detail">(16 kHz)</text>

  <!-- Arrow 1 -->
  <line x1="145" y1="100" x2="195" y2="100" class="arrow" />
  <text x="170" y="92" class="annotation">frames</text>

  <!-- Box 2: Wake Word Detector -->
  <rect x="195" y="40" width="150" height="120" class="box box-proc" />
  <!-- Small waveform icon -->
  <polyline points="225,68 235,58 245,78 255,55 265,80 275,62 285,72 295,65 305,70 315,68" fill="none" stroke="#a31f34" stroke-width="1.5" />
  <text x="270" y="100" class="title title-proc">Wake Word</text>
  <text x="270" y="115" class="title title-proc">Detector</text>
  <text x="270" y="132" class="detail">Lightweight model</text>
  <text x="270" y="145" class="detail">(~250 KB)</text>

  <!-- Arrow 2: keyword detected -->
  <line x1="345" y1="100" x2="420" y2="100" class="arrow" />
  <text x="382" y="92" class="annotation">keyword</text>
  <text x="382" y="82" class="annotation">detected</text>

  <!-- Box 3: Voice Assistant -->
  <rect x="420" y="40" width="150" height="120" class="box box-out" />
  <!-- Cloud/brain icon -->
  <circle cx="495" cy="68" r="10" fill="none" stroke="#2e8b57" stroke-width="1.5" />
  <circle cx="485" cy="74" r="7" fill="none" stroke="#2e8b57" stroke-width="1.2" />
  <circle cx="505" cy="74" r="7" fill="none" stroke="#2e8b57" stroke-width="1.2" />
  <text x="495" y="100" class="title title-out">Voice</text>
  <text x="495" y="115" class="title title-out">Assistant</text>
  <text x="495" y="132" class="detail">Full NLU pipeline</text>
  <text x="495" y="145" class="detail">(cloud or on-device)</text>

  <!-- Bottom annotations showing the constraint trade-offs -->
  <rect x="15" y="175" width="130" height="70" rx="6" ry="6" fill="#f8f8f8" stroke="#ddd" stroke-width="1" />
  <text x="80" y="194" class="detail" font-weight="600" fill="#004c97">Power</text>
  <text x="80" y="210" class="detail">Milliwatts</text>
  <text x="80" y="224" class="detail">(always listening)</text>

  <rect x="195" y="175" width="150" height="70" rx="6" ry="6" fill="#f8f8f8" stroke="#ddd" stroke-width="1" />
  <text x="270" y="194" class="detail" font-weight="600" fill="#a31f34">Latency</text>
  <text x="270" y="210" class="detail">&lt; 200 ms response</text>
  <text x="270" y="224" class="detail">&gt; 95% accuracy</text>

  <rect x="420" y="175" width="150" height="70" rx="6" ry="6" fill="#f8f8f8" stroke="#ddd" stroke-width="1" />
  <text x="495" y="194" class="detail" font-weight="600" fill="#2e8b57">Compute</text>
  <text x="495" y="210" class="detail">Full model activated</text>
  <text x="495" y="224" class="detail">only when needed</text>

</svg>
