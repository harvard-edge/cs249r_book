<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 780 300" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <style>
      .stage-box  { rx: 8; ry: 8; stroke-width: 1.5; }
      .input-box  { fill: rgba(0,76,151,0.08); stroke: #004c97; }
      .proc-box   { fill: rgba(163,31,52,0.08); stroke: #a31f34; }
      .out-box    { fill: rgba(46,139,87,0.08); stroke: #2e8b57; }
      .title      { font-size: 12px; font-weight: 700; text-anchor: middle; }
      .title-in   { fill: #004c97; }
      .title-proc { fill: #a31f34; }
      .title-out  { fill: #2e8b57; }
      .detail     { font-size: 9.5px; fill: #555; text-anchor: middle; }
      .arrow      { stroke: #999; stroke-width: 1.5; fill: none; marker-end: url(#arrowG); }
      .badge      { font-size: 8px; fill: white; font-weight: 600; text-anchor: middle; }
      .badge-bg   { rx: 3; ry: 3; }
      .annotation { font-size: 9px; fill: #888; text-anchor: middle; font-style: italic; }
      .waveform   { fill: none; stroke-width: 1.5; stroke-linecap: round; }
    </style>
    <marker id="arrowG" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#999" />
    </marker>
  </defs>

  <!-- STAGE 1: Inputs (two sources) -->
  <rect x="10" y="15" width="110" height="18" class="badge-bg" fill="#004c97" />
  <text x="65" y="28" class="badge">DATA SOURCES</text>

  <!-- Audio input -->
  <rect x="10" y="42" width="130" height="80" class="stage-box input-box" />
  <!-- Waveform icon -->
  <polyline points="25,72 35,62 45,82 55,58 65,85 75,65 85,78 95,60 105,75 115,70 125,72" class="waveform" stroke="#004c97" />
  <text x="75" y="100" class="title title-in">Audio</text>
  <text x="75" y="114" class="detail">Speech recordings</text>

  <!-- Text transcript input -->
  <rect x="10" y="140" width="130" height="80" class="stage-box input-box" />
  <!-- Text lines icon -->
  <line x1="35" y1="162" x2="105" y2="162" stroke="#004c97" stroke-width="1.5" />
  <line x1="35" y1="172" x2="95" y2="172" stroke="#004c97" stroke-width="1.5" />
  <line x1="35" y1="182" x2="100" y2="182" stroke="#004c97" stroke-width="1.5" />
  <text x="75" y="202" class="title title-in">Transcript</text>
  <text x="75" y="216" class="detail">"the cat sat on..."</text>

  <!-- Arrow from inputs -->
  <line x1="140" y1="82" x2="185" y2="110" class="arrow" />
  <line x1="140" y1="180" x2="185" y2="150" class="arrow" />

  <!-- STAGE 2: Forced Alignment -->
  <rect x="180" y="15" width="140" height="18" class="badge-bg" fill="#a31f34" />
  <text x="250" y="28" class="badge">FORCED ALIGNMENT</text>

  <rect x="185" y="42" width="140" height="185" class="stage-box proc-box" />
  <!-- Alignment visualization: waveform with word boundaries -->
  <polyline points="205,72 215,60 225,82 235,55 245,80 255,62 265,78 275,65 285,72 295,68 305,72" class="waveform" stroke="#a31f34" />
  <!-- Word boundary markers -->
  <line x1="218" y1="86" x2="218" y2="100" stroke="#a31f34" stroke-width="1" stroke-dasharray="3,2" />
  <line x1="248" y1="86" x2="248" y2="100" stroke="#a31f34" stroke-width="1" stroke-dasharray="3,2" />
  <line x1="278" y1="86" x2="278" y2="100" stroke="#a31f34" stroke-width="1" stroke-dasharray="3,2" />
  <text x="233" y="112" font-size="8" fill="#a31f34" text-anchor="middle">the</text>
  <text x="263" y="112" font-size="8" fill="#a31f34" text-anchor="middle">cat</text>
  <text x="293" y="112" font-size="8" fill="#a31f34" text-anchor="middle">sat</text>

  <text x="255" y="140" class="title title-proc">Forced</text>
  <text x="255" y="155" class="title title-proc">Alignment</text>
  <text x="255" y="175" class="detail">Viterbi algorithm</text>
  <text x="255" y="189" class="detail">matches words to</text>
  <text x="255" y="203" class="detail">audio timestamps</text>
  <text x="255" y="220" class="detail">(ms precision)</text>

  <!-- Arrow to segmentation -->
  <line x1="325" y1="130" x2="375" y2="130" class="arrow" />
  <text x="350" y="123" class="annotation">boundaries</text>

  <!-- STAGE 3: Segmentation -->
  <rect x="375" y="15" width="120" height="18" class="badge-bg" fill="#a31f34" />
  <text x="435" y="28" class="badge">SEGMENTATION</text>

  <rect x="375" y="42" width="140" height="185" class="stage-box proc-box" />
  <!-- Segmented clips visualization -->
  <rect x="395" y="60" width="100" height="22" rx="4" fill="rgba(163,31,52,0.12)" stroke="#a31f34" stroke-width="1" />
  <text x="445" y="75" font-size="9" fill="#a31f34" text-anchor="middle">"the" (0.8s)</text>

  <rect x="395" y="88" width="100" height="22" rx="4" fill="rgba(163,31,52,0.18)" stroke="#a31f34" stroke-width="1" />
  <text x="445" y="103" font-size="9" fill="#a31f34" text-anchor="middle" font-weight="600">"cat" (1.0s)</text>

  <rect x="395" y="116" width="100" height="22" rx="4" fill="rgba(163,31,52,0.12)" stroke="#a31f34" stroke-width="1" />
  <text x="445" y="131" font-size="9" fill="#a31f34" text-anchor="middle">"sat" (0.9s)</text>

  <text x="445" y="160" class="title title-proc">Segment</text>
  <text x="445" y="175" class="title title-proc">Extraction</text>
  <text x="445" y="195" class="detail">Pad/trim to 1s</text>
  <text x="445" y="209" class="detail">Quality filtering</text>
  <text x="445" y="223" class="detail">Noise validation</text>

  <!-- Arrow to output -->
  <line x1="515" y1="130" x2="565" y2="130" class="arrow" />

  <!-- STAGE 4: Output corpus -->
  <rect x="565" y="15" width="120" height="18" class="badge-bg" fill="#2e8b57" />
  <text x="625" y="28" class="badge">TRAINING CORPUS</text>

  <rect x="565" y="42" width="145" height="185" class="stage-box out-box" />
  <!-- Output samples grid -->
  <rect x="585" y="58" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="610" y="76" font-size="8" fill="#2e8b57" text-anchor="middle">EN: "hey"</text>

  <rect x="645" y="58" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="670" y="76" font-size="8" fill="#2e8b57" text-anchor="middle">ES: "hola"</text>

  <rect x="585" y="92" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="610" y="110" font-size="8" fill="#2e8b57" text-anchor="middle">FR: "oui"</text>

  <rect x="645" y="92" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="670" y="110" font-size="8" fill="#2e8b57" text-anchor="middle">ZH: "shi"</text>

  <rect x="585" y="126" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="610" y="144" font-size="8" fill="#2e8b57" text-anchor="middle">DE: "ja"</text>

  <rect x="645" y="126" width="50" height="28" rx="3" fill="rgba(46,139,87,0.15)" stroke="#2e8b57" stroke-width="0.8" />
  <text x="670" y="144" font-size="8" fill="#2e8b57" text-anchor="middle">JA: "hai"</text>

  <text x="637" y="175" class="title title-out">Labeled</text>
  <text x="637" y="190" class="title title-out">Corpus</text>
  <text x="637" y="210" class="detail">23M samples</text>
  <text x="637" y="224" class="detail">50+ languages</text>

  <!-- Bottom annotation -->
  <text x="390" y="290" font-size="10" fill="#888" text-anchor="middle" font-style="italic">Automated pipeline: paired audio + transcript to labeled 1-second keyword segments</text>

</svg>
