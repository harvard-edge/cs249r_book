<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 370" font-family="Helvetica Neue, Helvetica, Arial, sans-serif">
  <defs>
    <style>
      .axis       { stroke: #333; stroke-width: 1.2; fill: none; }
      .grid       { stroke: #eee; stroke-width: 0.7; }
      .tick-label { font-size: 9.5px; fill: #555; text-anchor: middle; }
      .y-label    { font-size: 9.5px; fill: #555; text-anchor: end; }
      .axis-title { font-size: 11px; fill: #333; font-weight: 600; }
      .bar-main   { fill: rgba(0,76,151,0.50); stroke: #004c97; stroke-width: 0.5; }
      .bar-edge   { fill: rgba(163,31,52,0.40); stroke: #a31f34; stroke-width: 0.5; }
      .curve      { fill: none; stroke: #a31f34; stroke-width: 2; }
      .title      { font-size: 13px; font-weight: 700; fill: #333; text-anchor: middle; }
      .subtitle   { font-size: 10px; fill: #777; text-anchor: middle; font-style: italic; }
      .callout    { font-size: 9px; fill: #a31f34; font-weight: 600; }
      .annotation { font-size: 9px; fill: #888; font-style: italic; }
    </style>
  </defs>

  <!-- Title -->
  <text x="310" y="26" class="title">Quantization Error Distribution</text>
  <text x="310" y="42" class="subtitle">Error weighted by probability density p(x)</text>

  <!-- Chart area: x=70..560, y=58..290 -->
  <!-- X-axis: quantization error from -3 to +3 (arbitrary units) -->
  <!-- Y-axis: weighted probability density -->

  <!-- Axes -->
  <line x1="70" y1="290" x2="560" y2="290" class="axis" />
  <line x1="70" y1="58"  x2="70"  y2="290" class="axis" />

  <!-- Horizontal grid -->
  <line x1="70" y1="232" x2="560" y2="232" class="grid" />
  <line x1="70" y1="174" x2="560" y2="174" class="grid" />
  <line x1="70" y1="116" x2="560" y2="116" class="grid" />
  <line x1="70" y1="58"  x2="560" y2="58"  class="grid" />

  <!-- Y-axis labels -->
  <text x="62" y="294" class="y-label">0</text>
  <text x="62" y="236" class="y-label">0.25</text>
  <text x="62" y="178" class="y-label">0.50</text>
  <text x="62" y="120" class="y-label">0.75</text>
  <text x="62" y="62"  class="y-label">1.0</text>

  <!-- X-axis labels (error values) -->
  <text x="70"  y="306" class="tick-label">-3</text>
  <text x="152" y="306" class="tick-label">-2</text>
  <text x="233" y="306" class="tick-label">-1</text>
  <text x="315" y="306" class="tick-label">0</text>
  <text x="397" y="306" class="tick-label">+1</text>
  <text x="478" y="306" class="tick-label">+2</text>
  <text x="560" y="306" class="tick-label">+3</text>

  <!-- Center line at zero error -->
  <line x1="315" y1="58" x2="315" y2="290" stroke="#ddd" stroke-width="1" stroke-dasharray="4,3" />

  <!-- Histogram bars (bell curve shape, symmetric around 0) -->
  <!-- 24 bins across 490px = ~20px each -->

  <!-- Left tail (large negative error) - red -->
  <rect x="72"  y="284" width="19" height="6"   class="bar-edge" />
  <rect x="92"  y="280" width="19" height="10"  class="bar-edge" />
  <rect x="112" y="275" width="19" height="15"  class="bar-edge" />

  <!-- Left body - transition to blue -->
  <rect x="132" y="266" width="19" height="24"  class="bar-main" />
  <rect x="152" y="252" width="19" height="38"  class="bar-main" />
  <rect x="172" y="230" width="19" height="60"  class="bar-main" />
  <rect x="192" y="200" width="19" height="90"  class="bar-main" />
  <rect x="212" y="162" width="19" height="128" class="bar-main" />
  <rect x="232" y="120" width="19" height="170" class="bar-main" />
  <rect x="252" y="86"  width="19" height="204" class="bar-main" />
  <rect x="272" y="66"  width="19" height="224" class="bar-main" />
  <rect x="292" y="60"  width="19" height="230" class="bar-main" />

  <!-- Right body -->
  <rect x="312" y="62"  width="19" height="228" class="bar-main" />
  <rect x="332" y="70"  width="19" height="220" class="bar-main" />
  <rect x="352" y="90"  width="19" height="200" class="bar-main" />
  <rect x="372" y="125" width="19" height="165" class="bar-main" />
  <rect x="392" y="168" width="19" height="122" class="bar-main" />
  <rect x="412" y="205" width="19" height="85"  class="bar-main" />
  <rect x="432" y="235" width="19" height="55"  class="bar-main" />
  <rect x="452" y="256" width="19" height="34"  class="bar-main" />

  <!-- Right tail - red -->
  <rect x="472" y="268" width="19" height="22"  class="bar-edge" />
  <rect x="492" y="276" width="19" height="14"  class="bar-edge" />
  <rect x="512" y="282" width="19" height="8"   class="bar-edge" />

  <!-- Smooth envelope curve (bell shape) -->
  <path d="M 80,287 C 120,280 150,265 190,230 Q 230,170 270,90 Q 300,62 315,60 Q 330,62 360,90 Q 400,170 440,230 C 470,265 500,280 540,287" class="curve" />

  <!-- Tail annotations -->
  <line x1="100" y1="270" x2="130" y2="230" stroke="#a31f34" stroke-width="0.8" stroke-dasharray="3,2" />
  <text x="135" y="222" class="callout">Tail errors</text>
  <text x="135" y="234" class="annotation">accumulate across</text>
  <text x="135" y="246" class="annotation">millions of weights</text>

  <line x1="510" y1="270" x2="480" y2="230" stroke="#a31f34" stroke-width="0.8" stroke-dasharray="3,2" />
  <text x="475" y="222" class="callout" text-anchor="end">Tail errors</text>
  <text x="475" y="234" class="annotation" text-anchor="end">affect model</text>
  <text x="475" y="246" class="annotation" text-anchor="end">accuracy</text>

  <!-- Axis titles -->
  <text x="315" y="330" class="axis-title" text-anchor="middle">Quantization Error</text>
  <text x="20" y="174" class="axis-title" text-anchor="middle" transform="rotate(-90,20,174)">p(x) x Error</text>

  <!-- Bottom note -->
  <text x="310" y="358" font-size="9" fill="#999" text-anchor="middle" font-style="italic">Most quantization errors are near zero; tail errors introduce cumulative noise</text>

</svg>
