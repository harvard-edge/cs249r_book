# =============================================================================
# VOLUME I PDF CONFIGURATION (Single-spaced, 9pt â€” regular layout)
# =============================================================================
# Builds only Volume I: Introduction
#
# Usage:
#   cp config/_quarto-pdf-vol1.yml _quarto.yml
#   quarto render --to titlepage-pdf
#
# For the double-spaced copy-editing PDF, use:
#   cp config/_quarto-pdf-vol1-copyedit.yml _quarto.yml
#   quarto render --to titlepage-pdf
# =============================================================================

project:
  output-dir: _build/pdf-vol1

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book-vol1.png
  cover-image-alt: "Cover image."

  title: "Introduction to Machine Learning Systems"

  date: today
  date-format: long

  author:
    name: Vijay Janapa Reddi
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations: Harvard University
    corresponding: true
    roles: "Author, editor and curator."

  abstract: |
    Foundations of machine learning systems engineering for single-machine deployment. ML systems are treated as infrastructure governed by physical constraints: data movement, memory bandwidth, and compute limits shape design decisions from model architecture to deployment target. The treatment progresses through conceptual models, end-to-end workflows, optimization under operational constraints, and production deployment. Quantitative reasoning and enduring principles are emphasized over transient tools. Suitable for undergraduate and graduate courses in computer science and engineering, and for practitioners designing flexible, efficient, and robust ML systems.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      Built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # ==================================================
    # Volume I Frontmatter
    # ==================================================
    # - contents/vol1/frontmatter/dedication.qmd
    # - contents/vol1/frontmatter/foreword.qmd
    # - contents/vol1/frontmatter/about.qmd
    # - contents/vol1/frontmatter/acknowledgements.qmd
    # - contents/vol1/frontmatter/notation.qmd

    # ==================================================
    # Part I: Foundations
    # ==================================================
    # - contents/vol1/parts/foundations_principles.qmd
    # - contents/vol1/introduction/introduction.qmd
    # - contents/vol1/ml_systems/ml_systems.qmd
    # - contents/vol1/ml_workflow/ml_workflow.qmd
    # - contents/vol1/data_engineering/data_engineering.qmd

    # ==================================================
    # Part II: Build
    # ==================================================
    # - contents/vol1/parts/build_principles.qmd
    # - contents/vol1/nn_computation/nn_computation.qmd
    # - contents/vol1/nn_architectures/nn_architectures.qmd
    # - contents/vol1/frameworks/frameworks.qmd
    # - contents/vol1/training/training.qmd

    # ==================================================
    # Part III: Optimize
    # ==================================================
    # - contents/vol1/parts/optimize_principles.qmd
    # - contents/vol1/data_selection/data_selection.qmd
    # - contents/vol1/optimizations/model_compression.qmd
    # - contents/vol1/hw_acceleration/hw_acceleration.qmd
    - contents/vol1/benchmarking/benchmarking.qmd

    # ==================================================
    # Part IV: Deploy
    # ==================================================
    # - contents/vol1/parts/deploy_principles.qmd
    # - contents/vol1/model_serving/model_serving.qmd
    # - contents/vol1/ml_ops/ml_ops.qmd
    # - contents/vol1/responsible_engr/responsible_engr.qmd
    # - contents/vol1/conclusion/conclusion.qmd
    # - contents/vol1/backmatter/references.qmd

  # ==================================================
  # Appendices (uses Appendix A, B, C... numbering)
  # ==================================================
  # appendices:
    # - contents/vol1/backmatter/appendix_dam.qmd
    # - contents/vol1/backmatter/appendix_machine.qmd
    # - contents/vol1/backmatter/appendix_algorithm.qmd
    # - contents/vol1/backmatter/appendix_data.qmd
    # - contents/vol1/backmatter/glossary/glossary.qmd

bibliography:
  - contents/vol1/backmatter/references.bib
  - contents/vol1/backmatter/war_stories.bib

citation: true
license: CC-BY-NC-SA

metadata-files:
  - config/shared/base/crossref-video.yml
  - config/shared/base/custom-numbered-blocks.yml
  - config/shared/base/execute-env.yml
  - config/shared/base/diagram.yml
  - config/shared/pdf/filters.yml
  - config/shared/pdf/filter-metadata.yml
  - config/shared/vol1/filter-metadata-paths.yml
  - config/shared/pdf/custom-numbered-blocks-overrides.yml
  - config/shared/pdf/titlepage-theme-common.yml
  - config/shared/pdf/titlepage-pdf-common.yml
  - config/shared/pdf/build-production-common.yml

editor:
  render-on-save: true

format:
  titlepage-pdf:
    coverpage: true
    coverpage-title: "Machine Learning Systems"
    coverpage-bg-image: "assets/images/covers/cover-image-transparent-vol1.png"
    coverpage-author: ["Vijay Janapa Reddi"]
    coverpage-footer: "Introduction to"
    coverpage-theme:
        page-text-align: "left"
        bg-image-left: "0.225\\paperwidth"
        bg-image-bottom: 9
        bg-image-rotate: 0
        bg-image-opacity: 1.0
        header-style: "none"
        date-style: "none"

        footer-fontsize: 22
        footer-left: "0.075\\paperwidth"
        footer-bottom: "0.435\\paperwidth"
        footer-width: "0.9\\paperwidth"
        footer-align: "left"

        title-fontsize: 60
        title-left: "0.075\\paperwidth"
        title-bottom: "0.37\\paperwidth"
        title-width: "0.9\\paperwidth"

        author-style: "plain"
        author-sep: "newline"
        author-fontsize: 25
        author-align: "right"
        author-bottom: "0.1375\\paperwidth"
        author-left: ".925\\paperwidth"
        author-width: 6in

    titlepage: true
    titlepage-theme:
      elements: [ "\\titleblock",
                  "Prof. Vijay Janapa Reddi",
                  "School of Engineering and Applied Sciences",
                  "Harvard University",
                  "\\vfill",
                  "{{< meta date >}}",
                  "\\vfill"]

    lof: false
    lot: false
    lol: false
    toc-depth: 2
    number-depth: 2
    keep-tex: true  # Preserve .lof for figure manifest generation
    reference-location: document
    citation-location: document
    include-in-header:
      - file: "tex/theme-colors-vol1.tex"
      - file: "tex/header-includes.tex"
      - text: |
          \usepackage{needspace}
          \let\Needspace\needspace
    include-before-body:
      - file: "tex/before-body-includes.tex"
