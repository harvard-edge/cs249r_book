# =============================================================================
# VOLUME II PDF CONFIGURATION — COPYEDIT VERSION (Double-spaced, 9pt)
# =============================================================================
# Double-spaced PDF for MIT Press copyediting workflow.
# Output: Single pages (not spreads), double line spacing for annotation.
#
# Usage:
#   cp config/_quarto-pdf-vol2-copyedit.yml _quarto.yml
#   quarto render --to titlepage-pdf
#
# Note: This produces a much longer PDF (~2x pages) due to double spacing.
# Use _quarto-pdf-vol2.yml for the final single-spaced production PDF.
# =============================================================================

project:
  output-dir: _build/pdf-vol2-copyedit

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book-vol2.png
  cover-image-alt: "Cover image."

  title: "Advanced Machine Learning Systems"
  subtitle: "COPYEDIT VERSION — Double-Spaced"

  date: today
  date-format: long

  author:
    name: Vijay Janapa Reddi
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations: Harvard University
    corresponding: true
    roles: "Author, editor and curator."

  abstract: |
    Volume II of Machine Learning Systems extends the foundations from Volume I to address the complexities of building and managing the machine learning fleet. This volume covers the infrastructure, storage, and communication patterns required for distributed ML, parallelism strategies for training models too large for single machines, fault tolerance mechanisms, and inference optimization at scale. It also addresses production challenges including edge intelligence, security, privacy, and robust system design, concluding with responsible AI practices and sustainable computing. This volume equips practitioners with the knowledge to build and operate ML systems at production scale.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      This book was built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # ==================================================
    # Volume II Frontmatter
    # ==================================================
    - contents/vol2/frontmatter/about.qmd
    - contents/vol2/frontmatter/acknowledgements.qmd

    # ==================================================
    # Part I: The Fleet
    # ==================================================
    - contents/vol2/parts/fleet_principles.qmd
    - contents/vol2/introduction/introduction.qmd
    - contents/vol2/compute_infrastructure/compute_infrastructure.qmd
    - contents/vol2/network_fabrics/network_fabrics.qmd
    - contents/vol2/data_systems/data_systems.qmd

    # ==================================================
    # Part II: Distributed ML
    # ==================================================
    - contents/vol2/parts/distributed_ml_principles.qmd
    - contents/vol2/distributed_training/distributed_training.qmd
    - contents/vol2/collective_communication/collective_communication.qmd
    - contents/vol2/fault_tolerance/fault_tolerance.qmd
    - contents/vol2/fleet_orchestration/fleet_orchestration.qmd

    # ==================================================
    # Part III: Deployment at Scale
    # ==================================================
    - contents/vol2/parts/deployment_principles.qmd
    - contents/vol2/inference/inference.qmd
    - contents/vol2/performance_engineering/performance_engineering.qmd
    - contents/vol2/edge_intelligence/edge_intelligence.qmd
    - contents/vol2/ops_scale/ops_scale.qmd

    # ==================================================
    # Part IV: The Responsible Fleet
    # ==================================================
    - contents/vol2/parts/responsible_fleet_principles.qmd
    - contents/vol2/security_privacy/security_privacy.qmd
    - contents/vol2/robust_ai/robust_ai.qmd
    - contents/vol2/sustainable_ai/sustainable_ai.qmd
    - contents/vol2/responsible_engineering/responsible_engineering.qmd
    - contents/vol2/conclusion/conclusion.qmd
    - contents/vol2/backmatter/references.qmd

  appendices:
    - contents/vol2/backmatter/glossary/glossary.qmd

bibliography:
  - contents/vol2/backmatter/references.bib

metadata-files:
  - config/shared/base/crossref-video.yml
  - config/shared/base/custom-numbered-blocks.yml
  - config/shared/base/execute-env.yml
  - config/shared/base/diagram.yml
  - config/shared/pdf/filters.yml
  - config/shared/pdf/filter-metadata.yml
  - config/shared/vol2/filter-metadata-paths.yml
  - config/shared/pdf/custom-numbered-blocks-overrides.yml
  - config/shared/pdf/titlepage-theme-common.yml
  - config/shared/pdf/titlepage-pdf-common.yml
  - config/shared/pdf/titlepage-pdf-copyedit-common.yml
  - config/shared/pdf/copyedit-watermark.yml
  - config/shared/pdf/build-copyedit-common.yml

format:
  titlepage-pdf:
    # Simplified cover for copyedit version
    include-in-header:
      - file: "tex/theme-colors-vol2.tex"
      - file: "tex/header-includes.tex"
      - text: |
          \usepackage{needspace}
          \let\Needspace\needspace
    include-before-body:
      - file: "tex/before-body-includes-vol2.tex"
