# =============================================================================
# VOLUME II EPUB CONFIGURATION
# =============================================================================
# Builds only Volume II: Advanced ML Systems as EPUB
#
# Usage:
#   cp config/_quarto-epub-vol2.yml _quarto.yml
#   quarto render --to epub
# =============================================================================

project:
  type: book
  output-dir: _build/epub-vol2
  post-render:
    - scripts/clean_svgs.py
    - scripts/epub_postprocess.py

  preview:
    browser: false
    navigate: false

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book.png
  cover-image-alt: "Cover image."

  title: "Machine Learning Systems"
  subtitle: "Volume II: Advanced ML Systems"

  date: today
  date-format: long

  author:
    name: "Prof. Vijay Janapa Reddi"
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations:
      - name: "Harvard University"
        department: "School of Engineering and Applied Sciences"
        city: "Cambridge"
        state: "MA"
        country: "USA"
    corresponding: true
    roles: "Author, editor and curator."
    orcid: "0000-0002-5259-7721"

  abstract: |
    Volume II of Machine Learning Systems extends the foundations from Volume I to address distributed systems, production deployment at scale, and responsible AI practices. This volume covers infrastructure, distributed training, fault tolerance, and the challenges of operating ML systems in production.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      This book was built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # Volume II Frontmatter
    - contents/vol2/frontmatter/foreword.qmd
    - contents/vol2/frontmatter/about.qmd
    - contents/vol2/frontmatter/acknowledgements.qmd

    # Part I: Foundations of Scale
    - part: "Part I: Foundations of Scale"
      chapters:
        - contents/vol2/introduction/introduction.qmd
        - contents/vol2/infrastructure/infrastructure.qmd
        - contents/vol2/storage/storage.qmd
        - contents/vol2/communication/communication.qmd

    # Part II: Distributed Systems
    - part: "Part II: Distributed Systems"
      chapters:
        - contents/vol2/distributed_training/distributed_training.qmd
        - contents/vol2/inference/inference.qmd
        - contents/vol2/edge_intelligence/edge_intelligence.qmd
        - contents/vol2/fault_tolerance/fault_tolerance.qmd

    # Part III: Production Concerns
    - part: "Part III: Production Concerns"
      chapters:
        - contents/vol2/privacy_security/privacy_security.qmd
        - contents/vol2/robust_ai/robust_ai.qmd
        - contents/vol2/ops_scale/ops_scale.qmd

    # Part IV: Responsible AI at Scale
    - part: "Part IV: Responsible AI at Scale"
      chapters:
        - contents/vol2/responsible_ai/responsible_ai.qmd
        - contents/vol2/sustainable_ai/sustainable_ai.qmd
        - contents/vol2/ai_for_good/ai_for_good.qmd
        - contents/vol2/frontiers/frontiers.qmd
        - contents/vol2/conclusion/conclusion.qmd

    # Volume II Backmatter
    - contents/vol2/backmatter/glossary/glossary.qmd
    - contents/vol2/backmatter/references.qmd

bibliography:
  - contents/vol2/introduction/introduction.bib
  - contents/vol2/infrastructure/infrastructure.bib
  - contents/vol2/storage/storage.bib
  - contents/vol2/communication/communication.bib
  - contents/vol2/distributed_training/distributed_training.bib
  - contents/vol2/inference/inference.bib
  - contents/vol2/edge_intelligence/edge_intelligence.bib
  - contents/vol2/fault_tolerance/fault_tolerance.bib
  - contents/vol2/privacy_security/privacy_security.bib
  - contents/vol2/robust_ai/robust_ai.bib
  - contents/vol2/ops_scale/ops_scale.bib
  - contents/vol2/responsible_ai/responsible_ai.bib
  - contents/vol2/sustainable_ai/sustainable_ai.bib
  - contents/vol2/ai_for_good/ai_for_good.bib
  - contents/vol2/frontiers/frontiers.bib
  - contents/vol2/conclusion/conclusion.bib

filters:
  - pandoc-ext/diagram
  - mlsysbook-ext/custom-numbered-blocks

filter-metadata:
  quiz-config:
    file-pattern: "*_quizzes.json"
    scan-directory: "contents/vol2"
    auto-discover-pdf: false

  part-summaries:
    file: "contents/parts/summaries-vol2.yml"
    enabled: true

  mlsysbook-ext/custom-numbered-blocks:
    icon-path: "assets/images/icons/callouts"
    icon-format: "png"
    groups:
      quiz-question:
        colors: ["F0F0F8", "5B4B8A"]
        collapse: true
      quiz-answer:
        colors: ["E8F2EA", "4a7c59"]
        collapse: true
      chapter-connection:
        colors: ["FDF2F7", "A51C30"]
        collapse: true
        numbered: false
      definition:
        colors: ["F0F4F8", "1B4F72"]
        collapse: false
        numbered: false
      example:
        colors: ["F0F8F6", "148F77"]
        collapse: false
        numbered: false
    classes:
      callout-quiz-question:
        label: "Self-Check: Question"
        group: quiz-question
      callout-quiz-answer:
        label: "Self-Check: Answer"
        group: quiz-answer
      callout-chapter-connection:
        label: "Chapter connections"
        group: chapter-connection
      callout-definition:
        label: "Definition"
        group: definition
      callout-example:
        label: "Example"
        group: example

editor:
  render-on-save: true

format:
  epub:
    language: "en-US"
    identifier: "https://mlsysbook.ai/epub/vol2"
    contributor: "Harvard University, School of Engineering and Applied Sciences"
    subject: "Machine Learning, Distributed Systems, Production ML, Responsible AI"
    description: "Volume II of Machine Learning Systems, covering distributed systems, production deployment, and responsible AI at scale."
    type: "Text"
    format: "application/epub+zip"
    source: "https://mlsysbook.ai"
    toc: true
    toc-depth: 3
    toc-title: "Table of Contents"
    epub-chapter-level: 1
    epub-cover-image: "assets/images/covers/cover_image_title.png"
    epub-title-page: true
    css: "assets/styles/epub.css"
    code-overflow: wrap
    code-copy: true
    code-line-numbers: true
    number-sections: false
    number-depth: 3
    fig-align: center
    fig-caption: true
    footnotes-hover: true
    link-citations: true
    citations-hover: true
