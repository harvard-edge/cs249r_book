# =============================================================================
# VOLUME II EPUB CONFIGURATION
# =============================================================================
# Builds only Volume II: Advanced Machine Learning Systems as EPUB
#
# Usage:
#   cp config/_quarto-epub-vol2.yml _quarto.yml
#   quarto render --to epub
# =============================================================================

project:
  type: book
  output-dir: _build/epub-vol2
  execute-dir: project
  post-render:
    - scripts/clean_svgs.py
    - scripts/epub_postprocess.py

  preview:
    browser: false
    navigate: false

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book-vol2.png
  cover-image-alt: "Cover image."

  title: "Advanced Machine Learning Systems"

  date: today
  date-format: long

  author:
    name: "Prof. Vijay Janapa Reddi"
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations:
      - name: "Harvard University"
        department: "School of Engineering and Applied Sciences"
        city: "Cambridge"
        state: "MA"
        country: "USA"
    corresponding: true
    roles: "Author, editor and curator."
    orcid: "0000-0002-5259-7721"

  abstract: |
    Volume II of Machine Learning Systems extends the foundations from Volume I to address the complexities of building and managing the machine learning fleet. This volume covers the infrastructure, storage, and communication patterns required for distributed ML, parallelism strategies for training models too large for single machines, fault tolerance mechanisms, and inference optimization at scale. It also addresses production challenges including edge intelligence, security, privacy, and robust system design, concluding with responsible AI practices and sustainable computing. This volume equips practitioners with the knowledge to build and operate ML systems at production scale.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      This book was built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # ==================================================
    # Volume II Frontmatter
    # ==================================================
    - contents/vol2/frontmatter/foreword.qmd
    - contents/vol2/frontmatter/about.qmd
    - contents/vol2/frontmatter/acknowledgements.qmd

    # ==================================================
    # Part I: Foundations of Scale
    # ==================================================
    - part: "Foundations of Scale"
    - contents/vol2/parts/scale_principles.qmd
    - contents/vol2/introduction/introduction.qmd
    - contents/vol2/distributed_training/distributed_training.qmd
    - contents/vol2/communication/communication.qmd
    - contents/vol2/fault_tolerance/fault_tolerance.qmd

    # ==================================================
    # Part II: Building the Machine Learning Fleet
    # ==================================================
    - part: "Building the Machine Learning Fleet"
    - contents/vol2/parts/infrastructure_principles.qmd
    - contents/vol2/infrastructure/infrastructure.qmd
    - contents/vol2/infrastructure/networking.qmd
    - contents/vol2/storage/storage.qmd
    - contents/vol2/orchestration/orchestration.qmd

    # ==================================================
    # Part III: Deployment at Scale
    # ==================================================
    - part: "Deployment at Scale"
    - contents/vol2/parts/inference_principles.qmd
    - contents/vol2/inference/inference.qmd
    - contents/vol2/optimization/optimization.qmd
    - contents/vol2/edge_intelligence/edge_intelligence.qmd
    - contents/vol2/ops_scale/ops_scale.qmd

    # ==================================================
    # Part IV: Production Concerns
    # ==================================================
    - part: "Production Concerns"
    - contents/vol2/parts/production_principles.qmd
    - contents/vol2/privacy_security/privacy_security.qmd
    - contents/vol2/robust_ai/robust_ai.qmd
    - contents/vol2/sustainable_ai/sustainable_ai.qmd

    # ==================================================
    # Part V: Responsible AI at Scale
    # ==================================================
    - part: "Responsible AI at Scale"
    - contents/vol2/parts/responsible_principles.qmd
    - contents/vol2/responsible_ai/responsible_ai.qmd
    - contents/vol2/ai_for_good/ai_for_good.qmd
    - contents/vol2/frontiers/frontiers.qmd
    - contents/vol2/conclusion/conclusion.qmd
    - contents/vol2/backmatter/references.qmd

  appendices:
    - contents/vol2/backmatter/glossary/glossary.qmd

bibliography:
  - contents/vol2/introduction/introduction.bib
  - contents/vol2/infrastructure/infrastructure.bib
  - contents/vol2/storage/storage.bib
  - contents/vol2/communication/communication.bib
  - contents/vol2/distributed_training/distributed_training.bib
  - contents/vol2/inference/inference.bib
  - contents/vol2/edge_intelligence/edge_intelligence.bib
  - contents/vol2/fault_tolerance/fault_tolerance.bib
  - contents/vol2/privacy_security/privacy_security.bib
  - contents/vol2/robust_ai/robust_ai.bib
  - contents/vol2/ops_scale/ops_scale.bib
  - contents/vol2/responsible_ai/responsible_ai.bib
  - contents/vol2/sustainable_ai/sustainable_ai.bib
  - contents/vol2/ai_for_good/ai_for_good.bib
  - contents/vol2/frontiers/frontiers.bib
  - contents/vol2/conclusion/conclusion.bib

filters:
  - pandoc-ext/diagram
  - mlsysbook-ext/custom-numbered-blocks

filter-metadata:
  quiz-config:
    file-pattern: "*_quizzes.json"
    scan-directory: "contents/vol2"
    auto-discover-pdf: false

  part-summaries:
    file: "contents/vol2/parts/summaries.yml"
    enabled: true

  mlsysbook-ext/custom-numbered-blocks:
    icon-path: "assets/images/icons/callouts"
    icon-format: "png"
    groups:
      quiz-question:
        colors: ["F0F0F8", "5B4B8A"]
        collapse: true
      quiz-answer:
        colors: ["E8F2EA", "4a7c59"]
        collapse: true
      resource-slides:
        colors: ["E0F2F1", "20B2AA"]
        collapse: true
        numbered: false
      resource-videos:
        colors: ["E0F2F1", "20B2AA"]
        collapse: true
        numbered: false
      resource-exercises:
        colors: ["E0F2F1", "20B2AA"]
        collapse: true
        numbered: false
      chapter-connection:
        colors: ["FDF2F7", "A51C30"]
        collapse: true
        numbered: false
      chapter-forward:
        colors: ["FDF2F7", "A51C30"]
        collapse: true
        numbered: false
      chapter-recall:
        colors: ["FFF4E6", "C06014"]
        collapse: true
        numbered: false
      code-listing:
        colors: ["F2F4F8", "D1D7E0"]
        collapse: false
        numbered: false
      definition:
        colors: ["F0F4F8", "1B4F72"]
        collapse: false
        numbered: false
      example:
        colors: ["F0F8F6", "148F77"]
        collapse: false
        numbered: false
      colab-interactive:
        colors: ["FFF5E6", "FF6B35"]
        collapse: false
        numbered: false
      lighthouse:
        colors: ["FDF8E6", "B8860B"]
        collapse: false
        numbered: false
      perspective:
        colors: ["F7F8FA", "4A5568"]
        collapse: false
        numbered: false
      engineers-notebook:
        colors: ["F2F7FF", "2C5282"]
        collapse: false
        numbered: false
      theorem:
        colors: ["F5F0FA", "6B46C1"]
        collapse: false
        numbered: true
      checkpoint:
        colors: ["FFF8E7", "D97706"]
        collapse: false
        numbered: false
      principle:
        colors: ["F3F2FA", "3D3B8E"]
        collapse: false
        numbered: false
      takeaways:
        colors: ["FDF2F7", "BE185D"]
        collapse: false
        numbered: false
    classes:
      callout-quiz-question:
        label: "Self-Check: Question"
        group: quiz-question
      callout-quiz-answer:
        label: "Self-Check: Answer"
        group: quiz-answer
      callout-resource-slides:
        label: "Listing"
        group: resource-slides
      callout-resource-videos:
        label: "Videos"
        group: resource-videos
      callout-resource-exercises:
        label: "Exercises"
        group: resource-exercises
      callout-chapter-connection:
        label: "What's Next"
        group: chapter-connection
      callout-code:
        label: "Code"
        group: code-listing
      callout-definition:
        label: "Definition"
        group: definition
      callout-example:
        label: "Example"
        group: example
      callout-colab:
        label: "Interactive Colab"
        group: colab-interactive
      callout-lighthouse:
        label: "Lighthouse Example"
        group: lighthouse
      callout-perspective:
        label: "Systems Perspective"
        group: perspective
      callout-notebook:
        label: "AI Engineer's Notebook"
        group: engineers-notebook
      callout-principle:
        label: "Principle"
        group: principle
      callout-theorem:
        label: "Theorem"
        group: theorem
      callout-checkpoint:
        label: "Checkpoint"
        group: checkpoint
      callout-takeaways:
        label: "Takeaways"
        group: takeaways

editor:
  render-on-save: true

format:
  epub:
    language: "en-US"
    identifier: "https://mlsysbook.ai/epub/vol2"
    contributor: "Harvard University, School of Engineering and Applied Sciences"
    subject: "Machine Learning, Distributed Systems, Production ML, Responsible AI"
    description: "Volume II of Machine Learning Systems, covering distributed systems, production deployment, and responsible AI at scale."
    type: "Text"
    format: "application/epub+zip"
    source: "https://mlsysbook.ai"
    toc: true
    toc-depth: 3
    toc-title: "Table of Contents"
    epub-chapter-level: 1
    epub-cover-image: "assets/images/covers/cover_image_title-vol2.png"
    epub-title-page: true
    css: "assets/styles/epub.css"
    code-overflow: wrap
    code-copy: true
    code-line-numbers: true
    number-sections: false
    number-depth: 3
    fig-align: center
    fig-caption: true
    footnotes-hover: true
    link-citations: true
    citations-hover: true
