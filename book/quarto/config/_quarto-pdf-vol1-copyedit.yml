# =============================================================================
# VOLUME I PDF CONFIGURATION — COPYEDIT VERSION (Double-spaced, 9pt)
# =============================================================================
# Double-spaced PDF for MIT Press copyediting workflow.
# Output: Single pages (not spreads), double line spacing for annotation.
#
# Usage:
#   cp config/_quarto-pdf-vol1-copyedit.yml _quarto.yml
#   quarto render --to titlepage-pdf
#
# Note: This produces a much longer PDF (~2x pages) due to double spacing.
# Use _quarto-pdf-vol1.yml for the final single-spaced production PDF.
# =============================================================================

project:
  output-dir: _build/pdf-vol1-copyedit

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book-vol1.png
  cover-image-alt: "Cover image."

  title: "Introduction to Machine Learning Systems"
  subtitle: "COPYEDIT VERSION — Double-Spaced"

  date: today
  date-format: long

  author:
    name: Vijay Janapa Reddi
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations: Harvard University
    corresponding: true
    roles: "Author, editor and curator."

  abstract: |
    Volume I of Machine Learning Systems presents a comprehensive introduction to understanding and engineering machine learning systems, with a focus on mastering the machine learning node. This volume establishes the foundations through four progressive stages: building conceptual models, engineering complete workflows, optimizing for real-world constraints, and deploying with confidence. The content bridges theoretical foundations and practical engineering, emphasizing the systems context that engineers need to master when building AI solutions. While ML applications and tools evolve rapidly, the engineering principles for building ML systems remain largely consistent. This volume distills these enduring concepts for anyone seeking to build flexible, efficient, and robust ML systems.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      This book was built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # ==================================================
    # Volume I Frontmatter
    # ==================================================
    - contents/vol1/frontmatter/about.qmd
    - contents/vol1/frontmatter/acknowledgements.qmd
    - contents/vol1/frontmatter/notation.qmd

    # ==================================================
    # Part I: Foundations
    # ==================================================
    - contents/vol1/parts/foundations_principles.qmd
    - contents/vol1/introduction/introduction.qmd
    - contents/vol1/ml_systems/ml_systems.qmd
    - contents/vol1/ml_workflow/ml_workflow.qmd
    - contents/vol1/data_engineering/data_engineering.qmd

    # ==================================================
    # Part II: Build
    # ==================================================
    - contents/vol1/parts/build_principles.qmd
    - contents/vol1/nn_computation/nn_computation.qmd
    - contents/vol1/nn_architectures/nn_architectures.qmd
    - contents/vol1/frameworks/frameworks.qmd
    - contents/vol1/training/training.qmd

    # ==================================================
    # Part III: Optimize
    # ==================================================
    - contents/vol1/parts/optimize_principles.qmd
    - contents/vol1/data_selection/data_selection.qmd
    - contents/vol1/optimizations/model_compression.qmd
    - contents/vol1/hw_acceleration/hw_acceleration.qmd
    - contents/vol1/benchmarking/benchmarking.qmd

    # ==================================================
    # Part IV: Deploy
    # ==================================================
    - contents/vol1/parts/deploy_principles.qmd
    - contents/vol1/model_serving/model_serving.qmd
    - contents/vol1/ml_ops/ml_ops.qmd
    - contents/vol1/responsible_engr/responsible_engr.qmd
    - contents/vol1/conclusion/conclusion.qmd
    - contents/vol1/backmatter/references.qmd

  # ==================================================
  # Appendices (uses Appendix A, B, C... numbering)
  # ==================================================
  appendices:
    - contents/vol1/backmatter/appendix_dam.qmd
    - contents/vol1/backmatter/appendix_machine.qmd
    - contents/vol1/backmatter/appendix_algorithm.qmd
    - contents/vol1/backmatter/appendix_data.qmd
    - contents/vol1/backmatter/glossary/glossary.qmd

bibliography:
  - contents/vol1/backmatter/references.bib

citation: true
license: CC-BY-NC-SA

metadata-files:
  - config/shared/base/crossref-video.yml
  - config/shared/base/custom-numbered-blocks.yml
  - config/shared/base/diagram.yml
  - config/shared/pdf/filters.yml
  - config/shared/pdf/filter-metadata.yml
  - config/shared/vol1/filter-metadata-paths.yml
  - config/shared/pdf/custom-numbered-blocks-overrides.yml
  - config/shared/pdf/titlepage-theme-common.yml
  - config/shared/pdf/titlepage-pdf-common.yml
  - config/shared/pdf/titlepage-pdf-copyedit-common.yml
  - config/shared/pdf/copyedit-watermark.yml
  - config/shared/pdf/build-copyedit-common.yml

editor:
  render-on-save: false

format:
  titlepage-pdf:
    # Simplified cover for copyedit version
    include-in-header:
      - file: "tex/theme-colors-vol1.tex"
      - file: "tex/header-includes.tex"
      - text: |
          \usepackage{needspace}
          \let\Needspace\needspace
    include-before-body:
      - file: "tex/before-body-includes.tex"
