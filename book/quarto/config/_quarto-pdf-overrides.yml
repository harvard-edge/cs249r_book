# =============================================================================
# PDF FORMAT-SPECIFIC OVERRIDES
# =============================================================================
# This file contains PDF-specific configuration that overrides or extends
# the shared configuration. These settings are unique to PDF/book output.
# =============================================================================

project:
  type: book
  output-dir: _build/pdf
  post-render:
    - scripts/clean_svgs.py
  preview:
    browser: true
    navigate: true

citation: true

license: CC-BY-NC-SA

filters:
  - filters/sidenote.lua
  - filters/inject_parts.lua
  - filters/inject_quizzes.lua
  - pandoc-ext/diagram
  - mlsysbook-ext/custom-numbered-blocks

editor:
  render-on-save: true

format:
  titlepage-pdf:
    pdf-engine: lualatex
    use-rsvg-convert: true
    documentclass: scrbook
    classoption: [abstract,titlepage]
    header-includes: |
      \usepackage{needspace}
      \let\Needspace\needspace

    coverpage: true
    coverpage-title: "Machine Learning Systems"
    coverpage-bg-image: "assets/images/covers/cover-image-transparent.png"
    coverpage-author: ["Vijay", "Janapa Reddi"]
    coverpage-footer: "Introduction to"
    coverpage-theme:
        page-text-align: "center"

        bg-image-left: "0.225\\paperwidth"
        bg-image-bottom: 7
        bg-image-rotate: 0
        bg-image-opacity: 1.0

        author-style: "plain"
        author-sep: "newline"
        author-fontsize: 20
        author-align: "right"
        author-bottom: "0.132\\paperwidth"
        author-left: 7in
        author-width: 6in

        header-style: "none"
        date-style: "none"

        title-fontsize: 57
        title-left: "0.075\\paperwidth"
        title-bottom: "0.31\\paperwidth"
        title-width: "0.9\\paperwidth"

        footer-fontsize: 25
        footer-left: "0.075\\paperwidth"
        footer-bottom: "0.38\\paperwidth"
        footer-width: "0.9\\paperwidth"
        footer-align: "left"

    titlepage: true
    titlepage-theme:
      elements: [ "\\titleblock",
                  "Prof. Vijay Janapa Reddi",
                  "School of Engineering and Applied Sciences",
                  "Harvard University",
                  "\\vspace{80mm}",
                  "With heartfelt gratitude to the community for their invaluable contributions and steadfast support.",
                  "\\vfill",
                  "{{< meta date >}}",
                  "\\vfill"]
      date: "today"
      date-format: long

      page-align: "left"
      title-style: "plain"
      title-fontstyle: ["huge", "bfseries"]
      title-space-after: "4\\baselineskip"
      title-subtitle-space-between: "0.05\\textheight"
      subtitle-fontstyle: ["large", "textit"]
      author-style: "superscript-with-and"
      author-fontstyle: "large"
      affiliation-style: "numbered-list-with-correspondence"
      affiliation-fontstyle: "large"
      affiliation-space-after: "0pt"
      footer-style: "plain"
      footer-fontstyle: "large"
      logo-size: "0.15\\textheight"
      logo-space-after: "1\\baselineskip"
      vrule-width: "2pt"
      vrule-align: "left"
      vrule-color: "black"

    toc: true
    lof: false
    lot: false
    top-level-division: chapter
    number-sections: true
    toc-depth: 3
    number-depth: 3
    keep-tex: true
    citation-package: natbib
    link-citations: true
    biblio-title: "References"
    cite-method: citeproc
    title-block-style: none
    indent: 0px
    fontsize: 9pt
    colorlinks: true

    reference-location: document
    citation-location: block

    fig-caption: true
    fig-cap-location: bottom
    tbl-cap-location: top
    tbl-colwidths: auto
    hyperrefoptions:
      - linktoc=all
      - pdfwindowui
      - pdfpagemode=FullScreen
      - pdfpagelayout=TwoPageRight
    include-in-header:
      - file: "tex/header-includes.tex"
      - text: |
          \usepackage{needspace}
          \let\Needspace\needspace
    listings: false
    highlight-style: assets/styles/custom-code.theme

