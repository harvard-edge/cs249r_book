# =============================================================================
# EPUB FORMAT-SPECIFIC OVERRIDES
# =============================================================================
# This file contains EPUB-specific configuration that overrides or extends
# the shared configuration. These settings are unique to EPUB output.
# =============================================================================

project:
  type: book
  output-dir: _build/epub
  post-render:
    - scripts/clean_svgs.py
    - scripts/epub_postprocess.py
  preview:
    browser: false
    navigate: false

# EPUB uses parts structure instead of flat chapters
book:
  chapters:
    - index.qmd

   # Frontmatter
    - contents/frontmatter/foreword.qmd
    - contents/frontmatter/about/about.qmd
    - contents/frontmatter/changelog/changelog.qmd
    - contents/frontmatter/acknowledgements/acknowledgements.qmd
    - contents/frontmatter/socratiq/socratiq.qmd

    # Part I: Foundations
    - part: contents/parts/foundations.qmd
      chapters:
        - contents/core/introduction/introduction.qmd
        - contents/core/ml_systems/ml_systems.qmd
        - contents/core/dl_primer/dl_primer.qmd
        - contents/core/dnn_architectures/dnn_architectures.qmd

    # Part II: Design Principles
    - part: contents/parts/design_principles.qmd
      chapters:
        - contents/core/workflow/workflow.qmd
        - contents/core/data_engineering/data_engineering.qmd
        - contents/core/frameworks/frameworks.qmd
        - contents/core/training/training.qmd

    # Part III: Performance Engineering
    - part: "Performance Engineering"
      chapters:
        - contents/core/efficient_ai/efficient_ai.qmd
        - contents/core/optimizations/optimizations.qmd
        - contents/core/hw_acceleration/hw_acceleration.qmd
        - contents/core/benchmarking/benchmarking.qmd

    # Part IV: Robust Deployment
    - part: "Robust Deployment"
      chapters:
        - contents/core/ops/ops.qmd
        - contents/core/ondevice_learning/ondevice_learning.qmd
        - contents/core/privacy_security/privacy_security.qmd
        - contents/core/robust_ai/robust_ai.qmd

    # Part V: Trustworthy Systems
    - part: contents/parts/best_practices.qmd
      chapters:
        - contents/core/responsible_ai/responsible_ai.qmd
        - contents/core/sustainable_ai/sustainable_ai.qmd
        - contents/core/ai_for_good/ai_for_good.qmd

    # Part VI: Frontiers
    - part: "Frontiers"
      chapters:
        - contents/core/frontiers/frontiers.qmd
        - contents/core/conclusion/conclusion.qmd

    # Backmatter
    - contents/backmatter/glossary/glossary.qmd
    - contents/backmatter/references.qmd

  # EPUB-specific author metadata
  author:
    name: "Prof. Vijay Janapa Reddi"
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations:
      - name: "Harvard University"
        department: "School of Engineering and Applied Sciences"
        city: "Cambridge"
        state: "MA"
        country: "USA"
    corresponding: true
    roles: "Author, editor and curator."
    orcid: "0000-0002-5259-7721"

  # EPUB-specific abstract with HTML conditional
  abstract: |
    Machine Learning Systems presents a comprehensive approach to understanding and engineering machine learning (ML). While many resources focus on ML algorithms and model architectures, this book serves as a bridge between theoretical foundations and practical engineering. It emphasizes the systems context that engineers need to master when building AI solutions in the real world. The text progresses from foundational concepts to advanced system design, integrating topics such as data engineering, model optimization, hardware-aware training approaches, and inference acceleration strategies. Throughout the book, readers develop a principled understanding of ML systems engineering, learning to reason about system architectures and address critical challenges in areas including security, privacy, and reliability. While ML applications and tools evolve rapidly, the engineering principles for building ML systems remain largely consistent. This book distills these enduring concepts, making it a resource for anyone seeking to build flexible, efficient, and robust ML systems.

    ----

    ::: {.content-visible when-format="html"}
    ðŸŽ™ Listen to the **AI Podcast**,
    created using Google's Notebook LM and inspired by insights drawn from our
    [IEEE education viewpoint paper](https://web.eng.fiu.edu/gaquan/Papers/ESWEEK24Papers/CPS-Proceedings/pdfs/CODES-ISSS/563900a043/563900a043.pdf).
    This podcast provides an accessible overview of what this book is all about.

    &nbsp;
    <audio controls="controls">
      <source src="assets/media/notebooklm_podcast_mlsysbookai.mp3" type="audio/mpeg" />
      Your reader does not support audio.
    </audio>
    ::: 

    ----

filters:
  - pandoc-ext/diagram
  - mlsysbook-ext/custom-numbered-blocks

editor:
  render-on-save: true

format:
  epub:
    # --- EPUB-Specific Settings ---
    language: "en-US"

    # --- Dublin Core Metadata (EPUB-specific) ---
    identifier: "https://mlsysbook.ai/epub"
    contributor: "Harvard University, School of Engineering and Applied Sciences"
    subject: "Machine Learning, Computer Science, Engineering, Artificial Intelligence, Systems Design"
    description: "A textbook on machine learning systems engineering, covering principles and practices for building AI solutions in real-world environments."

    # --- Additional EPUB Metadata ---
    type: "Text"
    format: "application/epub+zip"
    source: "https://mlsysbook.ai"
    relation: "https://mlsysbook.ai"
    coverage: "Global"

    # --- Table of Contents & Navigation ---
    toc: true
    toc-depth: 3
    toc-title: "Table of Contents"

    # --- Content Structure & Layout ---
    epub-chapter-level: 1
    epub-cover-image: "assets/images/covers/cover_image_title.png"
    epub-title-page: true

    # --- Styling and Formatting ---
    css: "assets/styles/epub.css"
    code-overflow: wrap
    code-copy: true
    code-line-numbers: true

    # --- Section Numbering ---
    number-sections: false
    number-depth: 3

    # --- Figures & Tables ---
    fig-align: center
    fig-caption: true

    # --- Footnotes ---
    footnotes-hover: true
    link-citations: true
    citations-hover: true

metadata-files:
  - config/announcement.yml

