# =============================================================================
# VOLUME I EPUB CONFIGURATION
# =============================================================================
# Builds only Volume I: Introduction to ML Systems as EPUB
#
# Usage:
#   cp config/_quarto-epub-vol1.yml _quarto.yml
#   quarto render --to epub
# =============================================================================

project:
  type: book
  output-dir: _build/epub-vol1
  post-render:
    - scripts/clean_svgs.py
    - scripts/epub_postprocess.py

  preview:
    browser: false
    navigate: false

book:
  favicon: assets/images/icons/favicon.png
  cover-image: assets/images/covers/cover-hardcover-book.png
  cover-image-alt: "Cover image."

  title: "Machine Learning Systems"
  subtitle: "Volume I: Introduction to ML Systems"

  date: today
  date-format: long

  author:
    name: "Prof. Vijay Janapa Reddi"
    email: vj@eecs.harvard.edu
    url: https://www.google.com/search?q=Vijay+Janapa+Reddi
    affiliations:
      - name: "Harvard University"
        department: "School of Engineering and Applied Sciences"
        city: "Cambridge"
        state: "MA"
        country: "USA"
    corresponding: true
    roles: "Author, editor and curator."
    orcid: "0000-0002-5259-7721"

  abstract: |
    Volume I of Machine Learning Systems presents a comprehensive introduction to understanding and engineering machine learning systems. This volume establishes the foundations through four progressive stages: building conceptual models, engineering complete workflows, optimizing for real-world constraints, and deploying with confidence.

  repo-url: https://github.com/harvard-edge/cs249r_book

  page-footer:
    left: |
      Written, edited and curated by Prof. Vijay Janapa Reddi (Harvard University)
    right: |
      This book was built with <a href="https://quarto.org/">Quarto</a>.

  chapters:
    - index.qmd

    # Volume I Frontmatter
    - contents/vol1/frontmatter/foreword.qmd
    - contents/vol1/frontmatter/about.qmd
    - contents/vol1/frontmatter/acknowledgements.qmd

    # Part I: Foundations
    - part: "Part I: Foundations"
      chapters:
        - contents/vol1/introduction/introduction.qmd
        - contents/vol1/ml_systems/ml_systems.qmd
        - contents/vol1/workflow/workflow.qmd
        - contents/vol1/data_engineering/data_engineering.qmd

    # Part II: Build
    - part: "Part II: Build"
      chapters:
        - contents/vol1/dl_primer/dl_primer.qmd
        - contents/vol1/dnn_architectures/dnn_architectures.qmd
        - contents/vol1/frameworks/frameworks.qmd
        - contents/vol1/training/training.qmd

    # Part III: Optimize
    - part: "Part III: Optimize"
      chapters:
        - contents/vol1/efficient_ai/efficient_ai.qmd
        - contents/vol1/optimizations/optimizations.qmd
        - contents/vol1/hw_acceleration/hw_acceleration.qmd
        - contents/vol1/benchmarking/benchmarking.qmd

    # Part IV: Deploy
    - part: "Part IV: Deploy"
      chapters:
        - contents/vol1/serving/serving.qmd
        - contents/vol1/ops/ops.qmd
        - contents/vol1/responsible_engr/responsible_engr.qmd
        - contents/vol1/conclusion/conclusion.qmd

    # Volume I Backmatter
    - contents/vol1/backmatter/glossary/glossary.qmd
    - contents/vol1/backmatter/references.qmd

bibliography:
  - contents/vol1/introduction/introduction.bib
  - contents/vol1/ml_systems/ml_systems.bib
  - contents/vol1/workflow/workflow.bib
  - contents/vol1/data_engineering/data_engineering.bib
  - contents/vol1/dl_primer/dl_primer.bib
  - contents/vol1/dnn_architectures/dnn_architectures.bib
  - contents/vol1/frameworks/frameworks.bib
  - contents/vol1/training/training.bib
  - contents/vol1/efficient_ai/efficient_ai.bib
  - contents/vol1/optimizations/optimizations.bib
  - contents/vol1/hw_acceleration/hw_acceleration.bib
  - contents/vol1/benchmarking/benchmarking.bib
  - contents/vol1/serving/serving.bib
  - contents/vol1/ops/ops.bib
  - contents/vol1/responsible_engr/responsible_engr.bib
  - contents/vol1/conclusion/conclusion.bib

filters:
  - pandoc-ext/diagram
  - mlsysbook-ext/custom-numbered-blocks

filter-metadata:
  quiz-config:
    file-pattern: "*_quizzes.json"
    scan-directory: "contents/vol1"
    auto-discover-pdf: false

  part-summaries:
    file: "contents/parts/summaries-vol1.yml"
    enabled: true

  mlsysbook-ext/custom-numbered-blocks:
    icon-path: "assets/images/icons/callouts"
    icon-format: "png"
    groups:
      quiz-question:
        colors: ["F0F0F8", "5B4B8A"]
        collapse: true
      quiz-answer:
        colors: ["E8F2EA", "4a7c59"]
        collapse: true
      chapter-connection:
        colors: ["FDF2F7", "A51C30"]
        collapse: true
        numbered: false
      definition:
        colors: ["F0F4F8", "1B4F72"]
        collapse: false
        numbered: false
      example:
        colors: ["F0F8F6", "148F77"]
        collapse: false
        numbered: false
    classes:
      callout-quiz-question:
        label: "Self-Check: Question"
        group: quiz-question
      callout-quiz-answer:
        label: "Self-Check: Answer"
        group: quiz-answer
      callout-chapter-connection:
        label: "Chapter connections"
        group: chapter-connection
      callout-definition:
        label: "Definition"
        group: definition
      callout-example:
        label: "Example"
        group: example

editor:
  render-on-save: true

format:
  epub:
    language: "en-US"
    identifier: "https://mlsysbook.ai/epub/vol1"
    contributor: "Harvard University, School of Engineering and Applied Sciences"
    subject: "Machine Learning, Computer Science, Engineering, Artificial Intelligence, Systems Design"
    description: "Volume I of Machine Learning Systems, covering foundations, development, optimization, and deployment."
    type: "Text"
    format: "application/epub+zip"
    source: "https://mlsysbook.ai"
    toc: true
    toc-depth: 3
    toc-title: "Table of Contents"
    epub-chapter-level: 1
    epub-cover-image: "assets/images/covers/cover_image_title.png"
    epub-title-page: true
    css: "assets/styles/epub.css"
    code-overflow: wrap
    code-copy: true
    code-line-numbers: true
    number-sections: false
    number-depth: 3
    fig-align: center
    fig-caption: true
    footnotes-hover: true
    link-citations: true
    citations-hover: true
