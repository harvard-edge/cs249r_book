# Claude Agent Documentation

## Directory Structure

```
.claude/
├── agents/           # Agent definitions
│   ├── editor.md    # Editor agent for text improvements
│   ├── footnote.md  # Footnote agent for adding footnotes
│   ├── reviewer.md  # Reviewer agent for chapter analysis
│   └── stylist.md   # Stylist agent for academic tone
├── docs/
│   ├── agents/      # Agent-specific documentation
│   │   └── footnote_complete_guide.md
│   └── shared/      # Shared documentation
│       ├── agent_commit_policy.md
│       ├── CONTEXT.md
│       ├── GIT_WORKFLOW.md
│       └── KNOWLEDGE_MAP.md
├── _reviews/        # Temporary review outputs
│   └── README.md
└── footnote_context.md  # Generated by catalog_footnotes.py
```

## Key Documents

### For All Agents
- **KNOWLEDGE_MAP.md** - What concepts are taught in each chapter
- **agent_commit_policy.md** - Agents do NOT stage or commit
- **GIT_WORKFLOW.md** - Branch naming and merge conventions

### For Footnote Agent
- **footnote_complete_guide.md** - Comprehensive footnote guidelines
- **footnote_context.md** - Auto-generated catalog of existing footnotes

## Agent Workflow

1. **Reviewer** → Analyzes chapters, identifies issues
2. **Editor** → Implements text improvements based on review
3. **Footnote** → Adds educational footnotes with proper placement
4. **Stylist** → Final polish for academic tone and consistency

## Important Rules

1. **No Auto-Commits**: Agents leave changes unstaged for user review
2. **No Auto-Branching**: Agents work on current branch unless explicitly requested
3. **Knowledge Map**: Always consult to avoid content duplication
4. **Reviews**: Store in `_reviews/` directory, not committed to repo

## Scripts

- `scripts/catalog_footnotes.py` - Catalog all footnotes in the book
- `scripts/remove_footnotes.py` - Remove all footnotes for fresh start