# TinyðŸ”¥Torch: Don't import it. Build it.
# PDF-Specific Configuration

title: "TinyðŸ”¥Torch"
subtitle: "Don't import it. Build it."
author: "Prof. Vijay Janapa Reddi (Harvard University)"
copyright: "2025"
logo: _static/logos/logo-tinytorch-white.png

# Book description
description: >-
  An interactive course for building machine learning systems from the ground up.
  Learn by implementing your own PyTorch-style framework with hands-on coding,
  real datasets, and production-ready practices.

# Execution settings - disable for PDF
execute:
  execute_notebooks: "off"
  allow_errors: false
  timeout: 300

# Exclude patterns
exclude_patterns:
  - _build
  - .venv
  - appendices
  - "**/.venv/**"
  - "**/__pycache__/**"
  - "**/.DS_Store"

# GitHub repository (for reference in PDF)
repository:
  url: https://github.com/mlsysbook/TinyTorch
  path_to_book: docs
  branch: main

# LaTeX/PDF output configuration
latex:
  latex_engine: xelatex
  use_jupyterbook_latex: true
  latex_documents:
    targetname: tinytorch-course.tex

# Bibliography support
bibtex_bibfiles:
  - references.bib

# Sphinx extensions
sphinx:
  extra_extensions:
    - sphinxcontrib.mermaid
  config:
    mermaid_version: "10.6.1"
    # PDF-specific settings
    jupyterbook_latex_engine: 'xelatex'
    latex_toplevel_sectioning: 'chapter'
    latex_theme: 'manual'
    latex_elements:
      papersize: 'letterpaper'
      pointsize: '10pt'
      fontpkg: |
        % Modern, clean font stack matching TinyTorch logo
        \usepackage{lmodern}                    % Latin Modern - clean, professional
        \usepackage[scaled=0.92]{inconsolata}   % Code font - monospace
      preamble: |
        % Graphics and color support
        \usepackage{graphicx}
        \usepackage{xcolor}
        \usepackage{booktabs}
        \usepackage{tcolorbox}

        % TinyTorch brand colors - matching the logo
        \definecolor{torchnavy}{RGB}{27,58,95}      % Deep navy from "TORCH"
        \definecolor{flameorange}{RGB}{255,140,0}   % Bright flame orange
        \definecolor{flamered}{RGB}{220,20,60}      % Deep flame red
        \definecolor{tinygray}{RGB}{100,100,100}    % Neutral gray for text
        \definecolor{codebackground}{RGB}{252,248,245}  % Warm off-white
        \definecolor{accentorange}{RGB}{255,153,85} % Light orange from "tiny"

        % Syntax-highlighted code blocks with flame accent
        \usepackage{listings}
        \lstset{
          basicstyle=\ttfamily\footnotesize\color{tinygray},
          backgroundcolor=\color{codebackground},
          frame=leftline,
          framesep=10pt,
          framerule=3pt,
          rulecolor=\color{flameorange},
          numbers=none,
          breaklines=true,
          showstringspaces=false,
          commentstyle=\color{torchnavy!70}\itshape,
          keywordstyle=\color{torchnavy}\bfseries,
          stringstyle=\color{flamered},
          xleftmargin=15pt,
          framexleftmargin=15pt
        }

        % Custom title page with TinyTorch branding
        \makeatletter
        \renewcommand{\maketitle}{%
          \begin{titlepage}
            \centering
            \vspace*{2cm}
            % Logo
            \includegraphics[width=0.4\textwidth]{../_static/logos/logo-tinytorch.png}
            \vspace{1.5cm}

            % Subtitle
            {\LARGE\itshape\color{tinygray} Don't import it. Build it.\par}
            \vspace{2.5cm}

            % Author
            {\Large\color{torchnavy} \@author\par}
            \vfill

            % Date
            {\large\color{tinygray} \@date\par}
            \vspace{1cm}
          \end{titlepage}
        }
        \makeatother

        % Clean headers and footers with flame accent
        \usepackage{fancyhdr}
        \pagestyle{fancy}
        \fancyhead[LE,RO]{\color{torchnavy}\thepage}
        \fancyhead[LO]{\small\itshape\color{tinygray}\nouppercase{\rightmark}}
        \fancyhead[RE]{\small\itshape\color{tinygray}\nouppercase{\leftmark}}
        \fancyfoot[C]{}
        \renewcommand{\headrulewidth}{0.5pt}
        \renewcommand{\headrule}{\hbox to\headwidth{\color{flameorange}\leaders\hrule height \headrulewidth\hfill}}

        % Bold chapter styling with TinyTorch colors
        \usepackage{titlesec}
        \titleformat{\chapter}[display]
          {\normalfont\huge\bfseries\color{torchnavy}}
          {\color{flameorange}\chaptertitlename\ \thechapter}{15pt}{\Huge\color{torchnavy}}
        \titlespacing*{\chapter}{0pt}{-20pt}{30pt}

        % Professional hyperlinks with TinyTorch colors
        \usepackage{hyperref}
        \hypersetup{
          colorlinks=true,
          linkcolor=torchnavy,
          urlcolor=flameorange,
          citecolor=torchnavy,
          bookmarksnumbered=true,
          pdfstartview=FitH
        }
      latex_additional_files:
        - _static/logos/fire-emoji.png

# Parse configuration
parse:
  myst_enable_extensions:
    - "colon_fence"
    - "deflist"
    - "html_admonition"
    - "html_image"
    - "linkify"
    - "replacements"
    - "smartquotes"
    - "substitution"
    - "tasklist"

# Build only TOC files
only_build_toc_files: true
